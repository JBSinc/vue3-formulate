(function(o,p){typeof exports=="object"&&typeof module!="undefined"?module.exports=p(require("vue")):typeof define=="function"&&define.amd?define(["vue"],p):(o=typeof globalThis!="undefined"?globalThis:o||self,o.Vue3Formulate=p(o.Vue))})(this,function(o){"use strict";var ao=Object.defineProperty,lo=Object.defineProperties;var co=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var ae=(o,p,u)=>p in o?ao(o,p,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[p]=u,d=(o,p)=>{for(var u in p||(p={}))le.call(p,u)&&ae(o,u,p[u]);if(I)for(var u of I(p))ce.call(p,u)&&ae(o,u,p[u]);return o},g=(o,p)=>lo(o,co(p));var R=o=>typeof o=="symbol"?o:o+"",V=(o,p)=>{var u={};for(var C in o)le.call(o,C)&&p.indexOf(C)<0&&(u[C]=o[C]);if(o!=null&&I)for(var C of I(o))p.indexOf(C)<0&&ce.call(o,C)&&(u[C]=o[C]);return u};const p="FormulateInput",u=(e,t)=>({classification:e,component:p+(t||e[0].toUpperCase()+e.substr(1))}),C=g(d({},["text","email","number","color","date","hidden","month","password","search","tel","time","url","week","datetime-local"].reduce((e,t)=>g(d({},e),{[t]:u("text")}),{})),{range:u("slider"),textarea:u("textarea","TextArea"),checkbox:u("box"),radio:u("box"),submit:u("button"),button:u("button"),select:u("select"),file:u("file"),image:u("file"),group:u("group")});function de(e,t){const r={};for(let s in e)r[s]=t(s,e[s]);return r}function x(e,t,r=!1){if(e===t)return!0;if(!e||!t)return!1;if(typeof e!="object"&&typeof t!="object")return e===t;const s=Object.keys(e),i=Object.keys(t),n=s.length;if(i.length!==n)return!1;for(let a=0;a<n;a++){const l=s[a];if(!r&&e[l]!==t[l]||r&&!x(e[l],t[l],r))return!1}return!0}function w(e){return typeof e=="string"?e.replace(/([_-][a-z0-9])/ig,t=>e.indexOf(t)!==0&&!/[_-]/.test(e[e.indexOf(t)-1])?t.toUpperCase().replace(/[_-]/,""):t):e}function L(e){return typeof e=="string"?e[0].toUpperCase()+e.substr(1):e}function E(e){return e?typeof e=="string"?[e]:Array.isArray(e)?e:typeof e=="object"?Object.values(e):[]:[]}function M(e,t){return typeof e=="string"?M(e.split("|"),t):Array.isArray(e)?e.map(r=>ue(r,t)).filter(r=>!!r):[]}function ue(e,t){if(typeof e=="function")return[e,[]];if(Array.isArray(e)&&e.length){e=e.map(i=>i);const[r,s]=z(e.shift());if(typeof r=="string"&&Object.hasOwn(t,r))return[t[r],e,r,s];if(typeof r=="function")return[r,e,r,s]}if(typeof e=="string"&&e){const r=e.split(":"),[s,i]=z(r.shift());if(Object.hasOwn(t,s))return[t[s],r.length?r.join(":").split(","):[],s,i];throw new Error(`Unknown validation rule ${e}`)}return!1}function z(e){return/^[\^]/.test(e.charAt(0))?[w(e.substr(1)),e.charAt(0)]:[w(e),null]}function he(e){const t=[],r=e.findIndex(([,,i])=>i.toLowerCase()==="bail"),s=e.findIndex(([,,i])=>i.toLowerCase()==="optional");if(s>=0){const i=e.splice(s,1);t.push(Object.defineProperty(i,"bail",{value:!0}))}if(r>=0){const i=e.splice(0,r+1).slice(0,-1);i.length&&t.push(i),e.map(n=>t.push(Object.defineProperty([n],"bail",{value:!0})))}else t.push(e);return t.reduce((i,n)=>{const a=(l,c=!1)=>{if(l.length<2)return Object.defineProperty([l],"bail",{value:c});const h=[],b=l.findIndex(([,,,k])=>k==="^");if(b>=0){const k=l.splice(0,b);k.length&&h.push(...a(k,c)),h.push(Object.defineProperty([l.shift()],"bail",{value:!0})),l.length&&h.push(...a(l,c))}else h.push(l);return h};return i.concat(a(n))},[])}function me(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fe(e){let t=`^${me(e)}$`;const r={MM:"(0[1-9]|1[012])",M:"([1-9]|1[012])",DD:"([012][0-9]|3[01])",D:"([012]?[0-9]|3[01])",YYYY:"\\d{4}",YY:"\\d{2}"};return new RegExp(Object.keys(r).reduce((s,i)=>s.replace(i,r[i]),t))}function pe(e){return e.split("-").reduce((r,s)=>(r.length&&r.unshift(`${r[0]}-${s}`),r.length?r:[s]),[])}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){return!m(e,"__id")||t?Object.defineProperty(e,"__id",Object.assign(Object.create(null),{value:t||T(9)})):e}function P(e){return typeof e=="number"?!1:e===void 0||e===""||e===null||e===!1||Array.isArray(e)&&!e.some(t=>!P(t))||e&&!Array.isArray(e)&&typeof e=="object"&&P(Object.values(e))}function U(e,t){return Object.keys(e).reduce((r,s)=>{const i=w(s);return t.includes(i)&&(r[i]=e[s]),r},{})}function ye(e,t=0){let r=3735928559^t,s=1103547991^t;for(let i=0,n;i<e.length;i++)n=e.charCodeAt(i),r=Math.imul(r^n,2654435761),s=Math.imul(s^n,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&s)+(r>>>0)}function ge(){let e;return function(r,s,i){e&&clearTimeout(e),e=setTimeout(()=>r.call(this,...s),i)}}function T(e=13){return Math.random().toString(36).substring(2,e+2)}const be=/^(?:\w+:)?\/\/(\S+)$/,xe=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,Ee=/^[^\s.]+\.\S{2,}$/;function Ce(e){if(typeof e!="string")return!1;const t=e.match(be);if(!t)return!1;const r=t[1];return r?!!(xe.test(r)||Ee.test(r)):!1}class B{constructor(t,r,s={}){this.input=t,this.fileList=t.files,this.files=[],this.options=d({mimes:{}},s),this.results=!1,this.context=r,this.dataTransferCheck(),r&&r.uploadUrl&&(this.options.uploadUrl=r.uploadUrl),this.uploadPromise=null,Array.isArray(this.fileList)?this.rehydrateFileList(this.fileList):this.addFileList(this.fileList)}rehydrateFileList(t){const r=t.reduce((s,i)=>{const n=this.options?this.options.fileUrlKey:"url",a=i[n],l=a&&a.lastIndexOf(".")!==-1?a.substr(a.lastIndexOf(".")+1):!1,c=this.options.mimes[l]||!1;return s.push(Object.assign({},i,a?{name:i.name||a.substr(a.lastIndexOf("/")+1||0),type:i.type?i.type:c,previewData:a}:{})),s},[]);this.addFileList(r),this.results=this.mapUUID(t)}addFileList(t){for(let r=0;r<t.length;r++){const s=t[r],i=T(),n=function(){this.removeFile(i)};this.files.push({progress:!1,error:!1,complete:!1,justFinished:!1,name:s.name||"file-upload",file:s,uuid:i,path:!1,removeFile:n.bind(this),previewData:s.previewData||!1})}}hasUploader(){return!!this.context.uploader}uploaderIsAxios(){return!!(this.hasUploader()&&typeof this.context.uploader.request=="function"&&typeof this.context.uploader.get=="function"&&typeof this.context.uploader.delete=="function"&&typeof this.context.uploader.post=="function")}getUploader(...t){if(this.uploaderIsAxios()){const r=new FormData;if(r.append(this.context.name||"file",t[0]),this.context.uploadUrl===!1)throw new Error("No uploadURL specified: https://vueformulate.com/guide/inputs/file/#props");return this.context.uploader.post(this.context.uploadUrl,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:s=>{t[1](Math.round(s.loaded*100/s.total))}}).then(s=>s.data).catch(s=>t[2](s))}return this.context.uploader(...t)}upload(){return this.uploadPromise=this.uploadPromise?this.uploadPromise.then(()=>this.__performUpload()):this.__performUpload(),this.uploadPromise}__performUpload(){return new Promise((t,r)=>{if(!this.hasUploader())return r(new Error("No uploader has been defined"));Promise.all(this.files.map(s=>(s.error=!1,s.complete=!!s.path,s.path?Promise.resolve(s.path):this.getUploader(s.file,i=>{s.progress=i,this.context.rootEmit("file-upload-progress",i),i>=100&&(s.complete||(s.justFinished=!0,setTimeout(()=>{s.justFinished=!1},this.options.uploadJustCompleteDuration)),s.complete=!0,this.context.rootEmit("file-upload-complete",s))},i=>{s.progress=0,s.error=i,s.complete=!0,this.context.rootEmit("file-upload-error",i),r(i)},this.options)))).then(s=>{this.results=this.mapUUID(s),t(s)}).catch(s=>{throw new Error(s)})})}removeFile(t){const r=this.files.length;if(this.files=this.files.filter(s=>s&&s.uuid!==t),Array.isArray(this.results)&&(this.results=this.results.filter(s=>s&&s.__id!==t)),this.context.performValidation(),window&&this.fileList instanceof FileList&&this.supportsDataTransfers){const s=new DataTransfer;this.files.forEach(i=>s.items.add(i.file)),this.fileList=s.files,this.input.files=this.fileList}else this.fileList=this.fileList.filter(s=>s&&s.__id!==t);r>this.files.length&&this.context.rootEmit("file-removed",this.files)}mergeFileList(t){if(this.addFileList(t.files),this.supportsDataTransfers){const r=new DataTransfer;this.files.forEach(s=>{s.file instanceof File&&r.items.add(s.file)}),this.fileList=r.files,this.input.files=this.fileList,t.files=new DataTransfer().files}this.context.performValidation(),this.loadPreviews(),this.context.uploadBehavior!=="delayed"&&this.upload()}loadPreviews(){this.files.map(t=>{if(!t.previewData&&window&&window.FileReader&&/^image\//.test(t.file.type)){const r=new FileReader;r.onload=s=>Object.assign(t,{previewData:s.target.result}),r.readAsDataURL(t.file)}})}dataTransferCheck(){try{new DataTransfer,this.supportsDataTransfers=!0}catch(t){this.supportsDataTransfers=!1}}getFiles(){return this.files}mapUUID(t){return t.map((r,s)=>(this.files[s].path=r!==void 0?r:!1,r&&S(r,this.files[s].uuid)))}toString(){const t=this.files.length?this.files.length+" files":"empty";return this.results?JSON.stringify(this.results,null,"  "):`FileUpload(${t})`}}const ke={accepted:function({value:e}){return Promise.resolve(["yes","on","1",1,!0,"true"].includes(e))},after:function({value:e},t=!1){const r=Date.parse(t||new Date),s=Date.parse(e);return Promise.resolve(Number.isNaN(s)?!1:s>r)},alpha:function({value:e},t="default"){const r={default:/^[a-zA-ZÀ-ÖØ-öø-ÿĄąĆćĘęŁłŃńŚśŹźŻż]+$/,latin:/^[a-z]+$/i},s=Object.prototype.hasOwnProperty.call(r,t)?t:"default";return Promise.resolve(r[s].test(e))},alphanumeric:function({value:e},t="default"){const r={default:/^[a-zA-Z0-9À-ÖØ-öø-ÿĄąĆćĘęŁłŃńŚśŹźŻż]+$/,latin:/^[a-z0-9]+$/i},s=Object.prototype.hasOwnProperty.call(r,t)?t:"default";return Promise.resolve(r[s].test(e))},before:function({value:e},t=!1){const r=Date.parse(t||new Date),s=Date.parse(e);return Promise.resolve(Number.isNaN(s)?!1:s<r)},between:function({value:e},t=0,r=10,s){return Promise.resolve(t===null||r===null||Number.isNaN(t)||Number.isNaN(r)?!1:!Number.isNaN(e)&&s!=="length"||s==="value"?(e=Number(e),t=Number(t),r=Number(r),e>t&&e<r):typeof e=="string"||s==="length"?(e=Number.isNaN(e)?e:e.toString(),e.length>t&&e.length<r):!1)},confirm:function({value:e,getGroupValues:t,name:r},s){return Promise.resolve((()=>{const i=t();var n=s;return n||(n=r.endsWith("_confirm")?r.substr(0,r.length-8):`${r}_confirm`),i[n]===e})())},date:function({value:e},t=!1){return Promise.resolve(t&&typeof t=="string"?fe(t).test(e):!Number.isNaN(Date.parse(e)))},email:function({value:e}){const t=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return Promise.resolve(t.test(e))},endsWith:function({value:e},...t){return Promise.resolve(typeof e=="string"&&t.length?t.find(r=>e.endsWith(r))!==void 0:typeof e=="string"&&t.length===0)},in:function({value:e},...t){return Promise.resolve(t.find(r=>typeof r=="object"?x(r,e):r===e)!==void 0)},matches:function({value:e},...t){return Promise.resolve(!!t.find(r=>(typeof r=="string"&&r.substr(0,1)==="/"&&r.substr(-1)==="/"&&(r=new RegExp(r.substr(1,r.length-2))),r instanceof RegExp?r.test(e):r===e)))},mime:function({value:e},...t){return Promise.resolve((()=>{if(e instanceof B){const r=e.getFiles();for(let s=0;s<r.length;s++){const i=r[s].file;if(!t.includes(i.type))return!1}}return!0})())},min:function({value:e},t=1,r){return Promise.resolve(Array.isArray(e)?(t=Number.isNaN(t)?t:Number(t),e.length>=t):!Number.isNaN(e)&&r!=="length"||r==="value"?(e=Number.isNaN(e)?e:Number(e),e>=t):typeof e=="string"||r==="length"?(e=Number.isNaN(e)?e:e.toString(),e.length>=t):!1)},max:function({value:e},t=10,r){return Promise.resolve(Array.isArray(e)?(t=Number.isNaN(t)?t:Number(t),e.length<=t):!Number.isNaN(e)&&r!=="length"||r==="value"?(e=Number.isNaN(e)?e:Number(e),e<=t):typeof e=="string"||r==="length"?(e=Number.isNaN(e)?e:e.toString(),e.length<=t):!1)},not:function({value:e},...t){return Promise.resolve(t.find(r=>typeof r=="object"?x(r,e):r===e)===void 0)},number:function({value:e}){return Promise.resolve(!Number.isNaN(e))},required:function({value:e},t="pre"){return Promise.resolve(Array.isArray(e)?!!e.length:e instanceof B?e.getFiles().length>0:typeof e=="string"?t==="trim"?!!e.trim():!!e:typeof e=="object"?e?!!Object.keys(e).length:!1:!0)},startsWith:function({value:e},...t){return Promise.resolve(typeof e=="string"&&t.length?t.find(r=>e.startsWith(r))!==void 0:typeof e=="string"&&t.length===0)},url:function({value:e}){return Promise.resolve(Ce(e))},bail:function(){return Promise.resolve(!0)},optional:function({value:e}){return Promise.resolve(!P(e))}},O="image/",Ve={csv:"text/csv",gif:O+"gif",jpg:O+"jpeg",jpeg:O+"jpeg",png:O+"png",pdf:"application/pdf",svg:O+"svg+xml"},H=["outer","wrapper","label","element","input","help","errors","error","decorator","rangeValue","uploadArea","uploadAreaMask","files","file","fileName","fileAdd","fileAddInput","fileRemove","fileProgress","fileUploadError","fileImagePreview","fileImagePreviewImage","fileProgressInner","grouping","groupRepeatable","groupRepeatableRemove","groupAddMore","form","formErrors","formError"],_={hasErrors:e=>e.hasErrors,hasValue:e=>e.hasValue,isValid:e=>e.isValid},Fe=(e,t)=>{const r=e.replace(/[A-Z]/g,a=>"-"+a.toLowerCase()),s=["form","file"].includes(r.substr(0,4))?"":"-input",i=["decorator","range-value"].includes(r)?"-element":"",n=`formulate${s}${i}${r!=="outer"?`-${r}`:""}`;return r==="input"?[]:[n].concat(we(n,e,t))},we=(e,t,r)=>{const s=[];switch(t){case"label":s.push(`${e}--${r.labelPosition}`);break;case"element":const i=r.classification==="group"?"group":r.type;s.push(`${e}--${i}`),i==="group"&&s.push("formulate-input-group");break;case"help":s.push(`${e}--${r.helpPosition}`);break;case"form":r.name&&s.push(`${e}--${r.name}`)}return s},q=(()=>{const e=[""].concat(Object.keys(_).map(t=>L(t)));return H.reduce((t,r)=>t.concat(e.reduce((s,i)=>(s.push(`${r}${i}Class`),s),[])),[])})();function N(e,t,r){switch(typeof t){case"string":return t;case"function":return t(r,E(e));case"object":if(Array.isArray(t))return E(e).concat(t);default:return e}}function Pe(e,t,r,s){return Object.keys(_).reduce((i,n)=>{if(_[n](s)){const a=`${e}${L(n)}`,l=`${a}Class`;if(r[a]){const c=typeof r[a]=="string"?E(r[a]):r[a];i=N(i,c,s)}if(s[l]){const c=typeof s[l]=="string"?E(s[l]):s[`${a}Class`];i=N(i,c,s)}}return i},t)}function Be(e){return H.reduce((t,r)=>Object.assign(t,{[r]:Fe(r,e)}),{})}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function K(e){return Object.prototype.toString.call(e)==="[object Object]"}function W(e){var t,r;return K(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(K(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function y(e){return typeof e=="string"?e[0].toUpperCase()+e.substr(1):e}var Ae={accepted:function(e){return"Please accept the "+e.name+"."},after:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?y(t)+" must be after "+r[0]+".":y(t)+" must be a later date."},alpha:function(e){return y(e.name)+" can only contain alphabetical characters."},alphanumeric:function(e){return y(e.name)+" can only contain letters and numbers."},before:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?y(t)+" must be before "+r[0]+".":y(t)+" must be an earlier date."},between:function(e){var t=e.name,r=e.value,s=e.args,i=!(!Array.isArray(s)||!s[2])&&s[2];return!isNaN(r)&&i!=="length"||i==="value"?y(t)+" must be between "+s[0]+" and "+s[1]+".":y(t)+" must be between "+s[0]+" and "+s[1]+" characters long."},confirm:function(e){var t=e.name;return e.args,y(t)+" does not match."},date:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?y(t)+" is not a valid date, please use the format "+r[0]:y(t)+" is not a valid date."},default:function(e){return e.name,"This field isn’t valid."},email:function(e){e.name;var t=e.value;return t?"“"+t+"” is not a valid email address.":"Please enter a valid email address."},endsWith:function(e){e.name;var t=e.value;return t?"“"+t+"” doesn’t end with a valid value.":"This field doesn’t end with a valid value."},in:function(e){var t=e.name,r=e.value;return typeof r=="string"&&r?"“"+y(r)+"” is not an allowed "+t+".":"This is not an allowed "+t+"."},matches:function(e){return y(e.name)+" is not an allowed value."},max:function(e){var t=e.name,r=e.value,s=e.args;if(Array.isArray(r))return"You may only select "+s[0]+" "+t+".";var i=!(!Array.isArray(s)||!s[1])&&s[1];return!isNaN(r)&&i!=="length"||i==="value"?y(t)+" must be less than or equal to "+s[0]+".":y(t)+" must be less than or equal to "+s[0]+" characters long."},mime:function(e){var t=e.name,r=e.args;return y(t)+" must be of the type: "+(r[0]||"No file formats allowed.")},min:function(e){var t=e.name,r=e.value,s=e.args;if(Array.isArray(r))return"You need at least "+s[0]+" "+t+".";var i=!(!Array.isArray(s)||!s[1])&&s[1];return!isNaN(r)&&i!=="length"||i==="value"?y(t)+" must be at least "+s[0]+".":y(t)+" must be at least "+s[0]+" characters long."},not:function(e){var t=e.name;return"“"+e.value+"” is not an allowed "+t+"."},number:function(e){return y(e.name)+" must be a number."},required:function(e){return y(e.name)+" is required."},startsWith:function(e){e.name;var t=e.value;return t?"“"+t+"” doesn’t start with a valid value.":"This field doesn’t start with a valid value."},url:function(e){return e.name,"Please include a valid url."}};function Se(e){var t;e.extend({locales:(t={},t.en=Ae,t)})}function Oe(e,t,r,s){return new Promise((i,n)=>{const a=(s.fauxUploaderDuration||1500)*(.5+Math.random()),l=performance.now(),c=()=>setTimeout(()=>{const h=performance.now()-l,b=Math.min(100,Math.round(h/a*100));if(t(b),b>=100)return i({url:"http://via.placeholder.com/350x150.png",name:e.name});c()},20);c()})}const $e={inheritAttrs:!1,functional:!0,render(e,{props:t,data:r,parent:s,children:i}){for(var n=s,b=t,{name:a,forceWrap:l,context:c}=b,h=V(b,["name","forceWrap","context"]);n&&n.$options.name!=="FormulateInput";)n=n.$parent;if(!n)return null;if(n.$scopedSlots&&n.$scopedSlots[t.name])return n.$scopedSlots[t.name](d(d({},c),h));if(Array.isArray(i)&&(i.length>1||l&&i.length>0)){const k=r.attrs,{name:$,context:G}=k,D=V(k,["name","context"]);return e("div",g(d({},r),{attrs:D}),i)}else if(Array.isArray(i)&&i.length===1)return i[0];return null}};function De(e,t=0,r={}){if(e&&typeof e=="object"&&!Array.isArray(e)){let s=e,{children:i=null,component:n="FormulateInput",depth:a=1,key:l=null}=s,c=V(s,["children","component","depth","key"]);const h=c.class||{};delete c.class;const b={},k=Object.keys(c).reduce((F,j)=>/^@/.test(j)?Object.assign(F,{[j.substr(1)]:c[j]}):F,{});Object.keys(k).forEach(F=>{delete c[`@${F}`],b[F]=Ne(F,k[F],r)});const $=n==="FormulateInput"?c.type||"text":n,G=c.name||$||"el";l||(c.id?l=c.id:n!=="FormulateInput"&&typeof i=="string"?l=`${$}-${ye(i)}`:l=`${$}-${G}-${a}${c.name?"":"-"+t}`);const D=Array.isArray(i)?i.map(F=>Object.assign(F,{depth:a+1})):i;return Object.assign({key:l,depth:a,attrs:c,component:n,class:h,on:b},D?{children:D}:{})}return null}function Y(e,t,r){return Array.isArray(t)?t.map((s,i)=>{const n=De(s,i,r);return e(n.component,{attrs:n.attrs,class:n.class,key:n.key,on:n.on},n.children?Y(e,n.children,r):null)}):t}function Ne(e,t,r){return function(...s){if(typeof t=="function")return t.call(this,...s);if(typeof t=="string"&&m(r,t))return r[t].call(this,...s);if(m(r,e))return r[e].call(this,...s)}}const je={functional:!0,render:(e,{props:t,listeners:r})=>Y(e,t.schema,r)};class Ie{constructor(t){this.registry=new Map,this.errors={},this.ctx=t}add(t,r){return this.registry.set(t,r),this.errors=g(d({},this.errors),{[t]:r.getErrorObject().hasErrors}),this}remove(t){this.ctx.deps.delete(this.registry.get(t)),this.ctx.deps.forEach(l=>l.delete(t));let r=this.ctx.keepModelData;!r&&this.registry.has(t)&&this.registry.get(t).keepModelData!=="inherit"&&(r=this.registry.get(t).keepModelData),this.ctx.preventCleanup&&(r=!0),this.registry.delete(t);const n=this.errors,{[t]:s}=n,i=V(n,[R(t)]);if(this.errors=i,!r){const a=this.ctx.proxy,{[t]:l}=a,c=V(a,[R(t)]);this.ctx.uuid&&S(c,this.ctx.uuid),this.ctx.proxy=c,this.ctx.$emit("input",this.ctx.proxy)}return this}has(t){return this.registry.has(t)}get(t){return this.registry.get(t)}map(t){const r={};return this.registry.forEach((s,i)=>Object.assign(r,{[i]:t(s,i)})),r}keys(){return Array.from(this.registry.keys())}register(t,r){if(m(r.$options.propsData,"ignored"))return!1;if(this.registry.has(t))return this.ctx.$nextTick(()=>this.registry.has(t)?!1:this.register(t,r)),!1;this.add(t,r);const s=m(r.$options.propsData,"formulateValue"),i=m(r.$options.propsData,"value"),n=this.ctx.debounce||this.ctx.debounceDelay||this.ctx.context&&this.ctx.context.debounceDelay;n&&!m(r.$options.propsData,"debounce")&&(r.debounceDelay=n),!s&&this.ctx.hasInitialValue&&!P(this.ctx.initialValues[t])?r.context.model=this.ctx.initialValues[t]:(s||i)&&!x(r.proxy,this.ctx.initialValues[t],!0)&&this.ctx.setFieldValue(t,r.proxy),this.childrenShouldShowErrors&&(r.formShouldShowErrors=!0)}reduce(t,r){return this.registry.forEach((s,i)=>{r=t(r,s,i)}),r}dataProps(){return{proxy:{},registry:this,register:this.register.bind(this),deregister:t=>this.remove(t),childrenShouldShowErrors:!1,errorObservers:[],deps:new Map,preventCleanup:!1}}}function J(e){return new Ie(e).dataProps()}function Z(e={}){return{hasInitialValue(){return this.formulateValue&&typeof this.formulateValue=="object"||this.values&&typeof this.values=="object"||this.isGrouping&&typeof this.context.model[this.index]=="object"},isVmodeled(){return!!(this.$options.propsData.hasOwnProperty("formulateValue")&&this._events&&Array.isArray(this._events.input)&&this._events.input.length)},initialValues(){return m(this.$options.propsData,"formulateValue")&&typeof this.formulateValue=="object"?d({},this.formulateValue):m(this.$options.propsData,"values")&&typeof this.values=="object"?d({},this.values):this.isGrouping&&typeof this.context.model[this.index]=="object"?this.context.model[this.index]:{}},mergedGroupErrors(){const t=/^([^.\d+].*?)\.(\d+\..+)$/;return Object.keys(this.mergedFieldErrors).filter(r=>t.test(r)).reduce((r,s)=>{let[,i,n]=s.match(t);return r[i]||(r[i]={}),Object.assign(r[i],{[n]:this.mergedFieldErrors[s]}),r},{})}}}function Q(e=[]){const t={applyInitialValues(){this.hasInitialValue&&(this.proxy=d({},this.initialValues))},setFieldValue(r,s){if(s===void 0){const i=this.proxy,{[r]:n}=i,a=V(i,[R(r)]);this.proxy=a}else Object.assign(this.proxy,{[r]:s});this.$emit("input",d({},this.proxy))},valueDeps(r){return Object.keys(this.proxy).reduce((s,i)=>Object.defineProperty(s,i,{enumerable:!0,get:()=>{const n=this.registry.get(i);return this.deps.set(r,this.deps.get(r)||new Set),n&&(this.deps.set(n,this.deps.get(n)||new Set),this.deps.get(n).add(r.name)),this.deps.get(r).add(i),this.proxy[i]}}),Object.create(null))},validateDeps(r){this.deps.has(r)&&this.deps.get(r).forEach(s=>this.registry.has(s)&&this.registry.get(s).performValidation())},hasValidationErrors(){return Promise.all(this.registry.reduce((r,s,i)=>(r.push(s.performValidation()&&s.getValidationErrors()),r),[])).then(r=>r.some(s=>s.hasErrors))},showErrors(){this.childrenShouldShowErrors=!0,this.registry.map(r=>{r.formShouldShowErrors=!0})},hideErrors(){this.childrenShouldShowErrors=!1,this.registry.map(r=>{r.formShouldShowErrors=!1,r.behavioralErrorVisibility=!1})},setValues(r){Array.from(new Set(Object.keys(r||{}).concat(Object.keys(this.proxy)))).forEach(i=>{const n=this.registry.has(i)&&this.registry.get(i);let a=r?r[i]:void 0;n&&!x(n.proxy,a,!0)&&(n.context.model=a),x(a,this.proxy[i],!0)||this.setFieldValue(i,a)})},updateValidation(r){m(this.registry.errors,r.name)&&(this.registry.errors[r.name]=r.hasErrors),this.$emit("validation",r)},addErrorObserver(r){this.errorObservers.find(s=>r.callback===s.callback)||(this.errorObservers.push(r),r.type==="form"?r.callback(this.mergedFormErrors):r.type==="group"&&m(this.mergedGroupErrors,r.field)?r.callback(this.mergedGroupErrors[r.field]):m(this.mergedFieldErrors,r.field)&&r.callback(this.mergedFieldErrors[r.field]))},removeErrorObserver(r){this.errorObservers=this.errorObservers.filter(s=>s.callback!==r)}};return Object.keys(t).reduce((r,s)=>e.includes(s)?r:g(d({},r),{[s]:t[s]}),{})}function X(){return{mergedFieldErrors:{handler(e){this.errorObservers.filter(t=>t.type==="input").forEach(t=>t.callback(e[t.field]||[]))},immediate:!0},mergedGroupErrors:{handler(e){this.errorObservers.filter(t=>t.type==="group").forEach(t=>t.callback(e[t.field]||{}))},immediate:!0}}}function ee(e,t=[]){const r={formulateSetter:e.setFieldValue,formulateRegister:e.register,formulateDeregister:e.deregister,formulateFieldValidation:e.updateValidation,getFormValues:e.valueDeps,getGroupValues:e.valueDeps,validateDependents:e.validateDeps,observeErrors:e.addErrorObserver,removeErrorObserver:e.removeErrorObserver};return Object.keys(r).filter(i=>!t.includes(i)).reduce((i,n)=>Object.assign(i,{[n]:r[n]}),{})}function te(e){if(typeof e!="object")return e;const r=Array.isArray(e)?[]:{};for(const s in e)e[s]instanceof B||isValueType(e[s])?r[s]=e[s]:r[s]=te(e[s]);return r}class re{constructor(t){this.form=t}hasValidationErrors(){return this.form.hasValidationErrors()}values(){return new Promise((t,r)=>{const s=[],i=te(this.form.proxy);for(const n in i)typeof this.form.proxy[n]=="object"&&this.form.proxy[n]instanceof B&&s.push(this.form.proxy[n].upload().then(a=>Object.assign(i,{[n]:a})));Promise.all(s).then(()=>t(i)).catch(n=>r(n))})}}const f=(e,t)=>{const r=e.__vccOpts||e;for(const[s,i]of t)r[s]=i;return r},Re={name:"FormulateForm",inheritAttrs:!1,provide(){return g(d({},ee(this,["getGroupValues"])),{observeContext:this.addContextObserver,removeContextObserver:this.removeContextObserver})},model:{prop:"formulateValue",event:"input"},props:{name:{type:[String,Boolean],default:!1},formulateValue:{type:Object,default:()=>({})},values:{type:[Object,Boolean],default:!1},errors:{type:[Object,Boolean],default:!1},formErrors:{type:Array,default:()=>[]},schema:{type:[Array,Boolean],default:!1},keepModelData:{type:[Boolean,String],default:!1},invalidMessage:{type:[Boolean,Function,String],default:!1},debounce:{type:[Boolean,Number],default:!1}},data(){return g(d({},J(this)),{formShouldShowErrors:!1,contextObservers:[],namedErrors:[],namedFieldErrors:{},isLoading:!1,hasFailedSubmit:!1})},computed:g(d({},Z()),{schemaListeners(){const r=this.$listeners,{submit:e}=r;return V(r,["submit"])},pseudoProps(){return U(this.$attrs,q.filter(e=>/^form/.test(e)))},attributes(){const e=Object.keys(this.$attrs).filter(t=>!m(this.pseudoProps,w(t))).reduce((t,r)=>g(d({},t),{[r]:this.$attrs[r]}),{});return typeof this.name=="string"&&Object.assign(e,{name:this.name}),e},hasErrors(){return Object.values(this.registry.errors).some(e=>e)},isValid(){return!this.hasErrors},formContext(){return{errors:this.mergedFormErrors,pseudoProps:this.pseudoProps,hasErrors:this.hasErrors,value:this.proxy,hasValue:!P(this.proxy),isValid:this.isValid,isLoading:this.isLoading,classes:this.classes}},classes(){return this.$formulate.classes(g(d(d({},this.$props),this.pseudoProps),{value:this.proxy,errors:this.mergedFormErrors,hasErrors:this.hasErrors,hasValue:!P(this.proxy),isValid:this.isValid,isLoading:this.isLoading,type:"form",classification:"form",attrs:this.$attrs}))},invalidErrors(){if(this.hasFailedSubmit&&this.hasErrors)switch(typeof this.invalidMessage){case"string":return[this.invalidMessage];case"object":return Array.isArray(this.invalidMessage)?this.invalidMessage:[];case"function":const e=this.invalidMessage(this.failingFields);return Array.isArray(e)?e:[e]}return[]},mergedFormErrors(){return this.formErrors.concat(this.namedErrors).concat(this.invalidErrors)},mergedFieldErrors(){const e={};if(this.errors)for(const t in this.errors)e[t]=E(this.errors[t]);for(const t in this.namedFieldErrors)e[t]=E(this.namedFieldErrors[t]);return e},hasFormErrorObservers(){return!!this.errorObservers.filter(e=>e.type==="form").length},failingFields(){return Object.keys(this.registry.errors).reduce((e,t)=>d(d({},e),this.registry.errors[t]?{[t]:this.registry.get(t)}:{}),{})}}),watch:g(d({},X()),{formulateValue:{handler(e){this.isVmodeled&&e&&typeof e=="object"&&this.setValues(e)},deep:!0},mergedFormErrors(e){this.errorObservers.filter(t=>t.type==="form").forEach(t=>t.callback(e))}}),created(){this.$formulate.register(this),this.applyInitialValues(),this.$emit("created",this)},destroyed(){this.$formulate.deregister(this)},methods:g(d({},Q()),{applyErrors({formErrors:e,inputErrors:t}){this.namedErrors=e,this.namedFieldErrors=t},addContextObserver(e){this.contextObservers.find(t=>t===e)||(this.contextObservers.push(e),e(this.formContext))},removeContextObserver(e){this.contextObservers.filter(t=>t!==e)},registerErrorComponent(e){this.errorComponents.includes(e)||this.errorComponents.push(e)},formSubmitted(){if(this.isLoading)return;this.isLoading=!0,this.showErrors();const e=new re(this),t=this.$listeners["submit-raw"]||this.$listeners.submitRaw,r=typeof t=="function"?t(e):Promise.resolve(e);return(r instanceof Promise?r:Promise.resolve(r)).then(i=>{const n=i instanceof re?i:e;return n.hasValidationErrors().then(a=>[n,a])}).then(([i,n])=>!n&&typeof this.$listeners.submit=="function"?i.values().then(a=>{this.hasFailedSubmit=!1;const l=this.$listeners.submit(a);return(l instanceof Promise?l:Promise.resolve()).then(()=>a)}):this.onFailedValidation()).finally(()=>{this.isLoading=!1})},onFailedValidation(){return this.hasFailedSubmit=!0,this.$emit("failed-validation",d({},this.failingFields)),this.$formulate.failedValidation(this)}})};function Le(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSchema"),l=o.resolveComponent("FormulateErrors");return o.openBlock(),o.createElementBlock("form",o.mergeProps({class:n.classes.form},n.attributes,{onSubmit:t[0]||(t[0]=o.withModifiers((...c)=>n.formSubmitted&&n.formSubmitted(...c),["prevent"]))}),[r.schema?(o.openBlock(),o.createBlock(a,o.mergeProps({key:0,schema:r.schema},o.toHandlers(n.schemaListeners)),null,16,["schema"])):o.createCommentVNode("",!0),n.hasFormErrorObservers?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(l,{key:1,context:n.formContext},null,8,["context"])),o.renderSlot(e.$slots,"default",o.normalizeProps(o.guardReactiveProps(n.formContext)))],16)}const Me=f(Re,[["render",Le]]),Ue={context(){return gt.call(this,d({addLabel:this.logicalAddLabel,removeLabel:this.logicalRemoveLabel,attributes:this.elementAttributes,blurHandler:pt.bind(this),classification:this.classification,component:this.component,debounceDelay:this.debounceDelay,disableErrors:this.disableErrors,errors:this.explicitErrors,formShouldShowErrors:this.formShouldShowErrors,getValidationErrors:this.getValidationErrors.bind(this),groupErrors:this.mergedGroupErrors,hasGivenName:this.hasGivenName,hasValue:this.hasValue,hasLabel:this.label&&this.classification!=="button",hasValidationErrors:this.hasValidationErrors.bind(this),help:this.help,helpPosition:this.logicalHelpPosition,id:this.id||this.defaultId,ignored:m(this.$options.propsData,"ignored"),isValid:this.isValid,imageBehavior:this.imageBehavior,label:this.label,labelPosition:this.logicalLabelPosition,limit:this.limit===1/0?this.limit:parseInt(this.limit,10),name:this.nameOrFallback,minimum:parseInt(this.minimum,10),performValidation:this.performValidation.bind(this),pseudoProps:this.pseudoProps,preventWindowDrops:this.preventWindowDrops,removePosition:this.mergedRemovePosition,repeatable:this.repeatable,rootEmit:this.$emit.bind(this),rules:this.ruleDetails,setErrors:this.setErrors.bind(this),showValidationErrors:this.showValidationErrors,slotComponents:this.slotComponents,slotProps:this.slotProps,type:this.type,uploadBehavior:this.uploadBehavior,uploadUrl:this.mergedUploadUrl,uploader:this.uploader||this.$formulate.getUploader(),validationErrors:this.validationErrors,value:this.value,visibleValidationErrors:this.visibleValidationErrors,isSubField:this.isSubField,classes:this.classes},this.typeContext))},nameOrFallback:ot,hasGivenName:st,typeContext:Ge,elementAttributes:qe,logicalLabelPosition:We,logicalHelpPosition:Ye,mergedRemovePosition:Je,mergedUploadUrl:Qe,mergedGroupErrors:Xe,hasValue:it,visibleValidationErrors:rt,slotComponents:mt,logicalAddLabel:_e,logicalRemoveLabel:ve,classes:Ke,showValidationErrors:tt,slotProps:ft,pseudoProps:ze,isValid:ut,ruleDetails:et,isVmodeled:nt,mergedValidationName:Ze,explicitErrors:lt,allErrors:ct,hasVisibleErrors:ht,hasErrors:dt,filteredAttributes:He,typeProps:Te,listeners:yt};function _e(){if(this.classification==="file")return this.addLabel===!0?`+ Add ${L(this.type)}`:this.addLabel;if(typeof this.addLabel=="boolean"){const e=this.label||this.name;return`+ ${typeof e=="string"?e+" ":""} Add`}return this.addLabel}function ve(){return typeof this.removeLabel=="boolean"?"Remove":this.removeLabel}function Ge(){switch(this.classification){case"select":return{options:v.call(this,this.options),optionGroups:this.optionGroups?de(this.optionGroups,(e,t)=>v.call(this,t)):!1,placeholder:this.$attrs.placeholder||!1};case"slider":return{showValue:!!this.showValue};default:return this.options?{options:v.call(this,this.options)}:{}}}function ze(){return U(this.localAttributes,q)}function Te(){return U(this.localAttributes,this.$formulate.typeProps(this.type))}function He(){const e=Object.keys(this.pseudoProps).concat(Object.keys(this.typeProps));return Object.keys(this.localAttributes).reduce((t,r)=>(e.includes(w(r))||(t[r]=this.localAttributes[r]),t),{})}function qe(){const e=Object.assign({},this.filteredAttributes);return this.id?e.id=this.id:e.id=this.defaultId,this.hasGivenName&&(e.name=this.name),this.help&&!m(e,"aria-describedby")&&(e["aria-describedby"]=`${e.id}-help`),this.classes.input&&(!Array.isArray(this.classes.input)||this.classes.input.length)&&(e.class=this.classes.input),e}function Ke(){return this.$formulate.classes(g(d(d({},this.$props),this.pseudoProps),{attrs:this.filteredAttributes,classification:this.classification,hasErrors:this.hasVisibleErrors,hasValue:this.hasValue,helpPosition:this.logicalHelpPosition,isValid:this.isValid,labelPosition:this.logicalLabelPosition,type:this.type,value:this.proxy}))}function We(){if(this.labelPosition)return this.labelPosition;switch(this.classification){case"box":return"after";default:return"before"}}function Ye(){if(this.helpPosition)return this.helpPosition;switch(this.classification){case"group":return"before";default:return"after"}}function Je(){return this.type==="group"?this.removePosition||"before":!1}function Ze(){const e=this.$formulate.options.validationNameStrategy||["validationName","name","label","type"];if(Array.isArray(e)){const t=e.find(r=>typeof this[r]=="string");return this[t]}return typeof e=="function"?e.call(this,this):this.type}function Qe(){return this.uploadUrl||this.$formulate.getUploadUrl()}function Xe(){const e=Object.keys(this.groupErrors).concat(Object.keys(this.localGroupErrors)),t=/^(\d+)\.(.*)$/;return Array.from(new Set(e)).filter(r=>t.test(r)).reduce((r,s)=>{let[,i,n]=s.match(t);m(r,i)||(r[i]={});const a=Array.from(new Set(E(this.groupErrors[s]).concat(E(this.localGroupErrors[s]))));return r[i]=Object.assign(r[i],{[n]:a}),r},{})}function et(){return this.parsedValidation.map(([,e,t])=>({ruleName:t,args:e}))}function tt(){return this.showErrors||this.formShouldShowErrors||this.classification==="file"&&this.uploadBehavior==="live"&&oe.call(this)?!0:this.behavioralErrorVisibility}function rt(){return this.showValidationErrors&&this.validationErrors.length?this.validationErrors:[]}function ot(){if(this.name===!0&&this.classification!=="button"){const e=this.id||this.elementAttributes.id.replace(/[^0-9]/g,"");return`${this.type}_${e}`}return this.name===!1||this.classification==="button"&&this.name===!0?!1:this.name}function st(){return typeof this.name!="boolean"}function it(){const e=this.proxy;return this.classification==="box"&&this.isGrouped||this.classification==="select"&&m(this.filteredAttributes,"multiple")?Array.isArray(e)?e.some(t=>t===this.value):this.value===e:!P(e)}function nt(){return!!(this.$options.propsData.hasOwnProperty("formulateValue")&&this._events&&Array.isArray(this._events.input)&&this._events.input.length)}function v(e){return e?(Array.isArray(e)?e:Object.keys(e).map(r=>({label:e[r],value:r}))).map(at.bind(this)):[]}function at(e){return typeof e=="number"&&(e=String(e)),typeof e=="string"?{label:e,value:e,id:`${this.elementAttributes.id}_${e}`}:(typeof e.value=="number"&&(e.value=String(e.value)),Object.assign({value:"",label:"",id:`${this.elementAttributes.id}_${e.value||e.label}`},e))}function lt(){return E(this.errors).concat(this.localErrors).concat(E(this.error))}function ct(){return this.explicitErrors.concat(E(this.validationErrors))}function dt(){return!!this.allErrors.length}function ut(){return!this.hasErrors}function ht(){return Array.isArray(this.validationErrors)&&this.validationErrors.length&&this.showValidationErrors||!!this.explicitErrors.length}function mt(){const e=this.$formulate.slotComponent.bind(this.$formulate);return{addMore:e(this.type,"addMore"),buttonContent:e(this.type,"buttonContent"),errors:e(this.type,"errors"),file:e(this.type,"file"),help:e(this.type,"help"),label:e(this.type,"label"),prefix:e(this.type,"prefix"),remove:e(this.type,"remove"),repeatable:e(this.type,"repeatable"),suffix:e(this.type,"suffix"),uploadAreaMask:e(this.type,"uploadAreaMask")}}function ft(){const e=this.$formulate.slotProps.bind(this.$formulate);return{label:e(this.type,"label",this.typeProps),help:e(this.type,"help",this.typeProps),errors:e(this.type,"errors",this.typeProps),repeatable:e(this.type,"repeatable",this.typeProps),addMore:e(this.type,"addMore",this.typeProps),remove:e(this.type,"remove",this.typeProps),component:e(this.type,"component",this.typeProps)}}function pt(){(this.errorBehavior==="blur"||this.errorBehavior==="value")&&(this.behavioralErrorVisibility=!0),this.$nextTick(()=>this.$emit("blur-context",this.context))}function yt(){const r=this.$listeners,{input:e}=r;return V(r,["input"])}function gt(e){return Object.defineProperty(e,"model",{get:oe.bind(this),set:t=>{if(!this.mntd||!this.debounceDelay)return se.call(this,t);this.dSet(se,[t],this.debounceDelay)},enumerable:!0})}function oe(){const e=this.isVmodeled?"formulateValue":"proxy";return this.type==="checkbox"&&!Array.isArray(this[e])&&this.options?[]:!this[e]&&this[e]!==0?"":this[e]}function se(e){let t=!1;x(e,this.proxy,this.type==="group")||(this.proxy=e,t=!0),!this.context.ignored&&this.context.name&&typeof this.formulateSetter=="function"&&this.formulateSetter(this.context.name,e),t&&this.$emit("input",e)}const bt={name:"FormulateInput",inheritAttrs:!1,provide(){return{formulateRegisterRule:this.registerRule,formulateRemoveRule:this.removeRule}},inject:{formulateSetter:{default:void 0},formulateFieldValidation:{default:()=>()=>({})},formulateRegister:{default:void 0},formulateDeregister:{default:void 0},getFormValues:{default:()=>()=>({})},getGroupValues:{default:void 0},validateDependents:{default:()=>()=>{}},observeErrors:{default:void 0},removeErrorObserver:{default:void 0},isSubField:{default:()=>()=>!1}},model:{prop:"formulateValue",event:"input"},props:{type:{type:String,default:"text"},name:{type:[String,Boolean],default:!0},formulateValue:{default:""},value:{default:!1},options:{type:[Object,Array,Boolean],default:!1},optionGroups:{type:[Object,Boolean],default:!1},id:{type:[String,Boolean,Number],default:!1},label:{type:[String,Boolean],default:!1},labelPosition:{type:[String,Boolean],default:!1},limit:{type:[String,Number],default:1/0,validator:e=>1/0},minimum:{type:[String,Number],default:0,validator:e=>parseInt(e,10)==e},help:{type:[String,Boolean],default:!1},helpPosition:{type:[String,Boolean],default:!1},isGrouped:{type:Boolean,default:!1},errors:{type:[String,Array,Boolean],default:!1},removePosition:{type:[String,Boolean],default:!1},repeatable:{type:Boolean,default:!1},validation:{type:[String,Boolean,Array],default:!1},validationName:{type:[String,Boolean],default:!1},error:{type:[String,Boolean],default:!1},errorBehavior:{type:String,default:"blur",validator:function(e){return["blur","live","submit","value"].includes(e)}},showErrors:{type:Boolean,default:!1},groupErrors:{type:Object,default:()=>({}),validator:e=>{const t=/^\d+\./;return!Object.keys(e).some(r=>!t.test(r))}},imageBehavior:{type:String,default:"preview"},uploadUrl:{type:[String,Boolean],default:!1},uploader:{type:[Function,Object,Boolean],default:!1},uploadBehavior:{type:String,default:"live"},preventWindowDrops:{type:Boolean,default:!0},showValue:{type:[String,Boolean],default:!1},validationMessages:{type:Object,default:()=>({})},validationRules:{type:Object,default:()=>({})},checked:{type:[String,Boolean],default:!1},disableErrors:{type:Boolean,default:!1},addLabel:{type:[Boolean,String],default:!0},removeLabel:{type:[Boolean,String],default:!1},keepModelData:{type:[Boolean,String],default:"inherit"},ignored:{type:[Boolean,String],default:!1},debounce:{type:[Boolean,Number],default:!1},preventDeregister:{type:Boolean,default:!1}},data(){return{defaultId:this.$formulate.nextId(this),localAttributes:{},localErrors:[],localGroupErrors:{},proxy:this.getInitialValue(),behavioralErrorVisibility:this.errorBehavior==="live",formShouldShowErrors:!1,validationErrors:[],pendingValidation:Promise.resolve(),ruleRegistry:[],messageRegistry:{},touched:!1,debounceDelay:this.debounce,dSet:ge(),mntd:!1}},computed:g(d({},Ue),{classification(){const e=this.$formulate.classify(this.type);return e==="box"&&this.options?"group":e},component(){return this.classification==="group"?"FormulateInputGroup":this.$formulate.component(this.type)},parsedValidationRules(){const e={};return Object.keys(this.validationRules).forEach(t=>{e[w(t)]=this.validationRules[t]}),e},parsedValidation(){return M(this.validation,this.$formulate.rules(this.parsedValidationRules))},messages(){const e={};return Object.keys(this.validationMessages).forEach(t=>{e[w(t)]=this.validationMessages[t]}),Object.keys(this.messageRegistry).forEach(t=>{e[w(t)]=this.messageRegistry[t]}),e}}),watch:{$attrs:{handler(e){this.updateLocalAttributes(e)},deep:!0},proxy:{handler:function(e,t){this.performValidation(),!this.isVmodeled&&!x(e,t,this.type==="group")&&(this.context.model=e),this.validateDependents(this),!this.touched&&e&&(this.touched=!0)},deep:!0},formulateValue:{handler:function(e,t){this.isVmodeled&&!x(e,t,this.type==="group")&&(this.context.model=e)},deep:!0},showValidationErrors:{handler(e){this.$emit("error-visibility",e)},immediate:!0},validation:{handler(){this.performValidation()},deep:!0},touched(e){this.errorBehavior==="value"&&e&&(this.behavioralErrorVisibility=e)},debounce(e){this.debounceDelay=e}},created(){this.applyInitialValue(),this.formulateRegister&&typeof this.formulateRegister=="function"&&this.formulateRegister(this.nameOrFallback,this),this.applyDefaultValue(),!this.disableErrors&&typeof this.observeErrors=="function"&&(this.observeErrors({callback:this.setErrors,type:"input",field:this.nameOrFallback}),this.type==="group"&&this.observeErrors({callback:this.setGroupErrors,type:"group",field:this.nameOrFallback})),this.updateLocalAttributes(this.$attrs),this.performValidation(),this.hasValue&&(this.touched=!0)},mounted(){this.mntd=!0},beforeDestroy(){!this.disableErrors&&typeof this.removeErrorObserver=="function"&&(this.removeErrorObserver(this.setErrors),this.type==="group"&&this.removeErrorObserver(this.setGroupErrors)),typeof this.formulateDeregister=="function"&&!this.preventDeregister&&this.formulateDeregister(this.nameOrFallback)},methods:{getInitialValue(){var e=this.$formulate.classify(this.type);return e=e==="box"&&this.options?"group":e,e==="box"&&this.checked?this.value||!0:m(this.$options.propsData,"value")&&e!=="box"?this.value:m(this.$options.propsData,"formulateValue")?this.formulateValue:e==="group"?Object.defineProperty(this.type==="group"?[{}]:[],"__init",{value:!0}):""},applyInitialValue(){!x(this.context.model,this.proxy)&&(this.classification!=="box"||m(this.$options.propsData,"options"))&&(this.context.model=this.proxy,this.$emit("input",this.proxy))},applyDefaultValue(){this.type==="select"&&!this.context.placeholder&&P(this.proxy)&&!this.isVmodeled&&this.value===!1&&this.context.options.length&&(m(this.$attrs,"multiple")?this.context.model=[]:this.context.model=this.context.options[0].value)},updateLocalAttributes(e){x(e,this.localAttributes)||(this.localAttributes=e)},performValidation(){let e=M(this.validation,this.$formulate.rules(this.parsedValidationRules));return e=this.ruleRegistry.length?this.ruleRegistry.concat(e):e,this.pendingValidation=this.runRules(e).then(t=>this.didValidate(t)),this.pendingValidation},runRules(e){const t=([r,s,i,n])=>{var a=r({value:this.context.model,getFormValues:(...l)=>this.getFormValues(this,...l),getGroupValues:(...l)=>this[`get${this.getGroupValues?"Group":"Form"}Values`](this,...l),name:this.context.name},...s);return a=a instanceof Promise?a:Promise.resolve(a),a.then(l=>l?!1:this.getMessage(i,s))};return new Promise(r=>{const s=(i,n=[])=>{const a=i.shift();Array.isArray(a)&&a.length?Promise.all(a.map(t)).then(l=>l.filter(c=>!!c)).then(l=>(l=Array.isArray(l)?l:[],(!l.length||!a.bail)&&i.length?s(i,n.concat(l)):r(n.concat(l).filter(c=>!P(c))))):r([])};s(he(e))})},didValidate(e){const t=!x(e,this.validationErrors);if(this.validationErrors=e,t){const r=this.getErrorObject();this.$emit("validation",r),this.formulateFieldValidation&&typeof this.formulateFieldValidation=="function"&&this.formulateFieldValidation(r)}},getMessage(e,t){return this.getMessageFunc(e)({args:t,name:this.mergedValidationName,value:this.context.model,vm:this,formValues:this.getFormValues(this),getFormValues:(...r)=>this.getFormValues(this,...r),getGroupValues:(...r)=>this[`get${this.getGroupValues?"Group":"Form"}Values`](this,...r)})},getMessageFunc(e){if(e=w(e),e==="optional")return()=>[];if(this.messages&&typeof this.messages[e]!="undefined")switch(typeof this.messages[e]){case"function":return this.messages[e];case"string":case"boolean":return()=>this.messages[e]}return t=>this.$formulate.validationMessage(e,t,this)},hasValidationErrors(){return new Promise(e=>{this.$nextTick(()=>{this.pendingValidation.then(()=>e(!!this.validationErrors.length))})})},getValidationErrors(){return new Promise(e=>{this.$nextTick(()=>this.pendingValidation.then(()=>e(this.getErrorObject())))})},getErrorObject(){return{name:this.context.nameOrFallback||this.context.name,errors:this.validationErrors.filter(e=>typeof e=="string"),hasErrors:!!this.validationErrors.length}},setErrors(e){this.localErrors=E(e)},setGroupErrors(e){this.localGroupErrors=e},registerRule(e,t,r,s=null){this.ruleRegistry.some(i=>i[2]===r)||(this.ruleRegistry.push([e,t,r]),s!==null&&(this.messageRegistry[r]=s))},removeRule(e){const t=this.ruleRegistry.findIndex(r=>r[2]===e);t>=0&&(this.ruleRegistry.splice(t,1),delete this.messageRegistry[e])}}},xt=["data-classification","data-has-errors","data-is-showing-errors","data-has-value","data-type"];function Et(e,t,r,s,i,n){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.outer),"data-classification":n.classification,"data-has-errors":e.hasErrors,"data-is-showing-errors":e.hasVisibleErrors,"data-has-value":e.hasValue,"data-type":r.type},[o.createElementVNode("div",{class:o.normalizeClass(e.context.classes.wrapper)},[e.context.labelPosition==="before"?o.renderSlot(e.$slots,"label",o.normalizeProps(o.mergeProps({key:0},e.context)),()=>[e.context.hasLabel?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.label),o.mergeProps({key:0},e.context.slotProps.label,{context:e.context}),null,16,["context"])):o.createCommentVNode("",!0)]):o.createCommentVNode("",!0),e.context.helpPosition==="before"?o.renderSlot(e.$slots,"help",o.normalizeProps(o.mergeProps({key:1},e.context)),()=>[e.context.help?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.help),o.mergeProps({key:0},e.context.slotProps.help,{context:e.context}),null,16,["context"])):o.createCommentVNode("",!0)]):o.createCommentVNode("",!0),o.renderSlot(e.$slots,"element",o.normalizeProps(o.guardReactiveProps(e.context)),()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.component),o.mergeProps({context:e.context},e.context.slotProps.component,o.toHandlers(e.listeners)),{default:o.withCtx(()=>[o.renderSlot(e.$slots,"default",o.normalizeProps(o.guardReactiveProps(e.context)))]),_:3},16,["context"]))]),e.context.labelPosition==="after"?o.renderSlot(e.$slots,"label",o.normalizeProps(o.mergeProps({key:2},e.context)),()=>[e.context.hasLabel?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.label),o.mergeProps({key:0,context:e.context},e.context.slotProps.label),null,16,["context"])):o.createCommentVNode("",!0)]):o.createCommentVNode("",!0)],2),e.context.helpPosition==="after"?o.renderSlot(e.$slots,"help",o.normalizeProps(o.mergeProps({key:0},e.context)),()=>[e.context.help?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.help),o.mergeProps({key:0,context:e.context},e.context.slotProps.help),null,16,["context"])):o.createCommentVNode("",!0)]):o.createCommentVNode("",!0),o.renderSlot(e.$slots,"errors",o.normalizeProps(o.guardReactiveProps(e.context)),()=>[e.context.disableErrors?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.errors),o.mergeProps({key:0,type:e.context.slotComponents.errors==="FormulateErrors"?"input":!1,context:e.context},e.context.slotProps.errors),null,16,["type","context"]))])],10,xt)}const Ct=f(bt,[["render",Et]]),kt={inject:{observeErrors:{default:!1},removeErrorObserver:{default:!1},observeContext:{default:!1},removeContextObserver:{default:!1}},props:{context:{type:Object,default:()=>({})},type:{type:String,default:"form"}},data(){return{boundSetErrors:this.setErrors.bind(this),boundSetFormContext:this.setFormContext.bind(this),localErrors:[],formContext:{classes:{formErrors:"formulate-form-errors",formError:"formulate-form-error"}}}},computed:{visibleValidationErrors(){return Array.isArray(this.context.visibleValidationErrors)?this.context.visibleValidationErrors:[]},errors(){return Array.isArray(this.context.errors)?this.context.errors:[]},mergedErrors(){return this.errors.concat(this.localErrors)},visibleErrors(){return Array.from(new Set(this.mergedErrors.concat(this.visibleValidationErrors))).filter(e=>typeof e=="string")},outerClass(){return this.type==="input"&&this.context.classes?this.context.classes.errors:this.formContext.classes.formErrors},itemClass(){return this.type==="input"&&this.context.classes?this.context.classes.error:this.formContext.classes.formError},role(){return this.type==="form"?"alert":"status"},ariaLive(){return this.type==="form"?"assertive":"polite"},slotComponent(){return this.$formulate.slotComponent(null,"errorList")}},created(){this.type==="form"&&typeof this.observeErrors=="function"&&(Array.isArray(this.context.errors)||this.observeErrors({callback:this.boundSetErrors,type:"form"}),this.observeContext(this.boundSetFormContext))},destroyed(){this.type==="form"&&typeof this.removeErrorObserver=="function"&&(Array.isArray(this.context.errors)||this.removeErrorObserver(this.boundSetErrors),this.removeContextObserver(this.boundSetFormContext))},methods:{setErrors(e){this.localErrors=E(e)},setFormContext(e){this.formContext=e}}};function Vt(e,t,r,s,i,n){return o.openBlock(),o.createBlock(o.resolveDynamicComponent(n.slotComponent),{"visible-errors":n.visibleErrors,"item-class":n.itemClass,"outer-class":n.outerClass,role:n.role,"aria-live":n.ariaLive,type:r.type},null,8,["visible-errors","item-class","outer-class","role","aria-live","type"])}const Ft=f(kt,[["render",Vt]]),wt={props:{context:{type:Object,required:!0}}},Pt=["id","textContent"];function Bt(e,t,r,s,i,n){return r.context.help?(o.openBlock(),o.createElementBlock("div",{key:0,id:`${r.context.id}-help`,class:o.normalizeClass(r.context.classes.help),textContent:o.toDisplayString(r.context.help)},null,10,Pt)):o.createCommentVNode("",!0)}const At=f(wt,[["render",Bt]]),St={props:{file:{type:Object,required:!0},imagePreview:{type:Boolean,default:!1},context:{type:Object,required:!0}}},Ot=["src"],$t=["title","textContent"],Dt=["data-just-finished","data-is-finished"];function Nt(e,t,r,s,i,n){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(r.context.classes.file)},[r.imagePreview&&r.file.previewData?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(r.context.classes.fileImagePreview)},[o.createElementVNode("img",{src:r.file.previewData,class:o.normalizeClass(r.context.classes.fileImagePreviewImage)},null,10,Ot)],2)):o.createCommentVNode("",!0),o.createElementVNode("div",{class:o.normalizeClass(r.context.classes.fileName),title:r.file.name,textContent:o.toDisplayString(r.file.name)},null,10,$t),r.file.progress!==!1?(o.openBlock(),o.createElementBlock("div",{key:1,"data-just-finished":r.file.justFinished,"data-is-finished":!r.file.justFinished&&r.file.complete,class:o.normalizeClass(r.context.classes.fileProgress)},[o.createElementVNode("div",{class:o.normalizeClass(r.context.classes.fileProgressInner),style:o.normalizeStyle({width:r.file.progress+"%"})},null,6)],10,Dt)):o.createCommentVNode("",!0),r.file.complete&&!r.file.justFinished||r.file.progress===!1?(o.openBlock(),o.createElementBlock("div",{key:2,class:o.normalizeClass(r.context.classes.fileRemove),onClick:t[0]||(t[0]=(...a)=>r.file.removeFile&&r.file.removeFile(...a))},null,2)):o.createCommentVNode("",!0)],2)}const jt=f(St,[["render",Nt]]),It={name:"FormulateGrouping",props:{context:{type:Object,required:!0}},provide(){return{isSubField:()=>!0,registerProvider:this.registerProvider,deregisterProvider:this.deregisterProvider}},data(){return{providers:[],keys:[]}},inject:["formulateRegisterRule","formulateRemoveRule"],computed:{items(){return Array.isArray(this.context.model)?!this.context.repeatable&&this.context.model.length===0?[this.setId({},0)]:this.context.model.length<this.context.minimum?new Array(this.context.minimum||1).fill("").map((e,t)=>this.setId(this.context.model[t]||{},t)):this.context.model.map((e,t)=>this.setId(e,t)):new Array(this.context.minimum||1).fill("").map((e,t)=>this.setId({},t))},formShouldShowErrors(){return this.context.formShouldShowErrors},groupErrors(){return this.items.map((e,t)=>m(this.context.groupErrors,t)?this.context.groupErrors[t]:{})}},watch:{providers(){this.formShouldShowErrors&&this.showErrors()},formShouldShowErrors(e){e&&this.showErrors()},items:{handler(e,t){x(e,t,!0)||(this.keys=e.map(r=>r.__id))},immediate:!0}},created(){this.formulateRegisterRule(this.validateGroup.bind(this),[],"formulateGrouping",!0)},destroyed(){this.formulateRemoveRule("formulateGrouping")},methods:{validateGroup(){return Promise.all(this.providers.reduce((e,t)=>(t&&typeof t.hasValidationErrors=="function"&&e.push(t.hasValidationErrors()),e),[])).then(e=>!e.some(t=>!!t))},showErrors(){this.providers.forEach(e=>e&&typeof e.showErrors=="function"&&e.showErrors())},setItem(e,t){Array.isArray(this.context.model)&&this.context.model.length>=this.context.minimum&&!this.context.model.__init?this.context.model.splice(e,1,this.setId(t,e)):this.context.model=this.items.map((r,s)=>s===e?this.setId(t,e):r)},removeItem(e){Array.isArray(this.context.model)&&this.context.model.length>this.context.minimum?(this.context.model=this.context.model.filter((t,r)=>r===e?!1:t),this.context.rootEmit("repeatableRemoved",this.context.model)):!Array.isArray(this.context.model)&&this.items.length>this.context.minimum&&(this.context.model=new Array(this.items.length-1).fill("").map((t,r)=>this.setId({},r)),this.context.rootEmit("repeatableRemoved",this.context.model))},registerProvider(e){this.providers.some(t=>t===e)||this.providers.push(e)},deregisterProvider(e){this.providers=this.providers.filter(t=>t!==e)},setId(e,t){return e.__id?e:S(e,this.keys[t])}}};function Rt(e,t,r,s,i,n){const a=o.resolveComponent("FormulateRepeatableProvider"),l=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createBlock(l,{name:"grouping",class:o.normalizeClass(r.context.classes.grouping),context:r.context,"force-wrap":r.context.repeatable},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(n.items,(c,h)=>(o.openBlock(),o.createBlock(a,{key:c.__id,index:h,context:r.context,uuid:c.__id,errors:n.groupErrors[h],onRemove:n.removeItem,onInput:b=>n.setItem(h,b)},{default:o.withCtx(()=>[o.renderSlot(e.$slots,"default")]),_:2},1032,["index","context","uuid","errors","onRemove","onInput"]))),128))]),_:3},8,["class","context","force-wrap"])}const Lt=f(It,[["render",Rt]]),Mt={props:{context:{type:Object,required:!0}}},Ut=["id","for","textContent"];function _t(e,t,r,s,i,n){return o.openBlock(),o.createElementBlock("label",{id:`${r.context.id}_label`,class:o.normalizeClass(r.context.classes.label),for:r.context.id,textContent:o.toDisplayString(r.context.label)},null,10,Ut)}const vt=f(Mt,[["render",_t]]),Gt={props:{context:{type:Object,required:!0},addMore:{type:Function,required:!0}}};function zt(e,t,r,s,i,n){const a=o.resolveComponent("FormulateInput");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(r.context.classes.groupAddMore)},[o.createVNode(a,{type:"button",label:r.context.addLabel,"data-minor":"","data-ghost":"",onClick:r.addMore},null,8,["label","onClick"])],2)}const Tt=f(Gt,[["render",zt]]),A={props:{context:{type:Object,required:!0}},computed:{type(){return this.context.type},attributes(){return this.context.attributes||{}},hasValue(){return this.context.hasValue}}},Ht={name:"FormulateInputBox",mixins:[A],computed:{usesDecorator(){return this.$formulate.options.useInputDecorators}}},qt=["data-type"],Kt=["value"],Wt=["value"];function Yt(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":e.context.type},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),e.type==="radio"?o.withDirectives((o.openBlock(),o.createElementBlock("input",o.mergeProps({key:0,"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l),type:"radio",value:e.context.value},e.attributes,o.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16,Kt)),[[o.vModelRadio,e.context.model]]):o.withDirectives((o.openBlock(),o.createElementBlock("input",o.mergeProps({key:1,"onUpdate:modelValue":t[2]||(t[2]=l=>e.context.model=l),type:"checkbox",value:e.context.value},e.attributes,o.toHandlers(e.$listeners,!0),{onBlur:t[3]||(t[3]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16,Wt)),[[o.vModelCheckbox,e.context.model]]),n.usesDecorator?(o.openBlock(),o.createBlock(o.resolveDynamicComponent("label"),{key:2,class:o.normalizeClass(e.context.classes.decorator),for:e.attributes.id},null,8,["class","for"])):o.createCommentVNode("",!0),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,qt)}const Jt=f(Ht,[["render",Yt]]),Zt={props:{visibleErrors:{type:Array,required:!0},itemClass:{type:[String,Array,Object,Boolean],default:!1},outerClass:{type:[String,Array,Object,Boolean],default:!1},role:{type:[String],default:"status"},ariaLive:{type:[String,Boolean],default:"polite"},type:{type:String,required:!0}}},Qt=["role","aria-live","textContent"];function Xt(e,t,r,s,i,n){return r.visibleErrors.length?(o.openBlock(),o.createElementBlock("ul",{key:0,class:o.normalizeClass(r.outerClass)},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(r.visibleErrors,a=>(o.openBlock(),o.createElementBlock("li",{key:a,class:o.normalizeClass(r.itemClass),role:r.role,"aria-live":r.ariaLive,textContent:o.toDisplayString(a)},null,10,Qt))),128))],2)):o.createCommentVNode("",!0)}const er=f(Zt,[["render",Xt]]),tr={name:"FormulateInputText",mixins:[A]},rr=["data-type"],or=["type"];function sr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":e.context.type},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),o.withDirectives(o.createElementVNode("input",o.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l),type:e.type},e.attributes,{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))},o.toHandlers(e.$listeners,!0)),null,16,or),[[o.vModelDynamic,e.context.model]]),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,rr)}const ir=f(tr,[["render",sr]]),nr={name:"FormulateFiles",props:{files:{type:B,required:!0},imagePreview:{type:Boolean,default:!1},context:{type:Object,required:!0}},computed:{fileUploads(){return this.files.files||[]},isMultiple(){return m(this.context.attributes,"multiple")}},watch:{files(){this.imagePreview&&this.files.loadPreviews()}},mounted(){this.imagePreview&&this.files.loadPreviews()},methods:{appendFiles(){const e=this.$refs.addFiles;e.files.length&&this.files.mergeFileList(e)}}},ar=["data-has-error","data-has-preview"],lr=["textContent"];function cr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return n.fileUploads.length?(o.openBlock(),o.createElementBlock("ul",{key:0,class:o.normalizeClass(r.context.classes.files)},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(n.fileUploads,l=>(o.openBlock(),o.createElementBlock("li",{key:l.uuid,"data-has-error":!!l.error,"data-has-preview":!!(r.imagePreview&&l.previewData)},[o.createVNode(a,{name:"file",context:r.context,file:l,"image-preview":r.imagePreview},{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.context.slotComponents.file),{context:r.context,file:l,"image-preview":r.imagePreview},null,8,["context","file","image-preview"]))]),_:2},1032,["context","file","image-preview"]),l.error?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(r.context.classes.fileUploadError),textContent:o.toDisplayString(l.error)},null,10,lr)):o.createCommentVNode("",!0)],8,ar))),128)),n.isMultiple&&r.context.addLabel?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(r.context.classes.fileAdd),role:"button"},[o.createTextVNode(o.toDisplayString(r.context.addLabel)+" ",1),o.createElementVNode("input",{ref:"addFiles",type:"file",multiple:"",class:o.normalizeClass(r.context.classes.fileAddInput),onChange:t[0]||(t[0]=(...l)=>n.appendFiles&&n.appendFiles(...l))},null,34)],2)):o.createCommentVNode("",!0)],2)):o.createCommentVNode("",!0)}const dr={name:"FormulateInputFile",components:{FormulateFiles:f(nr,[["render",cr]])},mixins:[A],data(){return{isOver:!1}},computed:{hasFiles(){return!!(this.context.model instanceof B&&this.context.model.files.length)}},created(){Array.isArray(this.context.model)&&typeof this.context.model[0][this.$formulate.getFileUrlKey()]=="string"&&(this.context.model=this.$formulate.createUpload({files:this.context.model},this.context))},mounted(){window&&this.context.preventWindowDrops&&(window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.preventDefault))},destroyed(){window&&this.context.preventWindowDrops&&(window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.preventDefault))},methods:{preventDefault(e){e.target.tagName!=="INPUT"&&e.target.getAttribute("type")!=="file"&&(e=e||event,e.preventDefault())},handleFile(){this.isOver=!1;const e=this.$refs.file;e.files.length&&(this.context.model=this.$formulate.createUpload(e,this.context),this.$nextTick(()=>this.attemptImmediateUpload()))},attemptImmediateUpload(){this.context.uploadBehavior==="live"&&this.context.model instanceof B&&this.context.hasValidationErrors().then(e=>{e||this.context.model.upload()})},handleDragOver(e){e.preventDefault(),this.isOver=!0},handleDragLeave(e){e.preventDefault(),this.isOver=!1}}},ur=["data-type","data-has-files"],hr=["data-has-files"],mr=["data-is-drag-hover"];function fr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot"),l=o.resolveComponent("FormulateFiles");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":e.context.type,"data-has-files":n.hasFiles},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),o.createElementVNode("div",{class:o.normalizeClass(e.context.classes.uploadArea),"data-has-files":n.hasFiles},[o.createElementVNode("input",o.mergeProps({ref:"file","data-is-drag-hover":i.isOver,type:"file"},e.attributes,o.toHandlers(e.$listeners,!0),{onBlur:t[0]||(t[0]=(...c)=>e.context.blurHandler&&e.context.blurHandler(...c)),onChange:t[1]||(t[1]=(...c)=>n.handleFile&&n.handleFile(...c)),onDragover:t[2]||(t[2]=(...c)=>n.handleDragOver&&n.handleDragOver(...c)),onDragleave:t[3]||(t[3]=(...c)=>n.handleDragLeave&&n.handleDragLeave(...c))}),null,16,mr),o.createVNode(a,{name:"uploadAreaMask",context:e.context,"has-files":n.hasFiles},{default:o.withCtx(()=>[o.withDirectives((o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.uploadAreaMask),{"has-files":e.context.slotComponents.uploadAreaMask==="div"?!1:n.hasFiles,"data-has-files":e.context.slotComponents.uploadAreaMask==="div"?n.hasFiles:!1,class:o.normalizeClass(e.context.classes.uploadAreaMask)},null,8,["has-files","data-has-files","class"])),[[o.vShow,!n.hasFiles]])]),_:1},8,["context","has-files"]),n.hasFiles?(o.openBlock(),o.createBlock(l,{key:0,files:e.context.model,"image-preview":e.context.type==="image"&&e.context.imageBehavior==="preview",context:e.context},null,8,["files","image-preview","context"])):o.createCommentVNode("",!0)],10,hr),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,ur)}const pr=f(dr,[["render",fr]]),yr={props:{context:{type:Object,required:!0},removeItem:{type:Function,required:!0},index:{type:Number,required:!0}}};function gr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(r.context.classes.groupRepeatable)},[r.context.removePosition==="after"?o.renderSlot(e.$slots,"default",{key:0}):o.createCommentVNode("",!0),o.createVNode(a,{name:"remove",context:r.context,index:r.index,"remove-item":r.removeItem},{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.context.slotComponents.remove),o.mergeProps({context:r.context,index:r.index,"remove-item":r.removeItem},r.context.slotProps.remove),null,16,["context","index","remove-item"]))]),_:1},8,["context","index","remove-item"]),r.context.removePosition==="before"?o.renderSlot(e.$slots,"default",{key:1}):o.createCommentVNode("",!0)],2)}const br=f(yr,[["render",gr]]),xr={name:"FormulateInputGroup",props:{context:{type:Object,required:!0}},computed:{options(){return this.context.options||[]},subType(){return this.context.type==="group"?"grouping":"inputs"},optionsWithContext(){const Co=this.context,{attributes:io}=Co,ie=io,{id:e}=ie,t=V(ie,["id"]),ne=Co,{blurHandler:r,classification:s,component:i,getValidationErrors:n,hasLabel:a,hasValidationErrors:l,isSubField:c,isValid:h,labelPosition:b,options:k,performValidation:$,setErrors:G,slotComponents:D,slotProps:F,validationErrors:j,visibleValidationErrors:mo,classes:fo,showValidationErrors:po,rootEmit:yo,help:go,pseudoProps:bo,rules:xo,model:Eo}=ne,so=V(ne,["attributes","blurHandler","classification","component","getValidationErrors","hasLabel","hasValidationErrors","isSubField","isValid","labelPosition","options","performValidation","setErrors","slotComponents","slotProps","validationErrors","visibleValidationErrors","classes","showValidationErrors","rootEmit","help","pseudoProps","rules","model"]);return this.options.map(no=>this.groupItemContext(so,no,t))},totalItems(){return Array.isArray(this.context.model)&&this.context.model.length>this.context.minimum?this.context.model.length:this.context.minimum||1},canAddMore(){return this.context.repeatable&&this.totalItems<this.context.limit},labelledBy(){return this.context.label&&`${this.context.id}_label`}},methods:{addItem(){if(Array.isArray(this.context.model)){const e=this.context.minimum-this.context.model.length+1,t=Math.max(e,1);for(let r=0;r<t;r++)this.context.model.push(S({}))}else this.context.model=new Array(this.totalItems+1).fill("").map(()=>S({}));this.context.rootEmit("repeatableAdded",this.context.model)},groupItemContext(e,t,r){return Object.assign({},e,t,r,{isGrouped:!0},e.hasGivenName?{}:{name:!0})}}},Er=["data-is-repeatable","aria-labelledby"];function Cr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot"),l=o.resolveComponent("FormulateInput"),c=o.resolveComponent("FormulateGrouping");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(r.context.classes.element),"data-is-repeatable":r.context.repeatable,role:"group","aria-labelledby":n.labelledBy},[o.createVNode(a,{name:"prefix",context:r.context},{default:o.withCtx(()=>[r.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.context.slotComponents.prefix),{key:0,context:r.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),n.subType!=="grouping"?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(n.optionsWithContext,h=>(o.openBlock(),o.createBlock(l,o.mergeProps({key:h.id,modelValue:r.context.model,"onUpdate:modelValue":t[0]||(t[0]=b=>r.context.model=b),ref_for:!0},h,{"disable-errors":!0,"prevent-deregister":!0,class:"formulate-input-group-item",onBlur:r.context.blurHandler}),null,16,["modelValue","onBlur"]))),128)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[o.createVNode(c,{context:r.context},{default:o.withCtx(()=>[o.renderSlot(e.$slots,"default")]),_:3},8,["context"]),n.canAddMore?(o.openBlock(),o.createBlock(a,{key:0,name:"addmore",context:r.context,"add-more":n.addItem},{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.context.slotComponents.addMore),o.mergeProps({context:r.context,"add-more":n.addItem},r.context.slotProps.addMore,{onAdd:n.addItem}),null,16,["context","add-more","onAdd"]))]),_:1},8,["context","add-more"])):o.createCommentVNode("",!0)],64)),o.createVNode(a,{name:"suffix",context:r.context},{default:o.withCtx(()=>[r.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.context.slotComponents.suffix),{key:0,context:r.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,Er)}const kr=f(xr,[["render",Cr]]),Vr={name:"FormulateInputButton",mixins:[A]},Fr=["data-type"],wr=["type"];function Pr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":e.context.type},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),o.createElementVNode("button",o.mergeProps({type:e.type},e.attributes,o.toHandlers(e.$listeners,!0)),[o.renderSlot(e.$slots,"default",{context:e.context},()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.buttonContent),{context:e.context},null,8,["context"]))])],16,wr),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,Fr)}const Br=f(Vr,[["render",Pr]]),Ar={name:"FormulateInputSelect",mixins:[A],computed:{options(){return this.context.options||{}},optionGroups(){return this.context.optionGroups||!1},placeholderSelected(){return!!(!this.hasValue&&this.context.attributes&&this.context.attributes.placeholder)}}},Sr=["data-type","data-multiple"],Or=["data-placeholder-selected"],$r=["selected"],Dr=["value","disabled","textContent"],Nr=["label"],jr=["value","disabled","textContent"];function Ir(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":e.context.type,"data-multiple":e.attributes&&e.attributes.multiple!==void 0},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),o.withDirectives(o.createElementVNode("select",o.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l)},e.attributes,{"data-placeholder-selected":n.placeholderSelected},o.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),[e.context.placeholder?(o.openBlock(),o.createElementBlock("option",{key:0,value:"",hidden:"hidden",disabled:"",selected:!e.hasValue},o.toDisplayString(e.context.placeholder),9,$r)):o.createCommentVNode("",!0),n.optionGroups?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:2},o.renderList(n.optionGroups,(l,c)=>(o.openBlock(),o.createElementBlock("optgroup",{key:c,label:c},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(l,h=>(o.openBlock(),o.createElementBlock("option",o.mergeProps({key:h.id,value:h.value,disabled:!!h.disabled,ref_for:!0},h.attributes||h.attrs||{},{textContent:o.toDisplayString(h.label)}),null,16,jr))),128))],8,Nr))),128)):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(n.options,l=>(o.openBlock(),o.createElementBlock("option",o.mergeProps({key:l.id,value:l.value,disabled:!!l.disabled,ref_for:!0},l.attributes||l.attrs||{},{textContent:o.toDisplayString(l.label)}),null,16,Dr))),128))],16,Or),[[o.vModelSelect,e.context.model]]),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,Sr)}const Rr=f(Ar,[["render",Ir]]),Lr={name:"FormulateInputSlider",mixins:[A]},Mr=["data-type"],Ur=["type"],_r=["textContent"];function vr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":e.context.type},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),o.withDirectives(o.createElementVNode("input",o.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l),type:e.type},e.attributes,o.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16,Ur),[[o.vModelDynamic,e.context.model]]),e.context.showValue?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(e.context.classes.rangeValue),textContent:o.toDisplayString(e.context.model)},null,10,_r)):o.createCommentVNode("",!0),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],10,Mr)}const Gr=f(Lr,[["render",vr]]),zr={props:{context:{type:Object,required:!0}}},Tr=["textContent"];function Hr(e,t,r,s,i,n){return o.openBlock(),o.createElementBlock("span",{class:o.normalizeClass(`formulate-input-element--${r.context.type}--label`),textContent:o.toDisplayString(r.context.value||r.context.label||r.context.name||"Submit")},null,10,Tr)}const qr=f(zr,[["render",Hr]]),Kr={name:"FormulateInputTextArea",mixins:[A]};function Wr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.context.classes.element),"data-type":"textarea"},[o.createVNode(a,{name:"prefix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.prefix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"]),o.withDirectives(o.createElementVNode("textarea",o.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l)},e.attributes,o.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16),[[o.vModelText,e.context.model]]),o.createVNode(a,{name:"suffix",context:e.context},{default:o.withCtx(()=>[e.context.slotComponents.suffix?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):o.createCommentVNode("",!0)]),_:1},8,["context"])],2)}const Yr=f(Kr,[["render",Wr]]),Jr={provide(){return g(d({},ee(this,["getFormValues"])),{formulateSetter:(e,t)=>this.setGroupValue(e,t)})},inject:{registerProvider:"registerProvider",deregisterProvider:"deregisterProvider"},props:{index:{type:Number,required:!0},context:{type:Object,required:!0},uuid:{type:String,required:!0},errors:{type:Object,required:!0}},data(){return g(d({},J(this)),{isGrouping:!0})},computed:g(d({},Z()),{mergedFieldErrors(){return this.errors}}),watch:g(d({},X()),{"context.model":{handler(e){x(e[this.index],this.proxy,!0)||this.setValues(e[this.index])},deep:!0}}),created(){this.applyInitialValues(),this.registerProvider(this)},beforeDestroy(){this.preventCleanup=!0,this.deregisterProvider(this)},methods:g(d({},Q()),{setGroupValue(e,t){x(this.proxy[e],t,!0)||this.setFieldValue(e,t)},removeItem(){this.$emit("remove",this.index)}})};function Zr(e,t,r,s,i,n){const a=o.resolveComponent("FormulateSlot");return o.openBlock(),o.createBlock(a,{name:"repeatable",context:r.context,index:r.index,"remove-item":n.removeItem},{default:o.withCtx(()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(r.context.slotComponents.repeatable),o.mergeProps({context:r.context,index:r.index,"remove-item":n.removeItem},r.context.slotProps.repeatable),{default:o.withCtx(()=>[o.createVNode(a,{context:r.context,index:r.index,name:"default"},null,8,["context","index"])]),_:1},16,["context","index","remove-item"]))]),_:1},8,["context","index","remove-item"])}const Qr=f(Jr,[["render",Zr]]),Xr={props:{index:{type:Number,default:null},context:{type:Object,required:!0},removeItem:{type:Function,required:!0}}},eo=["data-disabled","textContent"];function to(e,t,r,s,i,n){return r.context.repeatable?(o.openBlock(),o.createElementBlock("a",{key:0,class:o.normalizeClass(r.context.classes.groupRepeatableRemove),"data-disabled":r.context.model.length<=r.context.minimum,role:"button",onClick:t[0]||(t[0]=o.withModifiers((...a)=>r.removeItem&&r.removeItem(...a),["prevent"])),onKeypress:t[1]||(t[1]=o.withKeys((...a)=>r.removeItem&&r.removeItem(...a),["enter"])),textContent:o.toDisplayString(r.context.removeLabel)},null,42,eo)):o.createCommentVNode("",!0)}const ro=f(Xr,[["render",to]]);class oo{constructor(){this.options={},this.defaults={components:{FormulateSlot:$e,FormulateForm:Me,FormulateFile:jt,FormulateHelp:At,FormulateLabel:vt,FormulateInput:Ct,FormulateErrors:Ft,FormulateSchema:je,FormulateAddMore:Tt,FormulateGrouping:Lt,FormulateInputBox:Jt,FormulateInputText:ir,FormulateInputFile:pr,FormulateErrorList:er,FormulateRepeatable:br,FormulateInputGroup:kr,FormulateInputButton:Br,FormulateInputSelect:Rr,FormulateInputSlider:Gr,FormulateButtonContent:qr,FormulateInputTextArea:Yr,FormulateRepeatableRemove:ro,FormulateRepeatableProvider:Qr},slotComponents:{addMore:"FormulateAddMore",buttonContent:"FormulateButtonContent",errorList:"FormulateErrorList",errors:"FormulateErrors",file:"FormulateFile",help:"FormulateHelp",label:"FormulateLabel",prefix:!1,remove:"FormulateRepeatableRemove",repeatable:"FormulateRepeatable",suffix:!1,uploadAreaMask:"div"},slotProps:{},library:C,rules:ke,mimes:Ve,locale:!1,uploader:Oe,uploadUrl:!1,fileUrlKey:"url",uploadJustCompleteDuration:1e3,errorHandler:t=>t,plugins:[Se],locales:{},failedValidation:()=>!1,idPrefix:"formulate-",baseClasses:t=>t,coreClasses:Be,classes:{},useInputDecorators:!0,validationNameStrategy:!1},this.registry=new Map,this.idRegistry={}}install(t,r){t.prototype.$formulate=this,this.options=this.defaults;var s=this.defaults.plugins;r&&Array.isArray(r.plugins)&&r.plugins.length&&(s=s.concat(r.plugins)),s.forEach(n=>typeof n=="function"?n(this):null),this.extend(r||{});for(var i in this.options.components)t.component(i,this.options.components[i])}nextId(t){const s=(t.$route&&t.$route.path?t.$route.path:!1)?t.$route.path.replace(/[/\\.\s]/g,"-"):"global";return Object.prototype.hasOwnProperty.call(this.idRegistry,s)||(this.idRegistry[s]=0),`${this.options.idPrefix}${s}-${++this.idRegistry[s]}`}extend(t){if(typeof t=="object")return this.options=this.merge(this.options,t),this;throw new Error(`Formulate.extend expects an object, was ${typeof t}`)}merge(t,r,s=!0){var i={};for(var n in t)r.hasOwnProperty(n)?W(r[n])&&W(t[n])?i[n]=this.merge(t[n],r[n],s):s&&Array.isArray(t[n])&&Array.isArray(r[n])?i[n]=t[n].concat(r[n]):i[n]=r[n]:i[n]=t[n];for(var a in r)i.hasOwnProperty(a)||(i[a]=r[a]);return i}classify(t){return this.options.library.hasOwnProperty(t)?this.options.library[t].classification:"unknown"}classes(t){const r=this.options.coreClasses(t),s=this.options.baseClasses(r,t);return Object.keys(s).reduce((i,n)=>{let a=N(s[n],this.options.classes[n],t);return a=N(a,t[`${n}Class`],t),a=Pe(n,a,this.options.classes,t),Object.assign(i,{[n]:a})},{})}typeProps(t){const r=i=>Object.keys(i).reduce((n,a)=>Array.isArray(i[a])?n.concat(i[a]):n,[]),s=r(this.options.slotProps);return this.options.library[t]?s.concat(r(this.options.library[t].slotProps||{})):s}slotProps(t,r,s){let i=Array.isArray(this.options.slotProps[r])?this.options.slotProps[r]:[];const n=this.options.library[t];return n&&n.slotProps&&Array.isArray(n.slotProps[r])&&(i=i.concat(n.slotProps[r])),i.reduce((a,l)=>Object.assign(a,{[l]:s[l]}),{})}component(t){return this.options.library.hasOwnProperty(t)?this.options.library[t].component:!1}slotComponent(t,r){const s=this.options.library[t];return s&&s.slotComponents&&s.slotComponents[r]?s.slotComponents[r]:this.options.slotComponents[r]}rules(t={}){return d(d({},this.options.rules),t)}i18n(t){if(t.$i18n)switch(typeof t.$i18n.locale){case"string":return t.$i18n.locale;case"function":return t.$i18n.locale()}return!1}getLocale(t){return this.selectedLocale||(this.selectedLocale=[this.options.locale,this.i18n(t),"en"].reduce((r,s)=>{if(r)return r;if(s){const i=pe(s).find(n=>m(this.options.locales,n));i&&(r=i)}return r},!1)),this.selectedLocale}setLocale(t){m(this.options.locales,t)&&(this.options.locale=t,this.selectedLocale=t,this.registry.forEach((r,s)=>{r.hasValidationErrors()}))}validationMessage(t,r,s){const i=this.options.locales[this.getLocale(s)];return i.hasOwnProperty(t)?i[t](r):i.hasOwnProperty("default")?i.default(r):"Invalid field value"}register(t){t.$options.name==="FormulateForm"&&t.name&&this.registry.set(t.name,t)}deregister(t){t.$options.name==="FormulateForm"&&t.name&&this.registry.has(t.name)&&this.registry.delete(t.name)}handle(t,r,s=!1){const i=s?t:this.options.errorHandler(t,r);return r&&this.registry.has(r)&&this.registry.get(r).applyErrors({formErrors:E(i.formErrors),inputErrors:i.inputErrors||{}}),i}reset(t,r={}){this.resetValidation(t),this.setValues(t,r)}submit(t){this.registry.get(t).formSubmitted()}resetValidation(t){const r=this.registry.get(t);r.hideErrors(t),r.namedErrors=[],r.namedFieldErrors={}}setValues(t,r){r&&!Array.isArray(r)&&typeof r=="object"&&this.registry.get(t).setValues(d({},r))}getUploader(){return this.options.uploader||!1}getUploadUrl(){return this.options.uploadUrl||!1}getFileUrlKey(){return this.options.fileUrlKey||"url"}createUpload(t,r){return new B(t,r,this.options)}failedValidation(t){return this.options.failedValidation(this)}}return new oo});
//# sourceMappingURL=formulate.umd.js.map
