!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Vue3Formulate=t(e.Vue)}(this,(function(e){"use strict";var t=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(e,r,o)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,l=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&a(e,r,t[r]);if(s)for(var r of s(t))n.call(t,r)&&a(e,r,t[r]);return e},c=(e,t)=>r(e,o(t)),u=e=>"symbol"==typeof e?e:e+"",d=(e,t)=>{var r={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&s)for(var o of s(e))t.indexOf(o)<0&&n.call(e,o)&&(r[o]=e[o]);return r};const p=(e,t)=>({classification:e,component:"FormulateInput"+(t||e[0].toUpperCase()+e.substr(1))}),h=c(l({},["text","email","number","color","date","hidden","month","password","search","tel","time","url","week","datetime-local"].reduce(((e,t)=>c(l({},e),{[t]:p("text")})),{})),{range:p("slider"),textarea:p("textarea","TextArea"),checkbox:p("box"),radio:p("box"),submit:p("button"),button:p("button"),select:p("select"),file:p("file"),image:p("file"),group:p("group")});function m(e,t){const r={};for(let o in e)r[o]=t(o,e[o]);return r}function f(e,t,r=!1){if(e===t)return!0;if(!e||!t)return!1;if("object"!=typeof e&&"object"!=typeof t)return e===t;const o=Object.keys(e),s=Object.keys(t),i=o.length;if(s.length!==i)return!1;for(let n=0;n<i;n++){const s=o[n];if(!r&&e[s]!==t[s]||r&&!f(e[s],t[s],r))return!1}return!0}function x(e){return"string"==typeof e?e.replace(/([_-][a-z0-9])/gi,(t=>0===e.indexOf(t)||/[_-]/.test(e[e.indexOf(t)-1])?t:t.toUpperCase().replace(/[_-]/,""))):e}function y(e){return"string"==typeof e?e[0].toUpperCase()+e.substr(1):e}function g(e){return e?"string"==typeof e?[e]:Array.isArray(e)?e:"object"==typeof e?Object.values(e):[]:[]}function v(e,t){return"string"==typeof e?v(e.split("|"),t):Array.isArray(e)?e.map((e=>function(e,t){if("function"==typeof e)return[e,[]];if(Array.isArray(e)&&e.length){e=e.map((e=>e));const[r,o]=b(e.shift());if("string"==typeof r&&Object.hasOwn(t,r))return[t[r],e,r,o];if("function"==typeof r)return[r,e,r,o]}if("string"==typeof e&&e){const r=e.split(":"),[o,s]=b(r.shift());if(Object.hasOwn(t,o))return[t[o],r.length?r.join(":").split(","):[],o,s];throw new Error(`Unknown validation rule ${e}`)}return!1}(e,t))).filter((e=>!!e)):[]}function b(e){return/^[\^]/.test(e.charAt(0))?[x(e.substr(1)),e.charAt(0)]:[x(e),null]}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){return!E(e,"__id")||t?Object.defineProperty(e,"__id",Object.assign(Object.create(null),{value:t||w(9)})):e}function k(e){return"number"!=typeof e&&(void 0===e||""===e||null===e||!1===e||Array.isArray(e)&&!e.some((e=>!k(e)))||e&&!Array.isArray(e)&&"object"==typeof e&&k(Object.values(e)))}function V(e,t){return Object.keys(e).reduce(((r,o)=>{const s=x(o);return t.includes(s)&&(r[s]=e[o]),r}),{})}function P(){let e;return function(t,r,o){e&&clearTimeout(e),e=setTimeout((()=>t.call(this,...r)),o)}}function w(e=13){return Math.random().toString(36).substring(2,e+2)}const B=/^(?:\w+:)?\/\/(\S+)$/,F=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,O=/^[^\s.]+\.\S{2,}$/;class A{constructor(e,t,r={}){this.input=e,this.fileList=e.files,this.files=[],this.options=l(l({},{mimes:{}}),r),this.results=!1,this.context=t,this.dataTransferCheck(),t&&t.uploadUrl&&(this.options.uploadUrl=t.uploadUrl),this.uploadPromise=null,Array.isArray(this.fileList)?this.rehydrateFileList(this.fileList):this.addFileList(this.fileList)}rehydrateFileList(e){const t=e.reduce(((e,t)=>{const r=t[this.options?this.options.fileUrlKey:"url"],o=!(!r||!r.includes("."))&&r.substr(r.lastIndexOf(".")+1),s=this.options.mimes[o]||!1;return e.push(Object.assign({},t,r?{name:t.name||r.substr(r.lastIndexOf("/")+1||0),type:t.type?t.type:s,previewData:r}:{})),e}),[]);this.addFileList(t),this.results=this.mapUUID(e)}addFileList(e){for(let t=0;t<e.length;t++){const r=e[t],o=w(),s=function(){this.removeFile(o)};this.files.push({progress:!1,error:!1,complete:!1,justFinished:!1,name:r.name||"file-upload",file:r,uuid:o,path:!1,removeFile:s.bind(this),previewData:r.previewData||!1})}}hasUploader(){return!!this.context.uploader}uploaderIsAxios(){return!(!this.hasUploader()||"function"!=typeof this.context.uploader.request||"function"!=typeof this.context.uploader.get||"function"!=typeof this.context.uploader.delete||"function"!=typeof this.context.uploader.post)}getUploader(...e){if(this.uploaderIsAxios()){const t=new FormData;if(t.append(this.context.name||"file",e[0]),!1===this.context.uploadUrl)throw new Error("No uploadURL specified: https://vueformulate.com/guide/inputs/file/#props");return this.context.uploader.post(this.context.uploadUrl,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t=>{e[1](Math.round(100*t.loaded/t.total))}}).then((e=>e.data)).catch((t=>e[2](t)))}return this.context.uploader(...e)}upload(){return this.uploadPromise=this.uploadPromise?this.uploadPromise.then((()=>this.__performUpload())):this.__performUpload(),this.uploadPromise}__performUpload(){return new Promise(((e,t)=>{if(!this.hasUploader())return t(new Error("No uploader has been defined"));Promise.all(this.files.map((e=>(e.error=!1,e.complete=!!e.path,e.path?Promise.resolve(e.path):this.getUploader(e.file,(t=>{e.progress=t,this.context.rootEmit("file-upload-progress",t),t>=100&&(e.complete||(e.justFinished=!0,setTimeout((()=>{e.justFinished=!1}),this.options.uploadJustCompleteDuration)),e.complete=!0,this.context.rootEmit("file-upload-complete",e))}),(r=>{e.progress=0,e.error=r,e.complete=!0,this.context.rootEmit("file-upload-error",r),t(r)}),this.options))))).then((t=>{this.results=this.mapUUID(t),e(t)})).catch((e=>{throw new Error(e)}))}))}removeFile(e){const t=this.files.length;if(this.files=this.files.filter((t=>t&&t.uuid!==e)),Array.isArray(this.results)&&(this.results=this.results.filter((t=>t&&t.__id!==e))),this.context.performValidation(),window&&this.fileList instanceof FileList&&this.supportsDataTransfers){const e=new DataTransfer;this.files.forEach((t=>e.items.add(t.file))),this.fileList=e.files,this.input.files=this.fileList}else this.fileList=this.fileList.filter((t=>t&&t.__id!==e));t>this.files.length&&this.context.rootEmit("file-removed",this.files)}mergeFileList(e){if(this.addFileList(e.files),this.supportsDataTransfers){const t=new DataTransfer;this.files.forEach((e=>{e.file instanceof File&&t.items.add(e.file)})),this.fileList=t.files,this.input.files=this.fileList,e.files=(new DataTransfer).files}this.context.performValidation(),this.loadPreviews(),"delayed"!==this.context.uploadBehavior&&this.upload()}loadPreviews(){this.files.map((e=>{if(!e.previewData&&window&&window.FileReader&&/^image\//.test(e.file.type)){const t=new FileReader;t.onload=t=>Object.assign(e,{previewData:t.target.result}),t.readAsDataURL(e.file)}}))}dataTransferCheck(){try{new DataTransfer,this.supportsDataTransfers=!0}catch(e){this.supportsDataTransfers=!1}}getFiles(){return this.files}mapUUID(e){return e.map(((e,t)=>(this.files[t].path=void 0!==e&&e,e&&C(e,this.files[t].uuid))))}toString(){const e=this.files.length?this.files.length+" files":"empty";return this.results?JSON.stringify(this.results,null,"  "):`FileUpload(${e})`}}const $={accepted:function({value:e}){return Promise.resolve(["yes","on","1",1,!0,"true"].includes(e))},after:function({value:e},t=!1){const r=Date.parse(t||new Date),o=Date.parse(e);return Promise.resolve(!Number.isNaN(o)&&o>r)},alpha:function({value:e},t="default"){const r={default:/^[a-zA-ZÀ-ÖØ-öø-ÿĄąĆćĘęŁłŃńŚśŹźŻż]+$/,latin:/^[a-z]+$/i},o=Object.prototype.hasOwnProperty.call(r,t)?t:"default";return Promise.resolve(r[o].test(e))},alphanumeric:function({value:e},t="default"){const r={default:/^[a-zA-Z0-9À-ÖØ-öø-ÿĄąĆćĘęŁłŃńŚśŹźŻż]+$/,latin:/^[a-z0-9]+$/i},o=Object.prototype.hasOwnProperty.call(r,t)?t:"default";return Promise.resolve(r[o].test(e))},before:function({value:e},t=!1){const r=Date.parse(t||new Date),o=Date.parse(e);return Promise.resolve(!Number.isNaN(o)&&o<r)},between:function({value:e},t=0,r=10,o){return Promise.resolve(null!==t&&null!==r&&!Number.isNaN(t)&&!Number.isNaN(r)&&(!Number.isNaN(e)&&"length"!==o||"value"===o?(e=Number(e),t=Number(t),r=Number(r),e>t&&e<r):("string"==typeof e||"length"===o)&&(e=Number.isNaN(e)?e:e.toString()).length>t&&e.length<r))},confirm:function({value:e,getGroupValues:t,name:r},o){return Promise.resolve((()=>{const s=t();var i=o;return i||(i=r.endsWith("_confirm")?r.substr(0,r.length-8):`${r}_confirm`),s[i]===e})())},date:function({value:e},t=!1){return Promise.resolve(t&&"string"==typeof t?function(e){let t=`^${r=e,r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}$`;var r;const o={MM:"(0[1-9]|1[012])",M:"([1-9]|1[012])",DD:"([012][0-9]|3[01])",D:"([012]?[0-9]|3[01])",YYYY:"\\d{4}",YY:"\\d{2}"};return new RegExp(Object.keys(o).reduce(((e,t)=>e.replace(t,o[t])),t))}(t).test(e):!Number.isNaN(Date.parse(e)))},email:function({value:e}){return Promise.resolve(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(e))},endsWith:function({value:e},...t){return Promise.resolve("string"==typeof e&&t.length?void 0!==t.find((t=>e.endsWith(t))):"string"==typeof e&&0===t.length)},in:function({value:e},...t){return Promise.resolve(void 0!==t.find((t=>"object"==typeof t?f(t,e):t===e)))},matches:function({value:e},...t){return Promise.resolve(!!t.find((t=>("string"==typeof t&&"/"===t.substr(0,1)&&"/"===t.substr(-1)&&(t=new RegExp(t.substr(1,t.length-2))),t instanceof RegExp?t.test(e):t===e))))},mime:function({value:e},...t){return Promise.resolve((()=>{if(e instanceof A){const r=e.getFiles();for(let e=0;e<r.length;e++){const o=r[e].file;if(!t.includes(o.type))return!1}}return!0})())},min:function({value:e},t=1,r){return Promise.resolve(Array.isArray(e)?(t=Number.isNaN(t)?t:Number(t),e.length>=t):!Number.isNaN(e)&&"length"!==r||"value"===r?(e=Number.isNaN(e)?e:Number(e))>=t:("string"==typeof e||"length"===r)&&(e=Number.isNaN(e)?e:e.toString()).length>=t)},max:function({value:e},t=10,r){return Promise.resolve(Array.isArray(e)?(t=Number.isNaN(t)?t:Number(t),e.length<=t):!Number.isNaN(e)&&"length"!==r||"value"===r?(e=Number.isNaN(e)?e:Number(e))<=t:("string"==typeof e||"length"===r)&&(e=Number.isNaN(e)?e:e.toString()).length<=t)},not:function({value:e},...t){return Promise.resolve(void 0===t.find((t=>"object"==typeof t?f(t,e):t===e)))},number:function({value:e}){return Promise.resolve(!Number.isNaN(e))},required:function({value:e},t="pre"){return Promise.resolve(Array.isArray(e)?!!e.length:e instanceof A?e.getFiles().length>0:"string"==typeof e?"trim"===t?!!e.trim():!!e:"object"!=typeof e||!!e&&!!Object.keys(e).length)},startsWith:function({value:e},...t){return Promise.resolve("string"==typeof e&&t.length?void 0!==t.find((t=>e.startsWith(t))):"string"==typeof e&&0===t.length)},url:function({value:e}){return Promise.resolve(function(e){if("string"!=typeof e)return!1;const t=e.match(B);if(!t)return!1;const r=t[1];return!(!r||!F.test(r)&&!O.test(r))}(e))},bail:function(){return Promise.resolve(!0)},optional:function({value:e}){return Promise.resolve(!k(e))}},N="image/",S={csv:"text/csv",gif:N+"gif",jpg:N+"jpeg",jpeg:N+"jpeg",png:N+"png",pdf:"application/pdf",svg:N+"svg+xml"},j=["outer","wrapper","label","element","input","help","errors","error","decorator","rangeValue","uploadArea","uploadAreaMask","files","file","fileName","fileAdd","fileAddInput","fileRemove","fileProgress","fileUploadError","fileImagePreview","fileImagePreviewImage","fileProgressInner","grouping","groupRepeatable","groupRepeatableRemove","groupAddMore","form","formErrors","formError"],D={hasErrors:e=>e.hasErrors,hasValue:e=>e.hasValue,isValid:e=>e.isValid},I=(e,t)=>{const r=e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),o=`formulate${["form","file"].includes(r.substr(0,4))?"":"-input"}${["decorator","range-value"].includes(r)?"-element":""}${"outer"!==r?`-${r}`:""}`;return"input"===r?[]:[o].concat(L(o,e,t))},L=(e,t,r)=>{const o=[];switch(t){case"label":o.push(`${e}--${r.labelPosition}`);break;case"element":const t="group"===r.classification?"group":r.type;o.push(`${e}--${t}`),"group"===t&&o.push("formulate-input-group");break;case"help":o.push(`${e}--${r.helpPosition}`);break;case"form":r.name&&o.push(`${e}--${r.name}`)}return o},R=(()=>{const e=[""].concat(Object.keys(D).map((e=>y(e))));return j.reduce(((t,r)=>t.concat(e.reduce(((e,t)=>(e.push(`${r}${t}Class`),e)),[]))),[])})();function M(e,t,r){switch(typeof t){case"string":return t;case"function":return t(r,g(e));case"object":if(Array.isArray(t))return g(e).concat(t);default:return e}}function U(e){return j.reduce(((t,r)=>Object.assign(t,{[r]:I(r,e)})),{})}function _(e){return"[object Object]"===Object.prototype.toString.call(e)}function G(e){var t,r;return!1!==_(e)&&(void 0===(t=e.constructor)||!1!==_(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}function z(e){return"string"==typeof e?e[0].toUpperCase()+e.substr(1):e}var T={accepted:function(e){return"Please accept the "+e.name+"."},after:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?z(t)+" must be after "+r[0]+".":z(t)+" must be a later date."},alpha:function(e){return z(e.name)+" can only contain alphabetical characters."},alphanumeric:function(e){return z(e.name)+" can only contain letters and numbers."},before:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?z(t)+" must be before "+r[0]+".":z(t)+" must be an earlier date."},between:function(e){var t=e.name,r=e.value,o=e.args,s=!(!Array.isArray(o)||!o[2])&&o[2];return!isNaN(r)&&"length"!==s||"value"===s?z(t)+" must be between "+o[0]+" and "+o[1]+".":z(t)+" must be between "+o[0]+" and "+o[1]+" characters long."},confirm:function(e){var t=e.name;return e.args,z(t)+" does not match."},date:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?z(t)+" is not a valid date, please use the format "+r[0]:z(t)+" is not a valid date."},default:function(e){return e.name,"This field isn’t valid."},email:function(e){e.name;var t=e.value;return t?"“"+t+"” is not a valid email address.":"Please enter a valid email address."},endsWith:function(e){e.name;var t=e.value;return t?"“"+t+"” doesn’t end with a valid value.":"This field doesn’t end with a valid value."},in:function(e){var t=e.name,r=e.value;return"string"==typeof r&&r?"“"+z(r)+"” is not an allowed "+t+".":"This is not an allowed "+t+"."},matches:function(e){return z(e.name)+" is not an allowed value."},max:function(e){var t=e.name,r=e.value,o=e.args;if(Array.isArray(r))return"You may only select "+o[0]+" "+t+".";var s=!(!Array.isArray(o)||!o[1])&&o[1];return!isNaN(r)&&"length"!==s||"value"===s?z(t)+" must be less than or equal to "+o[0]+".":z(t)+" must be less than or equal to "+o[0]+" characters long."},mime:function(e){var t=e.name,r=e.args;return z(t)+" must be of the type: "+(r[0]||"No file formats allowed.")},min:function(e){var t=e.name,r=e.value,o=e.args;if(Array.isArray(r))return"You need at least "+o[0]+" "+t+".";var s=!(!Array.isArray(o)||!o[1])&&o[1];return!isNaN(r)&&"length"!==s||"value"===s?z(t)+" must be at least "+o[0]+".":z(t)+" must be at least "+o[0]+" characters long."},not:function(e){var t=e.name;return"“"+e.value+"” is not an allowed "+t+"."},number:function(e){return z(e.name)+" must be a number."},required:function(e){return z(e.name)+" is required."},startsWith:function(e){e.name;var t=e.value;return t?"“"+t+"” doesn’t start with a valid value.":"This field doesn’t start with a valid value."},url:function(e){return e.name,"Please include a valid url."}};function H(e){var t;e.extend({locales:(t={},t.en=T,t)})}function q(e,t,r,o){return new Promise(((r,s)=>{const i=(o.fauxUploaderDuration||1500)*(.5+Math.random()),n=performance.now(),a=()=>setTimeout((()=>{const o=performance.now()-n,s=Math.min(100,Math.round(o/i*100));if(t(s),s>=100)return r({url:"http://via.placeholder.com/350x150.png",name:e.name});a()}),20);a()}))}const W={inheritAttrs:!1,functional:!0,props:{name:{type:String,required:!0},forceWrap:{type:Boolean,default:!1},context:{type:Object,default:()=>({})}},render(){var t=this.$parent;const r=this.$props,{name:o,forceWrap:s,context:i}=r,n=d(r,["name","forceWrap","context"]);for(;t&&"FormulateInput"!==t.$options.name;)t=t.$parent;if(!t)return null;if(t.$slots&&t.$slots[o])return t.$slots[o](l(l({},i),n));if(Array.isArray(this.$slots.default())&&(this.$slots.default().length>1||s&&this.$slots.default().length>0)){const t=this.$attrs,{name:r,context:o}=t,s=d(t,["name","context"]);return e.h("div",l(l({},this.$attrs),s),this.$slots.default())}return Array.isArray(this.$slots.default())&&1===this.$slots.default().length?this.$slots.default()[0]:null}};function Y(e,t=0,r={}){if(e&&"object"==typeof e&&!Array.isArray(e)){let o=e,{children:s=null,component:i="FormulateInput",depth:n=1,key:a=null}=o,l=d(o,["children","component","depth","key"]);const c=l.class||{};delete l.class;const u={},p=Object.keys(l).reduce(((e,t)=>t.startsWith("@")?Object.assign(e,{[t.substr(1)]:l[t]}):e),{});Object.keys(p).forEach((e=>{delete l[`@${e}`],u[e]=function(e,t,r){return function(...o){return"function"==typeof t?t.call(this,...o):"string"==typeof t&&E(r,t)?r[t].call(this,...o):E(r,e)?r[e].call(this,...o):void 0}}(e,p[e],r)}));const h="FormulateInput"===i?l.type||"text":i,m=l.name||h||"el";a||(a=l.id?l.id:"FormulateInput"!==i&&"string"==typeof s?`${h}-${function(e,t=0){let r=3735928559^t,o=1103547991^t;for(let s,i=0;i<e.length;i++)s=e.charCodeAt(i),r=Math.imul(r^s,2654435761),o=Math.imul(o^s,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&o)+(r>>>0)}(s)}`:`${h}-${m}-${n}${l.name?"":"-"+t}`);const f=Array.isArray(s)?s.map((e=>Object.assign(e,{depth:n+1}))):s;return Object.assign({key:a,depth:n,attrs:l,component:i,class:c,on:u},f?{children:f}:{})}return null}function K(e,t,r){return Array.isArray(t)?t.map(((t,o)=>{const s=Y(t,o,r);return e(s.component,{attrs:s.attrs,class:s.class,key:s.key,on:s.on},s.children?K(e,s.children,r):null)})):t}const J={functional:!0,render:(e,{props:t,listeners:r})=>K(e,t.schema,r)};class Z{constructor(e){this.registry=new Map,this.errors={},this.ctx=e}add(e,t){return this.registry.set(e,t),this.errors=c(l({},this.errors),{[e]:t.getErrorObject().hasErrors}),this}remove(e){this.ctx.deps.delete(this.registry.get(e)),this.ctx.deps.forEach((t=>t.delete(e)));let t=this.ctx.keepModelData;!t&&this.registry.has(e)&&"inherit"!==this.registry.get(e).keepModelData&&(t=this.registry.get(e).keepModelData),this.ctx.preventCleanup&&(t=!0),this.registry.delete(e);const r=this.errors,{[e]:o}=r,s=d(r,[u(e)]);if(this.errors=s,!t){const t=this.ctx.proxy,{[e]:r}=t,o=d(t,[u(e)]);this.ctx.uuid&&C(o,this.ctx.uuid),this.ctx.proxy=o,this.ctx.$emit("input",this.ctx.proxy)}return this}has(e){return this.registry.has(e)}get(e){return this.registry.get(e)}map(e){const t={};return this.registry.forEach(((r,o)=>Object.assign(t,{[o]:e(r,o)}))),t}keys(){return Array.from(this.registry.keys())}register(e,t){if(E(t.$props,"ignored"))return!1;if(this.registry.has(e))return this.ctx.$nextTick((()=>!this.registry.has(e)&&this.register(e,t))),!1;this.add(e,t);const r=E(t.$props,"formulateValue"),o=E(t.$props,"value"),s=this.ctx.debounce||this.ctx.debounceDelay||this.ctx.context&&this.ctx.context.debounceDelay;s&&!E(t.$props,"debounce")&&(t.debounceDelay=s),r||!this.ctx.hasInitialValue||k(this.ctx.initialValues[e])?!r&&!o||f(t.proxy,this.ctx.initialValues[e],!0)||this.ctx.setFieldValue(e,t.proxy):t.context.model=this.ctx.initialValues[e],this.childrenShouldShowErrors&&(t.formShouldShowErrors=!0)}reduce(e,t){return this.registry.forEach(((r,o)=>{t=e(t,r,o)})),t}dataProps(){return{proxy:{},registry:this,register:this.register.bind(this),deregister:e=>this.remove(e),childrenShouldShowErrors:!1,errorObservers:[],deps:new Map,preventCleanup:!1}}}function Q(e){return new Z(e).dataProps()}function X(e={}){return{hasInitialValue(){return this.formulateValue&&"object"==typeof this.formulateValue||this.values&&"object"==typeof this.values||this.isGrouping&&"object"==typeof this.context.model[this.index]},isVmodeled(){const e=Object.prototype.hasOwnProperty.call(this.$props,"formulateValue"),t=this.$attrs&&("function"==typeof this.$attrs.onInput||"function"==typeof this.$attrs["onUpdate:modelValue"]);return!(!e||!t)},initialValues(){return E(this.$props,"formulateValue")&&"object"==typeof this.formulateValue?l({},this.formulateValue):E(this.$props,"values")&&"object"==typeof this.values?l({},this.values):this.isGrouping&&"object"==typeof this.context.model[this.index]?this.context.model[this.index]:{}},mergedGroupErrors(){const e=/^([^.\d+].*?)\.(\d+\..+)$/;return Object.keys(this.mergedFieldErrors).filter((t=>e.test(t))).reduce(((t,r)=>{let[,o,s]=r.match(e);return t[o]||(t[o]={}),Object.assign(t[o],{[s]:this.mergedFieldErrors[r]}),t}),{})}}}function ee(e=[]){const t={applyInitialValues(){this.hasInitialValue&&(this.proxy=l({},this.initialValues))},setFieldValue(e,t){if(void 0===t){const t=this.proxy,{[e]:r}=t,o=d(t,[u(e)]);this.proxy=o}else Object.assign(this.proxy,{[e]:t});this.$emit("input",l({},this.proxy))},valueDeps(e){return Object.keys(this.proxy).reduce(((t,r)=>Object.defineProperty(t,r,{enumerable:!0,get:()=>{const t=this.registry.get(r);return this.deps.set(e,this.deps.get(e)||new Set),t&&(this.deps.set(t,this.deps.get(t)||new Set),this.deps.get(t).add(e.name)),this.deps.get(e).add(r),this.proxy[r]}})),Object.create(null))},validateDeps(e){this.deps.has(e)&&this.deps.get(e).forEach((e=>this.registry.has(e)&&this.registry.get(e).performValidation()))},hasValidationErrors(){return Promise.all(this.registry.reduce(((e,t,r)=>(e.push(t.performValidation()&&t.getValidationErrors()),e)),[])).then((e=>e.some((e=>e.hasErrors))))},showErrors(){this.childrenShouldShowErrors=!0,this.registry.map((e=>{e.formShouldShowErrors=!0}))},hideErrors(){this.childrenShouldShowErrors=!1,this.registry.map((e=>{e.formShouldShowErrors=!1,e.behavioralErrorVisibility=!1}))},setValues(e){Array.from(new Set(Object.keys(e||{}).concat(Object.keys(this.proxy)))).forEach((t=>{const r=this.registry.has(t)&&this.registry.get(t);let o=e?e[t]:void 0;r&&!f(r.proxy,o,!0)&&(r.context.model=o),f(o,this.proxy[t],!0)||this.setFieldValue(t,o)}))},updateValidation(e){E(this.registry.errors,e.name)&&(this.registry.errors[e.name]=e.hasErrors),this.$emit("validation",e)},addErrorObserver(e){this.errorObservers.find((t=>e.callback===t.callback))||(this.errorObservers.push(e),"form"===e.type?e.callback(this.mergedFormErrors):"group"===e.type&&E(this.mergedGroupErrors,e.field)?e.callback(this.mergedGroupErrors[e.field]):E(this.mergedFieldErrors,e.field)&&e.callback(this.mergedFieldErrors[e.field]))},removeErrorObserver(e){this.errorObservers=this.errorObservers.filter((t=>t.callback!==e))}};return Object.keys(t).reduce(((r,o)=>e.includes(o)?r:c(l({},r),{[o]:t[o]})),{})}function te(){return{mergedFieldErrors:{handler(e){this.errorObservers.filter((e=>"input"===e.type)).forEach((t=>t.callback(e[t.field]||[])))},immediate:!0},mergedGroupErrors:{handler(e){this.errorObservers.filter((e=>"group"===e.type)).forEach((t=>t.callback(e[t.field]||{})))},immediate:!0}}}function re(e,t=[]){const r={formulateSetter:e.setFieldValue,formulateRegister:e.register,formulateDeregister:e.deregister,formulateFieldValidation:e.updateValidation,getFormValues:e.valueDeps,getGroupValues:e.valueDeps,validateDependents:e.validateDeps,observeErrors:e.addErrorObserver,removeErrorObserver:e.removeErrorObserver};return Object.keys(r).filter((e=>!t.includes(e))).reduce(((e,t)=>Object.assign(e,{[t]:r[t]})),{})}function oe(e){switch(typeof e){case"symbol":case"number":case"string":case"boolean":case"undefined":return!0;default:return null===e}}function se(e){if("object"!=typeof e)return e;const t=Array.isArray(e)?[]:{};for(const r in e)e[r]instanceof A||oe(e[r])?t[r]=e[r]:t[r]=se(e[r]);return t}class ie{constructor(e){this.form=e}hasValidationErrors(){return this.form.hasValidationErrors()}values(){return new Promise(((e,t)=>{const r=[],o=se(this.form.proxy);for(const s in o)"object"==typeof this.form.proxy[s]&&this.form.proxy[s]instanceof A&&r.push(this.form.proxy[s].upload().then((e=>Object.assign(o,{[s]:e}))));Promise.all(r).then((()=>e(o))).catch((e=>t(e)))}))}}const ne=(e,t)=>{const r=e.__vccOpts||e;for(const[o,s]of t)r[o]=s;return r};const ae=ne({name:"FormulateForm",provide(){return c(l({},re(this,["getGroupValues"])),{observeContext:this.addContextObserver,removeContextObserver:this.removeContextObserver})},inheritAttrs:!1,model:{prop:"formulateValue",event:"input"},props:{name:{type:[String,Boolean],default:!1},formulateValue:{type:Object,default:()=>({})},values:{type:[Object,Boolean],default:!1},errors:{type:[Object,Boolean],default:!1},formErrors:{type:Array,default:()=>[]},schema:{type:[Array,Boolean],default:!1},keepModelData:{type:[Boolean,String],default:!1},invalidMessage:{type:[Boolean,Function,String],default:!1},debounce:{type:[Boolean,Number],default:!1}},emits:["created","failed-validation","validation"],data(){return c(l({},Q(this)),{formShouldShowErrors:!1,contextObservers:[],namedErrors:[],namedFieldErrors:{},isLoading:!1,hasFailedSubmit:!1})},computed:c(l({},X()),{schemaAttrs(){const e=this.$attrs,{submit:t}=e;return d(e,["submit"])},pseudoProps(){return V(this.$attrs,R.filter((e=>/^form/.test(e))))},attributes(){const e=Object.keys(this.$attrs).filter((e=>!E(this.pseudoProps,x(e)))).reduce(((e,t)=>c(l({},e),{[t]:this.$attrs[t]})),{});return"string"==typeof this.name&&Object.assign(e,{name:this.name}),e},hasErrors(){return Object.values(this.registry.errors).some((e=>e))},isValid(){return!this.hasErrors},formContext(){return{errors:this.mergedFormErrors,pseudoProps:this.pseudoProps,hasErrors:this.hasErrors,value:this.proxy,hasValue:!k(this.proxy),isValid:this.isValid,isLoading:this.isLoading,classes:this.classes}},classes(){return this.$formulate.classes(c(l(l({},this.$props),this.pseudoProps),{value:this.proxy,errors:this.mergedFormErrors,hasErrors:this.hasErrors,hasValue:!k(this.proxy),isValid:this.isValid,isLoading:this.isLoading,type:"form",classification:"form",attrs:this.$attrs}))},invalidErrors(){if(this.hasFailedSubmit&&this.hasErrors)switch(typeof this.invalidMessage){case"string":return[this.invalidMessage];case"object":return Array.isArray(this.invalidMessage)?this.invalidMessage:[];case"function":const e=this.invalidMessage(this.failingFields);return Array.isArray(e)?e:[e]}return[]},mergedFormErrors(){return this.formErrors.concat(this.namedErrors).concat(this.invalidErrors)},mergedFieldErrors(){const e={};if(this.errors)for(const t in this.errors)e[t]=g(this.errors[t]);for(const t in this.namedFieldErrors)e[t]=g(this.namedFieldErrors[t]);return e},hasFormErrorObservers(){return!!this.errorObservers.filter((e=>"form"===e.type)).length},failingFields(){return Object.keys(this.registry.errors).reduce(((e,t)=>l(l({},e),this.registry.errors[t]?{[t]:this.registry.get(t)}:{})),{})}}),watch:c(l({},te()),{formulateValue:{handler(e){this.isVmodeled&&e&&"object"==typeof e&&this.setValues(e)},deep:!0},mergedFormErrors(e){this.errorObservers.filter((e=>"form"===e.type)).forEach((t=>t.callback(e)))}}),created(){this.$formulate.register(this),this.applyInitialValues(),this.$emit("created",this)},unmounted(){this.$formulate.deregister(this)},methods:c(l({},ee()),{applyErrors({formErrors:e,inputErrors:t}){this.namedErrors=e,this.namedFieldErrors=t},addContextObserver(e){this.contextObservers.find((t=>t===e))||(this.contextObservers.push(e),e(this.formContext))},removeContextObserver(e){this.contextObservers.filter((t=>t!==e))},registerErrorComponent(e){this.errorComponents.includes(e)||this.errorComponents.push(e)},formSubmitted(){if(this.isLoading)return;this.isLoading=!0,this.showErrors();const e=new ie(this),t=this.$attrs["submit-raw"]||this.$attrs.submitRaw,r="function"==typeof t?t(e):Promise.resolve(e);return(r instanceof Promise?r:Promise.resolve(r)).then((t=>{const r=t instanceof ie?t:e;return r.hasValidationErrors().then((e=>[r,e]))})).then((([e,t])=>t||"function"!=typeof this.$attrs.submit?this.onFailedValidation():e.values().then((e=>{this.hasFailedSubmit=!1;const t=this.$attrs.submit(e);return(t instanceof Promise?t:Promise.resolve()).then((()=>e))})))).finally((()=>{this.isLoading=!1}))},onFailedValidation(){return this.hasFailedSubmit=!0,this.$emit("failed-validation",l({},this.failingFields)),this.$formulate.failedValidation(this)}})},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSchema"),l=e.resolveComponent("FormulateErrors");return e.openBlock(),e.createElementBlock("form",e.mergeProps({class:n.classes.form},n.attributes,{onSubmit:r[0]||(r[0]=e.withModifiers(((...e)=>n.formSubmitted&&n.formSubmitted(...e)),["prevent"]))}),[o.schema?(e.openBlock(),e.createBlock(a,e.mergeProps({key:0,schema:o.schema},e.toHandlers(t.schemaListeners)),null,16,["schema"])):e.createCommentVNode("",!0),n.hasFormErrorObservers?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(l,{key:1,context:n.formContext},null,8,["context"])),e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps(n.formContext)))],16)}]]),le={context(){return pe.call(this,l({addLabel:this.logicalAddLabel,removeLabel:this.logicalRemoveLabel,attributes:this.elementAttributes,blurHandler:de.bind(this),classification:this.classification,component:this.component,debounceDelay:this.debounceDelay,disableErrors:this.disableErrors,errors:this.explicitErrors,formShouldShowErrors:this.formShouldShowErrors,getValidationErrors:this.getValidationErrors.bind(this),groupErrors:this.mergedGroupErrors,hasGivenName:this.hasGivenName,hasValue:this.hasValue,hasLabel:this.label&&"button"!==this.classification,hasValidationErrors:this.hasValidationErrors.bind(this),help:this.help,helpPosition:this.logicalHelpPosition,id:this.id||this.defaultId,ignored:E(this,"ignored"),isValid:this.isValid,imageBehavior:this.imageBehavior,label:this.label,labelPosition:this.logicalLabelPosition,limit:this.limit===1/0?this.limit:Number.parseInt(this.limit,10),name:this.nameOrFallback,minimum:Number.parseInt(this.minimum,10),performValidation:this.performValidation.bind(this),pseudoProps:this.pseudoProps,preventWindowDrops:this.preventWindowDrops,removePosition:this.mergedRemovePosition,repeatable:this.repeatable,rootEmit:this.$emit.bind(this),rules:this.ruleDetails,setErrors:this.setErrors.bind(this),showValidationErrors:this.showValidationErrors,slotComponents:this.slotComponents,slotProps:this.slotProps,type:this.type,uploadBehavior:this.uploadBehavior,uploadUrl:this.mergedUploadUrl,uploader:this.uploader||this.$formulate.getUploader(),validationErrors:this.validationErrors,value:this.value,visibleValidationErrors:this.visibleValidationErrors,isSubField:this.isSubField,classes:this.classes},this.typeContext))},nameOrFallback:function(){if(!0===this.name&&"button"!==this.classification){const e=this.id||this.elementAttributes.id.replace(/[^0-9]/g,"");return`${this.type}_${e}`}if(!1===this.name||"button"===this.classification&&!0===this.name)return!1;return this.name},hasGivenName:function(){return"boolean"!=typeof this.name},typeContext:function(){switch(this.classification){case"select":return{options:ce.call(this,this.options),optionGroups:!!this.optionGroups&&m(this.optionGroups,((e,t)=>ce.call(this,t))),placeholder:this.$attrs.placeholder||!1};case"slider":return{showValue:!!this.showValue};default:return this.options?{options:ce.call(this,this.options)}:{}}},elementAttributes:function(){const e=Object.assign({},this.filteredAttributes);this.id?e.id=this.id:e.id=this.defaultId;this.hasGivenName&&(e.name=this.name);this.help&&!E(e,"aria-describedby")&&(e["aria-describedby"]=`${e.id}-help`);!this.classes.input||Array.isArray(this.classes.input)&&!this.classes.input.length||(e.class=this.classes.input);return e},logicalLabelPosition:function(){if(this.labelPosition)return this.labelPosition;if("box"===this.classification)return"after";return"before"},logicalHelpPosition:function(){if(this.helpPosition)return this.helpPosition;if("group"===this.classification)return"before";return"after"},mergedRemovePosition:function(){return"group"===this.type&&(this.removePosition||"before")},mergedUploadUrl:function(){return this.uploadUrl||this.$formulate.getUploadUrl()},mergedGroupErrors:function(){const e=Object.keys(this.groupErrors).concat(Object.keys(this.localGroupErrors)),t=/^(\d+)\.(.*)$/;return Array.from(new Set(e)).filter((e=>t.test(e))).reduce(((e,r)=>{let[,o,s]=r.match(t);E(e,o)||(e[o]={});const i=Array.from(new Set(g(this.groupErrors[r]).concat(g(this.localGroupErrors[r]))));return e[o]=Object.assign(e[o],{[s]:i}),e}),{})},hasValue:function(){const e=this.proxy;if("box"===this.classification&&this.isGrouped||"select"===this.classification&&E(this.filteredAttributes,"multiple"))return Array.isArray(e)?e.includes(this.value):this.value===e;return!k(e)},visibleValidationErrors:function(){return this.showValidationErrors&&this.validationErrors.length?this.validationErrors:[]},slotComponents:function(){const e=this.$formulate.slotComponent.bind(this.$formulate);return{addMore:e(this.type,"addMore"),buttonContent:e(this.type,"buttonContent"),errors:e(this.type,"errors"),file:e(this.type,"file"),help:e(this.type,"help"),label:e(this.type,"label"),prefix:e(this.type,"prefix"),remove:e(this.type,"remove"),repeatable:e(this.type,"repeatable"),suffix:e(this.type,"suffix"),uploadAreaMask:e(this.type,"uploadAreaMask")}},logicalAddLabel:function(){if("file"===this.classification)return!0===this.addLabel?`+ Add ${y(this.type)}`:this.addLabel;if("boolean"==typeof this.addLabel){const e=this.label||this.name;return`+ ${"string"==typeof e?e+" ":""} Add`}return this.addLabel},logicalRemoveLabel:function(){if("boolean"==typeof this.removeLabel)return"Remove";return this.removeLabel},classes:function(){return this.$formulate.classes(l(l(l({},this.$props),this.pseudoProps),{attrs:this.filteredAttributes,classification:this.classification,hasErrors:this.hasVisibleErrors,hasValue:this.hasValue,helpPosition:this.logicalHelpPosition,isValid:this.isValid,labelPosition:this.logicalLabelPosition,type:this.type,value:this.proxy}))},showValidationErrors:function(){if(this.showErrors||this.formShouldShowErrors)return!0;if("file"===this.classification&&"live"===this.uploadBehavior&&he.call(this))return!0;return this.behavioralErrorVisibility},slotProps:function(){const e=this.$formulate.slotProps.bind(this.$formulate);return{label:e(this.type,"label",this.typeProps),help:e(this.type,"help",this.typeProps),errors:e(this.type,"errors",this.typeProps),repeatable:e(this.type,"repeatable",this.typeProps),addMore:e(this.type,"addMore",this.typeProps),remove:e(this.type,"remove",this.typeProps),component:e(this.type,"component",this.typeProps)}},pseudoProps:function(){return V(this.localAttributes,R)},isValid:function(){return!this.hasErrors},ruleDetails:function(){return this.parsedValidation.map((([,e,t])=>({ruleName:t,args:e})))},isVmodeled:function(){const e=Object.prototype.hasOwnProperty.call(this,"formulateValue")||Object.prototype.hasOwnProperty.call(this.$props,"formulateValue"),t=this.$attrs&&("function"==typeof this.$attrs.onInput||"function"==typeof this.$attrs["onUpdate:modelValue"]);return!(!e||!t)},mergedValidationName:function(){try{const e=this.$formulate.options.validationNameStrategy||["validationName","name","label","type"];if(Array.isArray(e)){return this[e.find((e=>"string"==typeof this[e]))]}return"function"==typeof e?e.call(this,this):this.type}catch(e){}},explicitErrors:function(){return g(this.errors).concat(this.localErrors).concat(g(this.error))},allErrors:function(){return this.explicitErrors.concat(g(this.validationErrors))},hasVisibleErrors:function(){return Array.isArray(this.validationErrors)&&this.validationErrors.length&&this.showValidationErrors||!!this.explicitErrors.length},hasErrors:function(){return!!this.allErrors.length},filteredAttributes:function(){const e=Object.keys(this.pseudoProps).concat(Object.keys(this.typeProps));return Object.keys(this.localAttributes).reduce(((t,r)=>(e.includes(x(r))||(t[r]=this.localAttributes[r]),t)),{})},typeProps:function(){return V(this.localAttributes,this.$formulate.typeProps(this.type))},attrs:function(){const e=this.$attrs,{input:t}=e;return d(e,["input"])}};function ce(e){if(!e)return[];return(Array.isArray(e)?e:Object.keys(e).map((t=>({label:e[t],value:t})))).map(ue.bind(this))}function ue(e){return"number"==typeof e&&(e=String(e)),"string"==typeof e?{label:e,value:e,id:`${this.elementAttributes.id}_${e}`}:("number"==typeof e.value&&(e.value=String(e.value)),Object.assign({value:"",label:"",id:`${this.elementAttributes.id}_${e.value||e.label}`},e))}function de(){"blur"!==this.errorBehavior&&"value"!==this.errorBehavior||(this.behavioralErrorVisibility=!0),this.$nextTick((()=>this.$emit("blur-context",this.context)))}function pe(e){return Object.defineProperty(e,"model",{get:he.bind(this),set:e=>{if(!this.mntd||!this.debounceDelay)return me.call(this,e);this.dSet(me,[e],this.debounceDelay)},enumerable:!0})}function he(){const e=this.isVmodeled?"formulateValue":"proxy";return"checkbox"===this.type&&!Array.isArray(this[e])&&this.options?[]:this[e]||0===this[e]?this[e]:""}function me(e){let t=!1;f(e,this.proxy,"group"===this.type)||(this.proxy=e,t=!0),!this.context.ignored&&this.context.name&&"function"==typeof this.formulateSetter&&this.formulateSetter(this.context.name,e),t&&this.$emit("input",e)}const fe={name:"FormulateInput",provide(){return{formulateRegisterRule:this.registerRule,formulateRemoveRule:this.removeRule}},inject:{formulateSetter:{default:void 0},formulateFieldValidation:{default:()=>()=>({})},formulateRegister:{default:void 0},formulateDeregister:{default:void 0},getFormValues:{default:()=>()=>({})},getGroupValues:{default:void 0},validateDependents:{default:()=>()=>{}},observeErrors:{default:void 0},removeErrorObserver:{default:void 0},isSubField:{default:()=>()=>!1}},inheritAttrs:!1,model:{prop:"formulateValue",event:"input"},props:{type:{type:String,default:"text"},name:{type:[String,Boolean],default:!0},formulateValue:{default:""},value:{default:!1},options:{type:[Object,Array,Boolean],default:!1},optionGroups:{type:[Object,Boolean],default:!1},id:{type:[String,Boolean,Number],default:!1},label:{type:[String,Boolean],default:!1},labelPosition:{type:[String,Boolean],default:!1},limit:{type:[String,Number],default:1/0,validator:e=>1/0},minimum:{type:[String,Number],default:0,validator:e=>Number.parseInt(e,10)==e},help:{type:[String,Boolean],default:!1},helpPosition:{type:[String,Boolean],default:!1},isGrouped:{type:Boolean,default:!1},errors:{type:[String,Array,Boolean],default:!1},removePosition:{type:[String,Boolean],default:!1},repeatable:{type:Boolean,default:!1},validation:{type:[String,Boolean,Array],default:!1},validationName:{type:[String,Boolean],default:!1},error:{type:[String,Boolean],default:!1},errorBehavior:{type:String,default:"blur",validator:function(e){return["blur","live","submit","value"].includes(e)}},showErrors:{type:Boolean,default:!1},groupErrors:{type:Object,default:()=>({}),validator:e=>{const t=/^\d+\./;return!Object.keys(e).some((e=>!t.test(e)))}},imageBehavior:{type:String,default:"preview"},uploadUrl:{type:[String,Boolean],default:!1},uploader:{type:[Function,Object,Boolean],default:!1},uploadBehavior:{type:String,default:"live"},preventWindowDrops:{type:Boolean,default:!0},showValue:{type:[String,Boolean],default:!1},validationMessages:{type:Object,default:()=>({})},validationRules:{type:Object,default:()=>({})},checked:{type:[String,Boolean],default:!1},disableErrors:{type:Boolean,default:!1},addLabel:{type:[Boolean,String],default:!0},removeLabel:{type:[Boolean,String],default:!1},keepModelData:{type:[Boolean,String],default:"inherit"},ignored:{type:[Boolean,String],default:!1},debounce:{type:[Boolean,Number],default:!1},preventDeregister:{type:Boolean,default:!1}},emits:["error-visibility","validation","input"],data(){try{return{defaultId:this.$formulate.nextId(this),localAttributes:{},localErrors:[],localGroupErrors:{},proxy:this.getInitialValue(),behavioralErrorVisibility:"live"===this.errorBehavior,formShouldShowErrors:!1,validationErrors:[],pendingValidation:Promise.resolve(),ruleRegistry:[],messageRegistry:{},touched:!1,debounceDelay:this.debounce,dSet:P(),mntd:!1}}catch(e){}},computed:c(l({},le),{classification(){const e=this.$formulate.classify(this.type);return"box"===e&&this.options?"group":e},component(){return"group"===this.classification?"FormulateInputGroup":this.$formulate.component(this.type)},parsedValidationRules(){const e={};return Object.keys(this.validationRules).forEach((t=>{e[x(t)]=this.validationRules[t]})),e},parsedValidation(){return v(this.validation,this.$formulate.rules(this.parsedValidationRules))},messages(){const e={};return Object.keys(this.validationMessages).forEach((t=>{e[x(t)]=this.validationMessages[t]})),Object.keys(this.messageRegistry).forEach((t=>{e[x(t)]=this.messageRegistry[t]})),e},listeners(){const e=Object.entries(this.$attrs).filter((([e])=>e.startsWith("on")));return Object.fromEntries(e)}}),watch:{$attrs:{handler(e){this.updateLocalAttributes(e)},deep:!0},proxy:{handler:function(e,t){this.performValidation(),this.isVmodeled||f(e,t,"group"===this.type)||(this.context.model=e),this.validateDependents(this),!this.touched&&e&&(this.touched=!0)},deep:!0},formulateValue:{handler:function(e,t){this.isVmodeled&&!f(e,t,"group"===this.type)&&(this.context.model=e)},deep:!0},showValidationErrors:{handler(e){this.$emit("error-visibility",e)},immediate:!0},validation:{handler(){this.performValidation()},deep:!0},touched(e){"value"===this.errorBehavior&&e&&(this.behavioralErrorVisibility=e)},debounce(e){this.debounceDelay=e}},created(){this.applyInitialValue(),this.formulateRegister&&"function"==typeof this.formulateRegister&&this.formulateRegister(this.nameOrFallback,this),this.applyDefaultValue(),this.disableErrors||"function"!=typeof this.observeErrors||(this.observeErrors({callback:this.setErrors,type:"input",field:this.nameOrFallback}),"group"===this.type&&this.observeErrors({callback:this.setGroupErrors,type:"group",field:this.nameOrFallback})),this.updateLocalAttributes(this.$attrs),this.performValidation(),this.hasValue&&(this.touched=!0)},mounted(){this.mntd=!0},beforeUnmount(){this.disableErrors||"function"!=typeof this.removeErrorObserver||(this.removeErrorObserver(this.setErrors),"group"===this.type&&this.removeErrorObserver(this.setGroupErrors)),"function"!=typeof this.formulateDeregister||this.preventDeregister||this.formulateDeregister(this.nameOrFallback)},methods:{getInitialValue(){let e=this.$formulate.classify(this.type);return e="box"===e&&this.options?"group":e,"box"===e&&this.checked?this.value||!0:E(this,"value")&&"box"!==e?this.value:E(this,"formulateValue")?this.formulateValue:"group"===e?Object.defineProperty("group"===this.type?[{}]:[],"__init",{value:!0}):""},applyInitialValue(){f(this.context.model,this.proxy)||"box"===this.classification&&!E(this,"options")||(this.context.model=this.proxy,this.$emit("input",this.proxy))},applyDefaultValue(){"select"===this.type&&!this.context.placeholder&&k(this.proxy)&&!this.isVmodeled&&!1===this.value&&this.context.options.length&&(E(this.$attrs,"multiple")?this.context.model=[]:this.context.model=this.context.options[0].value)},updateLocalAttributes(e){f(e,this.localAttributes)||(this.localAttributes=e)},performValidation(){let e=v(this.validation,this.$formulate.rules(this.parsedValidationRules));return e=this.ruleRegistry.length?this.ruleRegistry.concat(e):e,this.pendingValidation=this.runRules(e).then((e=>this.didValidate(e))),this.pendingValidation},runRules(e){const t=([e,t,r,o])=>{let s=e({value:this.context.model,getFormValues:(...e)=>this.getFormValues(this,...e),getGroupValues:(...e)=>this[`get${this.getGroupValues?"Group":"Form"}Values`](this,...e),name:this.context.name},...t);return s=s instanceof Promise?s:Promise.resolve(s),s.then((e=>!e&&this.getMessage(r,t)))};return new Promise((r=>{const o=(e,s=[])=>{const i=e.shift();Array.isArray(i)&&i.length?Promise.all(i.map(t)).then((e=>e.filter((e=>!!e)))).then((t=>(t=Array.isArray(t)?t:[]).length&&i.bail||!e.length?r(s.concat(t).filter((e=>!k(e)))):o(e,s.concat(t)))):r([])};o(function(e){const t=[],r=e.findIndex((([,,e])=>"bail"===e.toLowerCase())),o=e.findIndex((([,,e])=>"optional"===e.toLowerCase()));if(o>=0){const r=e.splice(o,1);t.push(Object.defineProperty(r,"bail",{value:!0}))}if(r>=0){const o=e.splice(0,r+1).slice(0,-1);o.length&&t.push(o),e.map((e=>t.push(Object.defineProperty([e],"bail",{value:!0}))))}else t.push(e);return t.reduce(((e,t)=>{const r=(e,t=!1)=>{if(e.length<2)return Object.defineProperty([e],"bail",{value:t});const o=[],s=e.findIndex((([,,,e])=>"^"===e));if(s>=0){const i=e.splice(0,s);i.length&&o.push(...r(i,t)),o.push(Object.defineProperty([e.shift()],"bail",{value:!0})),e.length&&o.push(...r(e,t))}else o.push(e);return o};return e.concat(r(t))}),[])}(e))}))},didValidate(e){const t=!f(e,this.validationErrors);if(this.validationErrors=e,t){const e=this.getErrorObject();this.$emit("validation",e),this.formulateFieldValidation&&"function"==typeof this.formulateFieldValidation&&this.formulateFieldValidation(e)}},getMessage(e,t){return this.getMessageFunc(e)({args:t,name:this.mergedValidationName,value:this.context.model,vm:this,formValues:this.getFormValues(this),getFormValues:(...e)=>this.getFormValues(this,...e),getGroupValues:(...e)=>this[`get${this.getGroupValues?"Group":"Form"}Values`](this,...e)})},getMessageFunc(e){if("optional"===(e=x(e)))return()=>[];if(this.messages&&void 0!==this.messages[e])switch(typeof this.messages[e]){case"function":return this.messages[e];case"string":case"boolean":return()=>this.messages[e]}return t=>this.$formulate.validationMessage(e,t,this)},hasValidationErrors(){return new Promise((e=>{this.$nextTick((()=>{this.pendingValidation.then((()=>e(!!this.validationErrors.length)))}))}))},getValidationErrors(){return new Promise((e=>{this.$nextTick((()=>this.pendingValidation.then((()=>e(this.getErrorObject())))))}))},getErrorObject(){return{name:this.context.nameOrFallback||this.context.name,errors:this.validationErrors.filter((e=>"string"==typeof e)),hasErrors:!!this.validationErrors.length}},setErrors(e){this.localErrors=g(e)},setGroupErrors(e){this.localGroupErrors=e},registerRule(e,t,r,o=null){this.ruleRegistry.some((e=>e[2]===r))||(this.ruleRegistry.push([e,t,r]),null!==o&&(this.messageRegistry[r]=o))},removeRule(e){const t=this.ruleRegistry.findIndex((t=>t[2]===e));t>=0&&(this.ruleRegistry.splice(t,1),delete this.messageRegistry[e])}}},xe=["data-classification","data-has-errors","data-is-showing-errors","data-has-value","data-type"];const ye=ne(fe,[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.outer),"data-classification":n.classification,"data-has-errors":t.hasErrors,"data-is-showing-errors":t.hasVisibleErrors,"data-has-value":t.hasValue,"data-type":o.type},[e.createElementVNode("div",{class:e.normalizeClass(t.context.classes.wrapper)},["before"===t.context.labelPosition?e.renderSlot(t.$slots,"label",e.normalizeProps(e.mergeProps({key:0},t.context)),(()=>[t.context.hasLabel?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.label),e.mergeProps({key:0},t.context.slotProps.label,{context:t.context}),null,16,["context"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),"before"===t.context.helpPosition?e.renderSlot(t.$slots,"help",e.normalizeProps(e.mergeProps({key:1},t.context)),(()=>[t.context.help?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.help),e.mergeProps({key:0},t.context.slotProps.help,{context:t.context}),null,16,["context"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"element",e.normalizeProps(e.guardReactiveProps(t.context)),(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.component),e.mergeProps({context:t.context},t.context.slotProps.component,e.toHandlers(n.listeners)),{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default",e.normalizeProps(e.guardReactiveProps(t.context)))])),_:3},16,["context"]))])),"after"===t.context.labelPosition?e.renderSlot(t.$slots,"label",e.normalizeProps(e.mergeProps({key:2},t.context)),(()=>[t.context.hasLabel?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.label),e.mergeProps({key:0,context:t.context},t.context.slotProps.label),null,16,["context"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],2),"after"===t.context.helpPosition?e.renderSlot(t.$slots,"help",e.normalizeProps(e.mergeProps({key:0},t.context)),(()=>[t.context.help?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.help),e.mergeProps({key:0,context:t.context},t.context.slotProps.help),null,16,["context"])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.renderSlot(t.$slots,"errors",e.normalizeProps(e.guardReactiveProps(t.context)),(()=>[t.context.disableErrors?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.errors),e.mergeProps({key:0,type:"FormulateErrors"===t.context.slotComponents.errors&&"input",context:t.context},t.context.slotProps.errors),null,16,["type","context"]))]))],10,xe)}]]);const ge=ne({inject:{observeErrors:{default:!1},removeErrorObserver:{default:!1},observeContext:{default:!1},removeContextObserver:{default:!1}},props:{context:{type:Object,default:()=>({})},type:{type:String,default:"form"}},data(){return{boundSetErrors:this.setErrors.bind(this),boundSetFormContext:this.setFormContext.bind(this),localErrors:[],formContext:{classes:{formErrors:"formulate-form-errors",formError:"formulate-form-error"}}}},computed:{visibleValidationErrors(){return Array.isArray(this.context.visibleValidationErrors)?this.context.visibleValidationErrors:[]},errors(){return Array.isArray(this.context.errors)?this.context.errors:[]},mergedErrors(){return this.errors.concat(this.localErrors)},visibleErrors(){return Array.from(new Set(this.mergedErrors.concat(this.visibleValidationErrors))).filter((e=>"string"==typeof e))},outerClass(){return"input"===this.type&&this.context.classes?this.context.classes.errors:this.formContext.classes.formErrors},itemClass(){return"input"===this.type&&this.context.classes?this.context.classes.error:this.formContext.classes.formError},role(){return"form"===this.type?"alert":"status"},ariaLive(){return"form"===this.type?"assertive":"polite"},slotComponent(){return this.$formulate.slotComponent(null,"errorList")}},created(){"form"===this.type&&"function"==typeof this.observeErrors&&(Array.isArray(this.context.errors)||this.observeErrors({callback:this.boundSetErrors,type:"form"}),this.observeContext(this.boundSetFormContext))},unmounted(){"form"===this.type&&"function"==typeof this.removeErrorObserver&&(Array.isArray(this.context.errors)||this.removeErrorObserver(this.boundSetErrors),this.removeContextObserver(this.boundSetFormContext))},methods:{setErrors(e){this.localErrors=g(e)},setFormContext(e){this.formContext=e}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.slotComponent),{"visible-errors":n.visibleErrors,"item-class":n.itemClass,"outer-class":n.outerClass,role:n.role,"aria-live":n.ariaLive,type:o.type},null,8,["visible-errors","item-class","outer-class","role","aria-live","type"])}]]),ve=["id","textContent"];const be=ne({props:{context:{type:Object,required:!0}}},[["render",function(t,r,o,s,i,n){return o.context.help?(e.openBlock(),e.createElementBlock("div",{key:0,id:`${o.context.id}-help`,class:e.normalizeClass(o.context.classes.help),textContent:e.toDisplayString(o.context.help)},null,10,ve)):e.createCommentVNode("",!0)}]]),Ee={props:{file:{type:Object,required:!0},imagePreview:{type:Boolean,default:!1},context:{type:Object,required:!0}}},Ce=["src"],ke=["title","textContent"],Ve=["data-just-finished","data-is-finished"];const Pe=ne(Ee,[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(o.context.classes.file)},[o.imagePreview&&o.file.previewData?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(o.context.classes.fileImagePreview)},[e.createElementVNode("img",{src:o.file.previewData,class:e.normalizeClass(o.context.classes.fileImagePreviewImage)},null,10,Ce)],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass(o.context.classes.fileName),title:o.file.name,textContent:e.toDisplayString(o.file.name)},null,10,ke),!1!==o.file.progress?(e.openBlock(),e.createElementBlock("div",{key:1,"data-just-finished":o.file.justFinished,"data-is-finished":!o.file.justFinished&&o.file.complete,class:e.normalizeClass(o.context.classes.fileProgress)},[e.createElementVNode("div",{class:e.normalizeClass(o.context.classes.fileProgressInner),style:e.normalizeStyle({width:o.file.progress+"%"})},null,6)],10,Ve)):e.createCommentVNode("",!0),o.file.complete&&!o.file.justFinished||!1===o.file.progress?(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(o.context.classes.fileRemove),onClick:r[0]||(r[0]=(...e)=>o.file.removeFile&&o.file.removeFile(...e))},null,2)):e.createCommentVNode("",!0)],2)}]]);const we=ne({name:"FormulateGrouping",inject:["formulateRegisterRule","formulateRemoveRule"],provide(){return{isSubField:()=>!0,registerProvider:this.registerProvider,deregisterProvider:this.deregisterProvider}},props:{context:{type:Object,required:!0}},data:()=>({providers:[],keys:[]}),computed:{items(){return Array.isArray(this.context.model)?this.context.repeatable||0!==this.context.model.length?this.context.model.length<this.context.minimum?Array.from({length:this.context.minimum||1}).fill("").map(((e,t)=>this.setId(this.context.model[t]||{},t))):this.context.model.map(((e,t)=>this.setId(e,t))):[this.setId({},0)]:Array.from({length:this.context.minimum||1}).fill("").map(((e,t)=>this.setId({},t)))},formShouldShowErrors(){return this.context.formShouldShowErrors},groupErrors(){return this.items.map(((e,t)=>E(this.context.groupErrors,t)?this.context.groupErrors[t]:{}))}},watch:{providers(){this.formShouldShowErrors&&this.showErrors()},formShouldShowErrors(e){e&&this.showErrors()},items:{handler(e,t){f(e,t,!0)||(this.keys=e.map((e=>e.__id)))},immediate:!0}},created(){this.formulateRegisterRule(this.validateGroup.bind(this),[],"formulateGrouping",!0)},unmounted(){this.formulateRemoveRule("formulateGrouping")},methods:{validateGroup(){return Promise.all(this.providers.reduce(((e,t)=>(t&&"function"==typeof t.hasValidationErrors&&e.push(t.hasValidationErrors()),e)),[])).then((e=>!e.some((e=>!!e))))},showErrors(){this.providers.forEach((e=>e&&"function"==typeof e.showErrors&&e.showErrors()))},setItem(e,t){Array.isArray(this.context.model)&&this.context.model.length>=this.context.minimum&&!this.context.model.__init?this.context.model.splice(e,1,this.setId(t,e)):this.context.model=this.items.map(((r,o)=>o===e?this.setId(t,e):r))},removeItem(e){Array.isArray(this.context.model)&&this.context.model.length>this.context.minimum?(this.context.model=this.context.model.filter(((t,r)=>r!==e&&t)),this.context.rootEmit("repeatableRemoved",this.context.model)):!Array.isArray(this.context.model)&&this.items.length>this.context.minimum&&(this.context.model=Array.from({length:this.items.length-1}).fill("").map(((e,t)=>this.setId({},t))),this.context.rootEmit("repeatableRemoved",this.context.model))},registerProvider(e){this.providers.includes(e)||this.providers.push(e)},deregisterProvider(e){this.providers=this.providers.filter((t=>t!==e))},setId(e,t){return e.__id?e:C(e,this.keys[t])}}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateRepeatableProvider"),l=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createBlock(l,{name:"grouping",class:e.normalizeClass(o.context.classes.grouping),context:o.context,"force-wrap":o.context.repeatable},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,((r,s)=>(e.openBlock(),e.createBlock(a,{key:r.__id,index:s,context:o.context,uuid:r.__id,errors:n.groupErrors[s],onRemove:n.removeItem,onInput:e=>n.setItem(s,e)},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:2},1032,["index","context","uuid","errors","onRemove","onInput"])))),128))])),_:3},8,["class","context","force-wrap"])}]]),Be=["id","for","textContent"];const Fe=ne({props:{context:{type:Object,required:!0}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createElementBlock("label",{id:`${o.context.id}_label`,class:e.normalizeClass(o.context.classes.label),for:o.context.id,textContent:e.toDisplayString(o.context.label)},null,10,Be)}]]);const Oe=ne({props:{context:{type:Object,required:!0},addMore:{type:Function,required:!0}}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateInput");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(o.context.classes.groupAddMore)},[e.createVNode(a,{type:"button",label:o.context.addLabel,"data-minor":"","data-ghost":"",onClick:o.addMore},null,8,["label","onClick"])],2)}]]),Ae={props:{context:{type:Object,required:!0}},computed:{type(){return this.context.type},attributes(){return this.context.attributes||{}},hasValue(){return this.context.hasValue}}},$e=["data-type"],Ne=["value"],Se=["value"];const je=ne({name:"FormulateInputBox",mixins:[Ae],computed:{usesDecorator(){return this.$formulate.options.useInputDecorators}}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":t.context.type},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),"radio"===t.type?e.withDirectives((e.openBlock(),e.createElementBlock("input",e.mergeProps({key:0,"onUpdate:modelValue":r[0]||(r[0]=e=>t.context.model=e),type:"radio",value:t.context.value},t.attributes,e.toHandlers(t.$attrs,!0),{onBlur:r[1]||(r[1]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e))}),null,16,Ne)),[[e.vModelRadio,t.context.model]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",e.mergeProps({key:1,"onUpdate:modelValue":r[2]||(r[2]=e=>t.context.model=e),type:"checkbox",value:t.context.value},t.attributes,e.toHandlers(t.$attrs,!0),{onBlur:r[3]||(r[3]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e))}),null,16,Se)),[[e.vModelCheckbox,t.context.model]]),n.usesDecorator?(e.openBlock(),e.createBlock(e.resolveDynamicComponent("label"),{key:2,class:e.normalizeClass(t.context.classes.decorator),for:t.attributes.id},null,8,["class","for"])):e.createCommentVNode("",!0),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,$e)}]]),De={props:{visibleErrors:{type:Array,required:!0},itemClass:{type:[String,Array,Object,Boolean],default:!1},outerClass:{type:[String,Array,Object,Boolean],default:!1},role:{type:[String],default:"status"},ariaLive:{type:[String,Boolean],default:"polite"},type:{type:String,required:!0}}},Ie=["role","aria-live","textContent"];const Le=ne(De,[["render",function(t,r,o,s,i,n){return o.visibleErrors.length?(e.openBlock(),e.createElementBlock("ul",{key:0,class:e.normalizeClass(o.outerClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.visibleErrors,(t=>(e.openBlock(),e.createElementBlock("li",{key:t,class:e.normalizeClass(o.itemClass),role:o.role,"aria-live":o.ariaLive,textContent:e.toDisplayString(t)},null,10,Ie)))),128))],2)):e.createCommentVNode("",!0)}]]),Re=["data-type"],Me=["type"];const Ue=ne({name:"FormulateInputText",mixins:[Ae]},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":t.context.type},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),e.withDirectives(e.createElementVNode("input",e.mergeProps({"onUpdate:modelValue":r[0]||(r[0]=e=>t.context.model=e),type:t.type},t.attributes,{onBlur:r[1]||(r[1]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e))},e.toHandlers(t.$attrs,!0)),null,16,Me),[[e.vModelDynamic,t.context.model]]),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,Re)}]]),_e={name:"FormulateFiles",props:{files:{type:A,required:!0},imagePreview:{type:Boolean,default:!1},context:{type:Object,required:!0}},computed:{fileUploads(){return this.files.files||[]},isMultiple(){return E(this.context.attributes,"multiple")}},watch:{files(){this.imagePreview&&this.files.loadPreviews()}},mounted(){this.imagePreview&&this.files.loadPreviews()},methods:{appendFiles(){const e=this.$refs.addFiles;e.files.length&&this.files.mergeFileList(e)}}},Ge=["data-has-error","data-has-preview"],ze=["textContent"];const Te=["data-type","data-has-files"],He=["data-has-files"],qe=["data-is-drag-hover"];const We=ne({name:"FormulateInputFile",components:{FormulateFiles:ne(_e,[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return n.fileUploads.length?(e.openBlock(),e.createElementBlock("ul",{key:0,class:e.normalizeClass(o.context.classes.files)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.fileUploads,(t=>(e.openBlock(),e.createElementBlock("li",{key:t.uuid,"data-has-error":!!t.error,"data-has-preview":!(!o.imagePreview||!t.previewData)},[e.createVNode(a,{name:"file",context:o.context,file:t,"image-preview":o.imagePreview},{default:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.context.slotComponents.file),{context:o.context,file:t,"image-preview":o.imagePreview},null,8,["context","file","image-preview"]))])),_:2},1032,["context","file","image-preview"]),t.error?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(o.context.classes.fileUploadError),textContent:e.toDisplayString(t.error)},null,10,ze)):e.createCommentVNode("",!0)],8,Ge)))),128)),n.isMultiple&&o.context.addLabel?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(o.context.classes.fileAdd),role:"button"},[e.createTextVNode(e.toDisplayString(o.context.addLabel)+" ",1),e.createElementVNode("input",{ref:"addFiles",type:"file",multiple:"",class:e.normalizeClass(o.context.classes.fileAddInput),onChange:r[0]||(r[0]=(...e)=>n.appendFiles&&n.appendFiles(...e))},null,34)],2)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)}]])},mixins:[Ae],data:()=>({isOver:!1}),computed:{hasFiles(){return!!(this.context.model instanceof A&&this.context.model.files.length)}},created(){Array.isArray(this.context.model)&&"string"==typeof this.context.model[0][this.$formulate.getFileUrlKey()]&&(this.context.model=this.$formulate.createUpload({files:this.context.model},this.context))},mounted(){window&&this.context.preventWindowDrops&&(window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.preventDefault))},unmounted(){window&&this.context.preventWindowDrops&&(window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.preventDefault))},methods:{preventDefault(e){"INPUT"!==e.target.tagName&&"file"!==e.target.getAttribute("type")&&(e=e||event).preventDefault()},handleFile(){this.isOver=!1;const e=this.$refs.file;e.files.length&&(this.context.model=this.$formulate.createUpload(e,this.context),this.$nextTick((()=>this.attemptImmediateUpload())))},attemptImmediateUpload(){"live"===this.context.uploadBehavior&&this.context.model instanceof A&&this.context.hasValidationErrors().then((e=>{e||this.context.model.upload()}))},handleDragOver(e){e.preventDefault(),this.isOver=!0},handleDragLeave(e){e.preventDefault(),this.isOver=!1}}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot"),l=e.resolveComponent("FormulateFiles");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":t.context.type,"data-has-files":n.hasFiles},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),e.createElementVNode("div",{class:e.normalizeClass(t.context.classes.uploadArea),"data-has-files":n.hasFiles},[e.createElementVNode("input",e.mergeProps({ref:"file","data-is-drag-hover":i.isOver,type:"file"},t.attributes,e.toHandlers(t.$attrs,!0),{onBlur:r[0]||(r[0]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e)),onChange:r[1]||(r[1]=(...e)=>n.handleFile&&n.handleFile(...e)),onDragover:r[2]||(r[2]=(...e)=>n.handleDragOver&&n.handleDragOver(...e)),onDragleave:r[3]||(r[3]=(...e)=>n.handleDragLeave&&n.handleDragLeave(...e))}),null,16,qe),e.createVNode(a,{name:"uploadAreaMask",context:t.context,"has-files":n.hasFiles},{default:e.withCtx((()=>[e.withDirectives((e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.uploadAreaMask),{"has-files":"div"!==t.context.slotComponents.uploadAreaMask&&n.hasFiles,"data-has-files":"div"===t.context.slotComponents.uploadAreaMask&&n.hasFiles,class:e.normalizeClass(t.context.classes.uploadAreaMask)},null,8,["has-files","data-has-files","class"])),[[e.vShow,!n.hasFiles]])])),_:1},8,["context","has-files"]),n.hasFiles?(e.openBlock(),e.createBlock(l,{key:0,files:t.context.model,"image-preview":"image"===t.context.type&&"preview"===t.context.imageBehavior,context:t.context},null,8,["files","image-preview","context"])):e.createCommentVNode("",!0)],10,He),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,Te)}]]);const Ye=ne({props:{context:{type:Object,required:!0},removeItem:{type:Function,required:!0},index:{type:Number,required:!0}}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(o.context.classes.groupRepeatable)},["after"===o.context.removePosition?e.renderSlot(t.$slots,"default",{key:0}):e.createCommentVNode("",!0),e.createVNode(a,{name:"remove",context:o.context,index:o.index,"remove-item":o.removeItem},{default:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.context.slotComponents.remove),e.mergeProps({context:o.context,index:o.index,"remove-item":o.removeItem},o.context.slotProps.remove),null,16,["context","index","remove-item"]))])),_:1},8,["context","index","remove-item"]),"before"===o.context.removePosition?e.renderSlot(t.$slots,"default",{key:1}):e.createCommentVNode("",!0)],2)}]]),Ke=["data-is-repeatable","aria-labelledby"];const Je=ne({name:"FormulateInputGroup",props:{context:{type:Object,required:!0}},computed:{options(){return this.context.options||[]},subType(){return"group"===this.context.type?"grouping":"inputs"},optionsWithContext(){const e=this.context,{attributes:t}=e,r=t,{id:o}=r,s=d(r,["id"]),i=e,{blurHandler:n,classification:a,component:l,getValidationErrors:c,hasLabel:u,hasValidationErrors:p,isSubField:h,isValid:m,labelPosition:f,options:x,performValidation:y,setErrors:g,slotComponents:v,slotProps:b,validationErrors:E,visibleValidationErrors:C,classes:k,showValidationErrors:V,rootEmit:P,help:w,pseudoProps:B,rules:F,model:O}=i,A=d(i,["attributes","blurHandler","classification","component","getValidationErrors","hasLabel","hasValidationErrors","isSubField","isValid","labelPosition","options","performValidation","setErrors","slotComponents","slotProps","validationErrors","visibleValidationErrors","classes","showValidationErrors","rootEmit","help","pseudoProps","rules","model"]);return this.options.map((e=>this.groupItemContext(A,e,s)))},totalItems(){return Array.isArray(this.context.model)&&this.context.model.length>this.context.minimum?this.context.model.length:this.context.minimum||1},canAddMore(){return this.context.repeatable&&this.totalItems<this.context.limit},labelledBy(){return this.context.label&&`${this.context.id}_label`}},methods:{addItem(){if(Array.isArray(this.context.model)){const e=this.context.minimum-this.context.model.length+1,t=Math.max(e,1);for(let r=0;r<t;r++)this.context.model.push(C({}))}else this.context.model=Array.from({length:this.totalItems+1}).fill("").map((()=>C({})));this.context.rootEmit("repeatableAdded",this.context.model)},groupItemContext:(e,t,r)=>Object.assign({},e,t,r,{isGrouped:!0},e.hasGivenName?{}:{name:!0})}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot"),l=e.resolveComponent("FormulateInput"),c=e.resolveComponent("FormulateGrouping");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(o.context.classes.element),"data-is-repeatable":o.context.repeatable,role:"group","aria-labelledby":n.labelledBy},[e.createVNode(a,{name:"prefix",context:o.context},{default:e.withCtx((()=>[o.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.context.slotComponents.prefix),{key:0,context:o.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),"grouping"!==n.subType?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(n.optionsWithContext,(t=>(e.openBlock(),e.createBlock(l,e.mergeProps({key:t.id,modelValue:o.context.model,"onUpdate:modelValue":r[0]||(r[0]=e=>o.context.model=e),ref_for:!0},t,{"disable-errors":!0,"prevent-deregister":!0,class:"formulate-input-group-item",onBlur:o.context.blurHandler}),null,16,["modelValue","onBlur"])))),128)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(c,{context:o.context},{default:e.withCtx((()=>[e.renderSlot(t.$slots,"default")])),_:3},8,["context"]),n.canAddMore?(e.openBlock(),e.createBlock(a,{key:0,name:"addmore",context:o.context,"add-more":n.addItem},{default:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.context.slotComponents.addMore),e.mergeProps({context:o.context,"add-more":n.addItem},o.context.slotProps.addMore,{onAdd:n.addItem}),null,16,["context","add-more","onAdd"]))])),_:1},8,["context","add-more"])):e.createCommentVNode("",!0)],64)),e.createVNode(a,{name:"suffix",context:o.context},{default:e.withCtx((()=>[o.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.context.slotComponents.suffix),{key:0,context:o.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,Ke)}]]),Ze=["data-type"],Qe=["type"];const Xe=ne({name:"FormulateInputButton",mixins:[Ae]},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":t.context.type},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),e.createElementVNode("button",e.mergeProps({type:t.type},t.attributes,e.toHandlers(t.$attrs,!0)),[e.renderSlot(t.$slots,"default",{context:t.context},(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.buttonContent),{context:t.context},null,8,["context"]))]))],16,Qe),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,Ze)}]]),et=["data-type","data-multiple"],tt=["data-placeholder-selected"],rt=["selected"],ot=["value","disabled","textContent"],st=["label"],it=["value","disabled","textContent"];const nt=ne({name:"FormulateInputSelect",mixins:[Ae],computed:{options(){return this.context.options||{}},optionGroups(){return this.context.optionGroups||!1},placeholderSelected(){return!(this.hasValue||!this.context.attributes||!this.context.attributes.placeholder)}}},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":t.context.type,"data-multiple":t.attributes&&void 0!==t.attributes.multiple},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),e.withDirectives(e.createElementVNode("select",e.mergeProps({"onUpdate:modelValue":r[0]||(r[0]=e=>t.context.model=e)},t.attributes,{"data-placeholder-selected":n.placeholderSelected},e.toHandlers(t.$attrs,!0),{onBlur:r[1]||(r[1]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e))}),[t.context.placeholder?(e.openBlock(),e.createElementBlock("option",{key:0,value:"",hidden:"hidden",disabled:"",selected:!t.hasValue},e.toDisplayString(t.context.placeholder),9,rt)):e.createCommentVNode("",!0),n.optionGroups?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(n.optionGroups,((t,r)=>(e.openBlock(),e.createElementBlock("optgroup",{key:r,label:r},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(t=>(e.openBlock(),e.createElementBlock("option",e.mergeProps({key:t.id,value:t.value,disabled:!!t.disabled,ref_for:!0},t.attributes||t.attrs||{},{textContent:e.toDisplayString(t.label)}),null,16,it)))),128))],8,st)))),128)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(n.options,(t=>(e.openBlock(),e.createElementBlock("option",e.mergeProps({key:t.id,value:t.value,disabled:!!t.disabled,ref_for:!0},t.attributes||t.attrs||{},{textContent:e.toDisplayString(t.label)}),null,16,ot)))),128))],16,tt),[[e.vModelSelect,t.context.model]]),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,et)}]]),at=["data-type"],lt=["type"],ct=["textContent"];const ut=ne({name:"FormulateInputSlider",mixins:[Ae]},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":t.context.type},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),e.withDirectives(e.createElementVNode("input",e.mergeProps({"onUpdate:modelValue":r[0]||(r[0]=e=>t.context.model=e),type:t.type},t.attributes,e.toHandlers(t.$attrs,!0),{onBlur:r[1]||(r[1]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e))}),null,16,lt),[[e.vModelDynamic,t.context.model]]),t.context.showValue?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(t.context.classes.rangeValue),textContent:e.toDisplayString(t.context.model)},null,10,ct)):e.createCommentVNode("",!0),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],10,at)}]]),dt=["textContent"];const pt=ne({props:{context:{type:Object,required:!0}}},[["render",function(t,r,o,s,i,n){return e.openBlock(),e.createElementBlock("span",{class:e.normalizeClass(`formulate-input-element--${o.context.type}--label`),textContent:e.toDisplayString(o.context.value||o.context.label||o.context.name||"Submit")},null,10,dt)}]]);const ht=ne({name:"FormulateInputTextArea",mixins:[Ae]},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.context.classes.element),"data-type":"textarea"},[e.createVNode(a,{name:"prefix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.prefix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.prefix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"]),e.withDirectives(e.createElementVNode("textarea",e.mergeProps({"onUpdate:modelValue":r[0]||(r[0]=e=>t.context.model=e)},t.attributes,e.toHandlers(t.$attrs,!0),{onBlur:r[1]||(r[1]=(...e)=>t.context.blurHandler&&t.context.blurHandler(...e))}),null,16),[[e.vModelText,t.context.model]]),e.createVNode(a,{name:"suffix",context:t.context},{default:e.withCtx((()=>[t.context.slotComponents.suffix?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.context.slotComponents.suffix),{key:0,context:t.context},null,8,["context"])):e.createCommentVNode("",!0)])),_:1},8,["context"])],2)}]]);const mt=ne({provide(){return c(l({},re(this,["getFormValues"])),{formulateSetter:(e,t)=>this.setGroupValue(e,t)})},inject:{registerProvider:"registerProvider",deregisterProvider:"deregisterProvider"},props:{index:{type:Number,required:!0},context:{type:Object,required:!0},uuid:{type:String,required:!0},errors:{type:Object,required:!0}},emits:["remove","validation"],data(){return c(l({},Q(this)),{isGrouping:!0})},computed:c(l({},X()),{mergedFieldErrors(){return this.errors}}),watch:c(l({},te()),{"context.model":{handler(e){f(e[this.index],this.proxy,!0)||this.setValues(e[this.index])},deep:!0}}),created(){this.applyInitialValues(),this.registerProvider(this)},beforeUnmount(){this.preventCleanup=!0,this.deregisterProvider(this)},methods:c(l({},ee()),{setGroupValue(e,t){f(this.proxy[e],t,!0)||this.setFieldValue(e,t)},removeItem(){this.$emit("remove",this.index)}})},[["render",function(t,r,o,s,i,n){const a=e.resolveComponent("FormulateSlot");return e.openBlock(),e.createBlock(a,{name:"repeatable",context:o.context,index:o.index,"remove-item":n.removeItem},{default:e.withCtx((()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.context.slotComponents.repeatable),e.mergeProps({context:o.context,index:o.index,"remove-item":n.removeItem},o.context.slotProps.repeatable),{default:e.withCtx((()=>[e.createVNode(a,{context:o.context,index:o.index,name:"default"},null,8,["context","index"])])),_:1},16,["context","index","remove-item"]))])),_:1},8,["context","index","remove-item"])}]]),ft=["data-disabled","textContent"];const xt=ne({props:{index:{type:Number,default:null},context:{type:Object,required:!0},removeItem:{type:Function,required:!0}}},[["render",function(t,r,o,s,i,n){return o.context.repeatable?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(o.context.classes.groupRepeatableRemove),"data-disabled":o.context.model.length<=o.context.minimum,role:"button",onClick:r[0]||(r[0]=e.withModifiers(((...e)=>o.removeItem&&o.removeItem(...e)),["prevent"])),onKeypress:r[1]||(r[1]=e.withKeys(((...e)=>o.removeItem&&o.removeItem(...e)),["enter"])),textContent:e.toDisplayString(o.context.removeLabel)},null,42,ft)):e.createCommentVNode("",!0)}]]);return class{constructor(){this.options={},this.defaults={components:{FormulateSlot:W,FormulateForm:ae,FormulateFile:Pe,FormulateHelp:be,FormulateLabel:Fe,FormulateInput:ye,FormulateErrors:ge,FormulateSchema:J,FormulateAddMore:Oe,FormulateGrouping:we,FormulateInputBox:je,FormulateInputText:Ue,FormulateInputFile:We,FormulateErrorList:Le,FormulateRepeatable:Ye,FormulateInputGroup:Je,FormulateInputButton:Xe,FormulateInputSelect:nt,FormulateInputSlider:ut,FormulateButtonContent:pt,FormulateInputTextArea:ht,FormulateRepeatableRemove:xt,FormulateRepeatableProvider:mt},slotComponents:{addMore:"FormulateAddMore",buttonContent:"FormulateButtonContent",errorList:"FormulateErrorList",errors:"FormulateErrors",file:"FormulateFile",help:"FormulateHelp",label:"FormulateLabel",prefix:!1,remove:"FormulateRepeatableRemove",repeatable:"FormulateRepeatable",suffix:!1,uploadAreaMask:"div"},slotProps:{},library:h,rules:$,mimes:S,locale:!1,uploader:q,uploadUrl:!1,fileUrlKey:"url",uploadJustCompleteDuration:1e3,errorHandler:e=>e,plugins:[H],locales:{},failedValidation:()=>!1,idPrefix:"formulate-",baseClasses:e=>e,coreClasses:U,classes:{},useInputDecorators:!0,validationNameStrategy:!1},this.registry=new Map,this.idRegistry={}}install(e,t){this.options=this.defaults;var r=this.defaults.plugins;for(var o in t&&Array.isArray(t.plugins)&&t.plugins.length&&(r=r.concat(t.plugins)),r.forEach((e=>"function"==typeof e?e(this):null)),this.extend(t||{}),this.options.components)e.component(o,this.options.components[o])}nextId(e){const t=!(!e.$route||!e.$route.path)&&e.$route.path?e.$route.path.replace(/[/\\.\s]/g,"-"):"global";return Object.prototype.hasOwnProperty.call(this.idRegistry,t)||(this.idRegistry[t]=0),`${this.options.idPrefix}${t}-${++this.idRegistry[t]}`}extend(e){if("object"==typeof e)return this.options=this.merge(this.options,e),this;throw new Error("Formulate.extend expects an object, was "+typeof e)}merge(e,t,r=!0){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(t,s)?G(t[s])&&G(e[s])?o[s]=this.merge(e[s],t[s],r):r&&Array.isArray(e[s])&&Array.isArray(t[s])?o[s]=e[s].concat(t[s]):o[s]=t[s]:o[s]=e[s];for(var i in t)Object.prototype.hasOwnProperty.call(o,i)||(o[i]=t[i]);return o}classify(e){return Object.prototype.hasOwnProperty.call(this.options.library,e)?this.options.library[e].classification:"unknown"}classes(e){const t=this.options.coreClasses(e),r=this.options.baseClasses(t,e);return Object.keys(r).reduce(((t,o)=>{let s=M(r[o],this.options.classes[o],e);var i,n,a,l;return s=M(s,e[`${o}Class`],e),i=o,n=s,a=this.options.classes,l=e,s=Object.keys(D).reduce(((e,t)=>{if(D[t](l)){const r=`${i}${y(t)}`,o=`${r}Class`;a[r]&&(e=M(e,"string"==typeof a[r]?g(a[r]):a[r],l)),l[o]&&(e=M(e,"string"==typeof l[o]?g(l[o]):l[`${r}Class`],l))}return e}),n),Object.assign(t,{[o]:s})}),{})}typeProps(e){const t=e=>Object.keys(e).reduce(((t,r)=>Array.isArray(e[r])?t.concat(e[r]):t),[]),r=t(this.options.slotProps);return this.options.library[e]?r.concat(t(this.options.library[e].slotProps||{})):r}slotProps(e,t,r){let o=Array.isArray(this.options.slotProps[t])?this.options.slotProps[t]:[];const s=this.options.library[e];return s&&s.slotProps&&Array.isArray(s.slotProps[t])&&(o=o.concat(s.slotProps[t])),o.reduce(((e,t)=>Object.assign(e,{[t]:r[t]})),{})}component(e){return!!Object.prototype.hasOwnProperty.call(this.options.library,e)&&this.options.library[e].component}slotComponent(e,t){const r=this.options.library[e];return r&&r.slotComponents&&r.slotComponents[t]?r.slotComponents[t]:this.options.slotComponents[t]}rules(e={}){return l(l({},this.options.rules),e)}i18n(e){if(e.$i18n)switch(typeof e.$i18n.locale){case"string":return e.$i18n.locale;case"function":return e.$i18n.locale()}return!1}getLocale(e){return this.selectedLocale||(this.selectedLocale=[this.options.locale,this.i18n(e),"en"].reduce(((e,t)=>{if(e)return e;if(t){const r=function(e){return e.split("-").reduce(((e,t)=>(e.length&&e.unshift(`${e[0]}-${t}`),e.length?e:[t])),[])}(t).find((e=>E(this.options.locales,e)));r&&(e=r)}return e}),!1)),this.selectedLocale}setLocale(e){E(this.options.locales,e)&&(this.options.locale=e,this.selectedLocale=e,this.registry.forEach(((e,t)=>{e.hasValidationErrors()})))}validationMessage(e,t,r){const o=this.options.locales[this.getLocale(r)];return Object.prototype.hasOwnProperty.call(o,e)?o[e](t):Object.prototype.hasOwnProperty.call(o,"default")?o.default(t):"Invalid field value"}register(e){"FormulateForm"===e.$options.name&&e.name&&this.registry.set(e.name,e)}deregister(e){"FormulateForm"===e.$options.name&&e.name&&this.registry.has(e.name)&&this.registry.delete(e.name)}handle(e,t,r=!1){const o=r?e:this.options.errorHandler(e,t);return t&&this.registry.has(t)&&this.registry.get(t).applyErrors({formErrors:g(o.formErrors),inputErrors:o.inputErrors||{}}),o}reset(e,t={}){this.resetValidation(e),this.setValues(e,t)}submit(e){this.registry.get(e).formSubmitted()}resetValidation(e){const t=this.registry.get(e);t.hideErrors(e),t.namedErrors=[],t.namedFieldErrors={}}setValues(e,t){if(t&&!Array.isArray(t)&&"object"==typeof t){this.registry.get(e).setValues(l({},t))}}getUploader(){return this.options.uploader||!1}getUploadUrl(){return this.options.uploadUrl||!1}getFileUrlKey(){return this.options.fileUrlKey||"url"}createUpload(e,t){return new A(e,t,this.options)}failedValidation(e){return this.options.failedValidation(this)}}}));
//# sourceMappingURL=formulate.umd.js.map
