"use strict";var de=Object.defineProperty,he=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var z=(e,t,r)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))H.call(t,r)&&z(e,r,t[r]);if($)for(var r of $(t))T.call(t,r)&&z(e,r,t[r]);return e},f=(e,t)=>he(e,me(t));var D=e=>typeof e=="symbol"?e:e+"",v=(e,t)=>{var r={};for(var o in e)H.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&$)for(var o of $(e))t.indexOf(o)<0&&T.call(e,o)&&(r[o]=e[o]);return r};const s=require("vue"),fe="FormulateInput",E=(e,t)=>({classification:e,component:fe+(t||e[0].toUpperCase()+e.substr(1))}),pe=f(c({},["text","email","number","color","date","hidden","month","password","search","tel","time","url","week","datetime-local"].reduce((e,t)=>f(c({},e),{[t]:E("text")}),{})),{range:E("slider"),textarea:E("textarea","TextArea"),checkbox:E("box"),radio:E("box"),submit:E("button"),button:E("button"),select:E("select"),file:E("file"),image:E("file"),group:E("group")});function ye(e,t){const r={};for(let o in e)r[o]=t(o,e[o]);return r}function g(e,t,r=!1){if(e===t)return!0;if(!e||!t)return!1;if(typeof e!="object"&&typeof t!="object")return e===t;const o=Object.keys(e),i=Object.keys(t),n=o.length;if(i.length!==n)return!1;for(let a=0;a<n;a++){const l=o[a];if(!r&&e[l]!==t[l]||r&&!g(e[l],t[l],r))return!1}return!0}function k(e){return typeof e=="string"?e.replace(/([_-][a-z0-9])/ig,t=>e.indexOf(t)!==0&&!/[_-]/.test(e[e.indexOf(t)-1])?t.toUpperCase().replace(/[_-]/,""):t):e}function M(e){return typeof e=="string"?e[0].toUpperCase()+e.substr(1):e}function b(e){return e?typeof e=="string"?[e]:Array.isArray(e)?e:typeof e=="object"?Object.values(e):[]:[]}function R(e,t){return typeof e=="string"?R(e.split("|"),t):Array.isArray(e)?e.map(r=>ge(r,t)).filter(r=>!!r):[]}function ge(e,t){if(typeof e=="function")return[e,[]];if(Array.isArray(e)&&e.length){e=e.map(i=>i);const[r,o]=q(e.shift());if(typeof r=="string"&&Object.hasOwn(t,r))return[t[r],e,r,o];if(typeof r=="function")return[r,e,r,o]}if(typeof e=="string"&&e){const r=e.split(":"),[o,i]=q(r.shift());if(Object.hasOwn(t,o))return[t[o],r.length?r.join(":").split(","):[],o,i];throw new Error(`Unknown validation rule ${e}`)}return!1}function q(e){return/^[\^]/.test(e.charAt(0))?[k(e.substr(1)),e.charAt(0)]:[k(e),null]}function be(e){const t=[],r=e.findIndex(([,,i])=>i.toLowerCase()==="bail"),o=e.findIndex(([,,i])=>i.toLowerCase()==="optional");if(o>=0){const i=e.splice(o,1);t.push(Object.defineProperty(i,"bail",{value:!0}))}if(r>=0){const i=e.splice(0,r+1).slice(0,-1);i.length&&t.push(i),e.map(n=>t.push(Object.defineProperty([n],"bail",{value:!0})))}else t.push(e);return t.reduce((i,n)=>{const a=(l,u=!1)=>{if(l.length<2)return Object.defineProperty([l],"bail",{value:u});const d=[],y=l.findIndex(([,,,x])=>x==="^");if(y>=0){const x=l.splice(0,y);x.length&&d.push(...a(x,u)),d.push(Object.defineProperty([l.shift()],"bail",{value:!0})),l.length&&d.push(...a(l,u))}else d.push(l);return d};return i.concat(a(n))},[])}function xe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ve(e){let t=`^${xe(e)}$`;const r={MM:"(0[1-9]|1[012])",M:"([1-9]|1[012])",DD:"([012][0-9]|3[01])",D:"([012]?[0-9]|3[01])",YYYY:"\\d{4}",YY:"\\d{2}"};return new RegExp(Object.keys(r).reduce((o,i)=>o.replace(i,r[i]),t))}function Ee(e){return e.split("-").reduce((r,o)=>(r.length&&r.unshift(`${r[0]}-${o}`),r.length?r:[o]),[])}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){return!h(e,"__id")||t?Object.defineProperty(e,"__id",Object.assign(Object.create(null),{value:t||Z(9)})):e}function V(e){return typeof e=="number"?!1:e===void 0||e===""||e===null||e===!1||Array.isArray(e)&&!e.some(t=>!V(t))||e&&!Array.isArray(e)&&typeof e=="object"&&V(Object.values(e))}function U(e,t){return Object.keys(e).reduce((r,o)=>{const i=k(o);return t.includes(i)&&(r[i]=e[o]),r},{})}function Ce(e,t=0){let r=3735928559^t,o=1103547991^t;for(let i=0,n;i<e.length;i++)n=e.charCodeAt(i),r=Math.imul(r^n,2654435761),o=Math.imul(o^n,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&o)+(r>>>0)}function ke(){let e;return function(r,o,i){e&&clearTimeout(e),e=setTimeout(()=>r.call(this,...o),i)}}function Z(e=13){return Math.random().toString(36).substring(2,e+2)}const Ve=/^(?:\w+:)?\/\/(\S+)$/,Fe=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,we=/^[^\s.]+\.\S{2,}$/;function Pe(e){if(typeof e!="string")return!1;const t=e.match(Ve);if(!t)return!1;const r=t[1];return r?!!(Fe.test(r)||we.test(r)):!1}class F{constructor(t,r,o={}){this.input=t,this.fileList=t.files,this.files=[],this.options=c({mimes:{}},o),this.results=!1,this.context=r,this.dataTransferCheck(),r&&r.uploadUrl&&(this.options.uploadUrl=r.uploadUrl),this.uploadPromise=null,Array.isArray(this.fileList)?this.rehydrateFileList(this.fileList):this.addFileList(this.fileList)}rehydrateFileList(t){const r=t.reduce((o,i)=>{const n=this.options?this.options.fileUrlKey:"url",a=i[n],l=a&&a.lastIndexOf(".")!==-1?a.substr(a.lastIndexOf(".")+1):!1,u=this.options.mimes[l]||!1;return o.push(Object.assign({},i,a?{name:i.name||a.substr(a.lastIndexOf("/")+1||0),type:i.type?i.type:u,previewData:a}:{})),o},[]);this.addFileList(r),this.results=this.mapUUID(t)}addFileList(t){for(let r=0;r<t.length;r++){const o=t[r],i=Z(),n=function(){this.removeFile(i)};this.files.push({progress:!1,error:!1,complete:!1,justFinished:!1,name:o.name||"file-upload",file:o,uuid:i,path:!1,removeFile:n.bind(this),previewData:o.previewData||!1})}}hasUploader(){return!!this.context.uploader}uploaderIsAxios(){return!!(this.hasUploader()&&typeof this.context.uploader.request=="function"&&typeof this.context.uploader.get=="function"&&typeof this.context.uploader.delete=="function"&&typeof this.context.uploader.post=="function")}getUploader(...t){if(this.uploaderIsAxios()){const r=new FormData;if(r.append(this.context.name||"file",t[0]),this.context.uploadUrl===!1)throw new Error("No uploadURL specified: https://vueformulate.com/guide/inputs/file/#props");return this.context.uploader.post(this.context.uploadUrl,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o=>{t[1](Math.round(o.loaded*100/o.total))}}).then(o=>o.data).catch(o=>t[2](o))}return this.context.uploader(...t)}upload(){return this.uploadPromise=this.uploadPromise?this.uploadPromise.then(()=>this.__performUpload()):this.__performUpload(),this.uploadPromise}__performUpload(){return new Promise((t,r)=>{if(!this.hasUploader())return r(new Error("No uploader has been defined"));Promise.all(this.files.map(o=>(o.error=!1,o.complete=!!o.path,o.path?Promise.resolve(o.path):this.getUploader(o.file,i=>{o.progress=i,this.context.rootEmit("file-upload-progress",i),i>=100&&(o.complete||(o.justFinished=!0,setTimeout(()=>{o.justFinished=!1},this.options.uploadJustCompleteDuration)),o.complete=!0,this.context.rootEmit("file-upload-complete",o))},i=>{o.progress=0,o.error=i,o.complete=!0,this.context.rootEmit("file-upload-error",i),r(i)},this.options)))).then(o=>{this.results=this.mapUUID(o),t(o)}).catch(o=>{throw new Error(o)})})}removeFile(t){const r=this.files.length;if(this.files=this.files.filter(o=>o&&o.uuid!==t),Array.isArray(this.results)&&(this.results=this.results.filter(o=>o&&o.__id!==t)),this.context.performValidation(),window&&this.fileList instanceof FileList&&this.supportsDataTransfers){const o=new DataTransfer;this.files.forEach(i=>o.items.add(i.file)),this.fileList=o.files,this.input.files=this.fileList}else this.fileList=this.fileList.filter(o=>o&&o.__id!==t);r>this.files.length&&this.context.rootEmit("file-removed",this.files)}mergeFileList(t){if(this.addFileList(t.files),this.supportsDataTransfers){const r=new DataTransfer;this.files.forEach(o=>{o.file instanceof File&&r.items.add(o.file)}),this.fileList=r.files,this.input.files=this.fileList,t.files=new DataTransfer().files}this.context.performValidation(),this.loadPreviews(),this.context.uploadBehavior!=="delayed"&&this.upload()}loadPreviews(){this.files.map(t=>{if(!t.previewData&&window&&window.FileReader&&/^image\//.test(t.file.type)){const r=new FileReader;r.onload=o=>Object.assign(t,{previewData:o.target.result}),r.readAsDataURL(t.file)}})}dataTransferCheck(){try{new DataTransfer,this.supportsDataTransfers=!0}catch(t){this.supportsDataTransfers=!1}}getFiles(){return this.files}mapUUID(t){return t.map((r,o)=>(this.files[o].path=r!==void 0?r:!1,r&&S(r,this.files[o].uuid)))}toString(){const t=this.files.length?this.files.length+" files":"empty";return this.results?JSON.stringify(this.results,null,"  "):`FileUpload(${t})`}}const Be={accepted:function({value:e}){return Promise.resolve(["yes","on","1",1,!0,"true"].includes(e))},after:function({value:e},t=!1){const r=Date.parse(t||new Date),o=Date.parse(e);return Promise.resolve(Number.isNaN(o)?!1:o>r)},alpha:function({value:e},t="default"){const r={default:/^[a-zA-ZÀ-ÖØ-öø-ÿĄąĆćĘęŁłŃńŚśŹźŻż]+$/,latin:/^[a-z]+$/i},o=Object.prototype.hasOwnProperty.call(r,t)?t:"default";return Promise.resolve(r[o].test(e))},alphanumeric:function({value:e},t="default"){const r={default:/^[a-zA-Z0-9À-ÖØ-öø-ÿĄąĆćĘęŁłŃńŚśŹźŻż]+$/,latin:/^[a-z0-9]+$/i},o=Object.prototype.hasOwnProperty.call(r,t)?t:"default";return Promise.resolve(r[o].test(e))},before:function({value:e},t=!1){const r=Date.parse(t||new Date),o=Date.parse(e);return Promise.resolve(Number.isNaN(o)?!1:o<r)},between:function({value:e},t=0,r=10,o){return Promise.resolve(t===null||r===null||Number.isNaN(t)||Number.isNaN(r)?!1:!Number.isNaN(e)&&o!=="length"||o==="value"?(e=Number(e),t=Number(t),r=Number(r),e>t&&e<r):typeof e=="string"||o==="length"?(e=Number.isNaN(e)?e:e.toString(),e.length>t&&e.length<r):!1)},confirm:function({value:e,getGroupValues:t,name:r},o){return Promise.resolve((()=>{const i=t();var n=o;return n||(n=r.endsWith("_confirm")?r.substr(0,r.length-8):`${r}_confirm`),i[n]===e})())},date:function({value:e},t=!1){return Promise.resolve(t&&typeof t=="string"?ve(t).test(e):!Number.isNaN(Date.parse(e)))},email:function({value:e}){const t=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return Promise.resolve(t.test(e))},endsWith:function({value:e},...t){return Promise.resolve(typeof e=="string"&&t.length?t.find(r=>e.endsWith(r))!==void 0:typeof e=="string"&&t.length===0)},in:function({value:e},...t){return Promise.resolve(t.find(r=>typeof r=="object"?g(r,e):r===e)!==void 0)},matches:function({value:e},...t){return Promise.resolve(!!t.find(r=>(typeof r=="string"&&r.substr(0,1)==="/"&&r.substr(-1)==="/"&&(r=new RegExp(r.substr(1,r.length-2))),r instanceof RegExp?r.test(e):r===e)))},mime:function({value:e},...t){return Promise.resolve((()=>{if(e instanceof F){const r=e.getFiles();for(let o=0;o<r.length;o++){const i=r[o].file;if(!t.includes(i.type))return!1}}return!0})())},min:function({value:e},t=1,r){return Promise.resolve(Array.isArray(e)?(t=Number.isNaN(t)?t:Number(t),e.length>=t):!Number.isNaN(e)&&r!=="length"||r==="value"?(e=Number.isNaN(e)?e:Number(e),e>=t):typeof e=="string"||r==="length"?(e=Number.isNaN(e)?e:e.toString(),e.length>=t):!1)},max:function({value:e},t=10,r){return Promise.resolve(Array.isArray(e)?(t=Number.isNaN(t)?t:Number(t),e.length<=t):!Number.isNaN(e)&&r!=="length"||r==="value"?(e=Number.isNaN(e)?e:Number(e),e<=t):typeof e=="string"||r==="length"?(e=Number.isNaN(e)?e:e.toString(),e.length<=t):!1)},not:function({value:e},...t){return Promise.resolve(t.find(r=>typeof r=="object"?g(r,e):r===e)===void 0)},number:function({value:e}){return Promise.resolve(!Number.isNaN(e))},required:function({value:e},t="pre"){return Promise.resolve(Array.isArray(e)?!!e.length:e instanceof F?e.getFiles().length>0:typeof e=="string"?t==="trim"?!!e.trim():!!e:typeof e=="object"?e?!!Object.keys(e).length:!1:!0)},startsWith:function({value:e},...t){return Promise.resolve(typeof e=="string"&&t.length?t.find(r=>e.startsWith(r))!==void 0:typeof e=="string"&&t.length===0)},url:function({value:e}){return Promise.resolve(Pe(e))},bail:function(){return Promise.resolve(!0)},optional:function({value:e}){return Promise.resolve(!V(e))}},A="image/",Ae={csv:"text/csv",gif:A+"gif",jpg:A+"jpeg",jpeg:A+"jpeg",png:A+"png",pdf:"application/pdf",svg:A+"svg+xml"},Q=["outer","wrapper","label","element","input","help","errors","error","decorator","rangeValue","uploadArea","uploadAreaMask","files","file","fileName","fileAdd","fileAddInput","fileRemove","fileProgress","fileUploadError","fileImagePreview","fileImagePreviewImage","fileProgressInner","grouping","groupRepeatable","groupRepeatableRemove","groupAddMore","form","formErrors","formError"],L={hasErrors:e=>e.hasErrors,hasValue:e=>e.hasValue,isValid:e=>e.isValid},Se=(e,t)=>{const r=e.replace(/[A-Z]/g,a=>"-"+a.toLowerCase()),o=["form","file"].includes(r.substr(0,4))?"":"-input",i=["decorator","range-value"].includes(r)?"-element":"",n=`formulate${o}${i}${r!=="outer"?`-${r}`:""}`;return r==="input"?[]:[n].concat(Oe(n,e,t))},Oe=(e,t,r)=>{const o=[];switch(t){case"label":o.push(`${e}--${r.labelPosition}`);break;case"element":const i=r.classification==="group"?"group":r.type;o.push(`${e}--${i}`),i==="group"&&o.push("formulate-input-group");break;case"help":o.push(`${e}--${r.helpPosition}`);break;case"form":r.name&&o.push(`${e}--${r.name}`)}return o},X=(()=>{const e=[""].concat(Object.keys(L).map(t=>M(t)));return Q.reduce((t,r)=>t.concat(e.reduce((o,i)=>(o.push(`${r}${i}Class`),o),[])),[])})();function N(e,t,r){switch(typeof t){case"string":return t;case"function":return t(r,b(e));case"object":if(Array.isArray(t))return b(e).concat(t);default:return e}}function $e(e,t,r,o){return Object.keys(L).reduce((i,n)=>{if(L[n](o)){const a=`${e}${M(n)}`,l=`${a}Class`;if(r[a]){const u=typeof r[a]=="string"?b(r[a]):r[a];i=N(i,u,o)}if(o[l]){const u=typeof o[l]=="string"?b(o[l]):o[`${a}Class`];i=N(i,u,o)}}return i},t)}function De(e){return Q.reduce((t,r)=>Object.assign(t,{[r]:Se(r,e)}),{})}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function K(e){return Object.prototype.toString.call(e)==="[object Object]"}function W(e){var t,r;return K(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(K(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function p(e){return typeof e=="string"?e[0].toUpperCase()+e.substr(1):e}var Ne={accepted:function(e){return"Please accept the "+e.name+"."},after:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?p(t)+" must be after "+r[0]+".":p(t)+" must be a later date."},alpha:function(e){return p(e.name)+" can only contain alphabetical characters."},alphanumeric:function(e){return p(e.name)+" can only contain letters and numbers."},before:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?p(t)+" must be before "+r[0]+".":p(t)+" must be an earlier date."},between:function(e){var t=e.name,r=e.value,o=e.args,i=!(!Array.isArray(o)||!o[2])&&o[2];return!isNaN(r)&&i!=="length"||i==="value"?p(t)+" must be between "+o[0]+" and "+o[1]+".":p(t)+" must be between "+o[0]+" and "+o[1]+" characters long."},confirm:function(e){var t=e.name;return e.args,p(t)+" does not match."},date:function(e){var t=e.name,r=e.args;return Array.isArray(r)&&r.length?p(t)+" is not a valid date, please use the format "+r[0]:p(t)+" is not a valid date."},default:function(e){return e.name,"This field isn’t valid."},email:function(e){e.name;var t=e.value;return t?"“"+t+"” is not a valid email address.":"Please enter a valid email address."},endsWith:function(e){e.name;var t=e.value;return t?"“"+t+"” doesn’t end with a valid value.":"This field doesn’t end with a valid value."},in:function(e){var t=e.name,r=e.value;return typeof r=="string"&&r?"“"+p(r)+"” is not an allowed "+t+".":"This is not an allowed "+t+"."},matches:function(e){return p(e.name)+" is not an allowed value."},max:function(e){var t=e.name,r=e.value,o=e.args;if(Array.isArray(r))return"You may only select "+o[0]+" "+t+".";var i=!(!Array.isArray(o)||!o[1])&&o[1];return!isNaN(r)&&i!=="length"||i==="value"?p(t)+" must be less than or equal to "+o[0]+".":p(t)+" must be less than or equal to "+o[0]+" characters long."},mime:function(e){var t=e.name,r=e.args;return p(t)+" must be of the type: "+(r[0]||"No file formats allowed.")},min:function(e){var t=e.name,r=e.value,o=e.args;if(Array.isArray(r))return"You need at least "+o[0]+" "+t+".";var i=!(!Array.isArray(o)||!o[1])&&o[1];return!isNaN(r)&&i!=="length"||i==="value"?p(t)+" must be at least "+o[0]+".":p(t)+" must be at least "+o[0]+" characters long."},not:function(e){var t=e.name;return"“"+e.value+"” is not an allowed "+t+"."},number:function(e){return p(e.name)+" must be a number."},required:function(e){return p(e.name)+" is required."},startsWith:function(e){e.name;var t=e.value;return t?"“"+t+"” doesn’t start with a valid value.":"This field doesn’t start with a valid value."},url:function(e){return e.name,"Please include a valid url."}};function je(e){var t;e.extend({locales:(t={},t.en=Ne,t)})}function Ie(e,t,r,o){return new Promise((i,n)=>{const a=(o.fauxUploaderDuration||1500)*(.5+Math.random()),l=performance.now(),u=()=>setTimeout(()=>{const d=performance.now()-l,y=Math.min(100,Math.round(d/a*100));if(t(y),y>=100)return i({url:"http://via.placeholder.com/350x150.png",name:e.name});u()},20);u()})}const Re={inheritAttrs:!1,functional:!0,render(e,{props:t,data:r,parent:o,children:i}){for(var n=o,y=t,{name:a,forceWrap:l,context:u}=y,d=v(y,["name","forceWrap","context"]);n&&n.$options.name!=="FormulateInput";)n=n.$parent;if(!n)return null;if(n.$scopedSlots&&n.$scopedSlots[t.name])return n.$scopedSlots[t.name](c(c({},u),d));if(Array.isArray(i)&&(i.length>1||l&&i.length>0)){const x=r.attrs,{name:P,context:j}=x,B=v(x,["name","context"]);return e("div",f(c({},r),{attrs:B}),i)}else if(Array.isArray(i)&&i.length===1)return i[0];return null}};function Le(e,t=0,r={}){if(e&&typeof e=="object"&&!Array.isArray(e)){let o=e,{children:i=null,component:n="FormulateInput",depth:a=1,key:l=null}=o,u=v(o,["children","component","depth","key"]);const d=u.class||{};delete u.class;const y={},x=Object.keys(u).reduce((C,O)=>/^@/.test(O)?Object.assign(C,{[O.substr(1)]:u[O]}):C,{});Object.keys(x).forEach(C=>{delete u[`@${C}`],y[C]=Me(C,x[C],r)});const P=n==="FormulateInput"?u.type||"text":n,j=u.name||P||"el";l||(u.id?l=u.id:n!=="FormulateInput"&&typeof i=="string"?l=`${P}-${Ce(i)}`:l=`${P}-${j}-${a}${u.name?"":"-"+t}`);const B=Array.isArray(i)?i.map(C=>Object.assign(C,{depth:a+1})):i;return Object.assign({key:l,depth:a,attrs:u,component:n,class:d,on:y},B?{children:B}:{})}return null}function ee(e,t,r){return Array.isArray(t)?t.map((o,i)=>{const n=Le(o,i,r);return e(n.component,{attrs:n.attrs,class:n.class,key:n.key,on:n.on},n.children?ee(e,n.children,r):null)}):t}function Me(e,t,r){return function(...o){if(typeof t=="function")return t.call(this,...o);if(typeof t=="string"&&h(r,t))return r[t].call(this,...o);if(h(r,e))return r[e].call(this,...o)}}const Ue={functional:!0,render:(e,{props:t,listeners:r})=>ee(e,t.schema,r)};class _e{constructor(t){this.registry=new Map,this.errors={},this.ctx=t}add(t,r){return this.registry.set(t,r),this.errors=f(c({},this.errors),{[t]:r.getErrorObject().hasErrors}),this}remove(t){this.ctx.deps.delete(this.registry.get(t)),this.ctx.deps.forEach(l=>l.delete(t));let r=this.ctx.keepModelData;!r&&this.registry.has(t)&&this.registry.get(t).keepModelData!=="inherit"&&(r=this.registry.get(t).keepModelData),this.ctx.preventCleanup&&(r=!0),this.registry.delete(t);const n=this.errors,{[t]:o}=n,i=v(n,[D(t)]);if(this.errors=i,!r){const a=this.ctx.proxy,{[t]:l}=a,u=v(a,[D(t)]);this.ctx.uuid&&S(u,this.ctx.uuid),this.ctx.proxy=u,this.ctx.$emit("input",this.ctx.proxy)}return this}has(t){return this.registry.has(t)}get(t){return this.registry.get(t)}map(t){const r={};return this.registry.forEach((o,i)=>Object.assign(r,{[i]:t(o,i)})),r}keys(){return Array.from(this.registry.keys())}register(t,r){if(h(r.$options.propsData,"ignored"))return!1;if(this.registry.has(t))return this.ctx.$nextTick(()=>this.registry.has(t)?!1:this.register(t,r)),!1;this.add(t,r);const o=h(r.$options.propsData,"formulateValue"),i=h(r.$options.propsData,"value"),n=this.ctx.debounce||this.ctx.debounceDelay||this.ctx.context&&this.ctx.context.debounceDelay;n&&!h(r.$options.propsData,"debounce")&&(r.debounceDelay=n),!o&&this.ctx.hasInitialValue&&!V(this.ctx.initialValues[t])?r.context.model=this.ctx.initialValues[t]:(o||i)&&!g(r.proxy,this.ctx.initialValues[t],!0)&&this.ctx.setFieldValue(t,r.proxy),this.childrenShouldShowErrors&&(r.formShouldShowErrors=!0)}reduce(t,r){return this.registry.forEach((o,i)=>{r=t(r,o,i)}),r}dataProps(){return{proxy:{},registry:this,register:this.register.bind(this),deregister:t=>this.remove(t),childrenShouldShowErrors:!1,errorObservers:[],deps:new Map,preventCleanup:!1}}}function te(e){return new _e(e).dataProps()}function re(e={}){return{hasInitialValue(){return this.formulateValue&&typeof this.formulateValue=="object"||this.values&&typeof this.values=="object"||this.isGrouping&&typeof this.context.model[this.index]=="object"},isVmodeled(){return!!(this.$options.propsData.hasOwnProperty("formulateValue")&&this._events&&Array.isArray(this._events.input)&&this._events.input.length)},initialValues(){return h(this.$options.propsData,"formulateValue")&&typeof this.formulateValue=="object"?c({},this.formulateValue):h(this.$options.propsData,"values")&&typeof this.values=="object"?c({},this.values):this.isGrouping&&typeof this.context.model[this.index]=="object"?this.context.model[this.index]:{}},mergedGroupErrors(){const t=/^([^.\d+].*?)\.(\d+\..+)$/;return Object.keys(this.mergedFieldErrors).filter(r=>t.test(r)).reduce((r,o)=>{let[,i,n]=o.match(t);return r[i]||(r[i]={}),Object.assign(r[i],{[n]:this.mergedFieldErrors[o]}),r},{})}}}function se(e=[]){const t={applyInitialValues(){this.hasInitialValue&&(this.proxy=c({},this.initialValues))},setFieldValue(r,o){if(o===void 0){const i=this.proxy,{[r]:n}=i,a=v(i,[D(r)]);this.proxy=a}else Object.assign(this.proxy,{[r]:o});this.$emit("input",c({},this.proxy))},valueDeps(r){return Object.keys(this.proxy).reduce((o,i)=>Object.defineProperty(o,i,{enumerable:!0,get:()=>{const n=this.registry.get(i);return this.deps.set(r,this.deps.get(r)||new Set),n&&(this.deps.set(n,this.deps.get(n)||new Set),this.deps.get(n).add(r.name)),this.deps.get(r).add(i),this.proxy[i]}}),Object.create(null))},validateDeps(r){this.deps.has(r)&&this.deps.get(r).forEach(o=>this.registry.has(o)&&this.registry.get(o).performValidation())},hasValidationErrors(){return Promise.all(this.registry.reduce((r,o,i)=>(r.push(o.performValidation()&&o.getValidationErrors()),r),[])).then(r=>r.some(o=>o.hasErrors))},showErrors(){this.childrenShouldShowErrors=!0,this.registry.map(r=>{r.formShouldShowErrors=!0})},hideErrors(){this.childrenShouldShowErrors=!1,this.registry.map(r=>{r.formShouldShowErrors=!1,r.behavioralErrorVisibility=!1})},setValues(r){Array.from(new Set(Object.keys(r||{}).concat(Object.keys(this.proxy)))).forEach(i=>{const n=this.registry.has(i)&&this.registry.get(i);let a=r?r[i]:void 0;n&&!g(n.proxy,a,!0)&&(n.context.model=a),g(a,this.proxy[i],!0)||this.setFieldValue(i,a)})},updateValidation(r){h(this.registry.errors,r.name)&&(this.registry.errors[r.name]=r.hasErrors),this.$emit("validation",r)},addErrorObserver(r){this.errorObservers.find(o=>r.callback===o.callback)||(this.errorObservers.push(r),r.type==="form"?r.callback(this.mergedFormErrors):r.type==="group"&&h(this.mergedGroupErrors,r.field)?r.callback(this.mergedGroupErrors[r.field]):h(this.mergedFieldErrors,r.field)&&r.callback(this.mergedFieldErrors[r.field]))},removeErrorObserver(r){this.errorObservers=this.errorObservers.filter(o=>o.callback!==r)}};return Object.keys(t).reduce((r,o)=>e.includes(o)?r:f(c({},r),{[o]:t[o]}),{})}function oe(){return{mergedFieldErrors:{handler(e){this.errorObservers.filter(t=>t.type==="input").forEach(t=>t.callback(e[t.field]||[]))},immediate:!0},mergedGroupErrors:{handler(e){this.errorObservers.filter(t=>t.type==="group").forEach(t=>t.callback(e[t.field]||{}))},immediate:!0}}}function ie(e,t=[]){const r={formulateSetter:e.setFieldValue,formulateRegister:e.register,formulateDeregister:e.deregister,formulateFieldValidation:e.updateValidation,getFormValues:e.valueDeps,getGroupValues:e.valueDeps,validateDependents:e.validateDeps,observeErrors:e.addErrorObserver,removeErrorObserver:e.removeErrorObserver};return Object.keys(r).filter(i=>!t.includes(i)).reduce((i,n)=>Object.assign(i,{[n]:r[n]}),{})}function ne(e){if(typeof e!="object")return e;const r=Array.isArray(e)?[]:{};for(const o in e)e[o]instanceof F||isValueType(e[o])?r[o]=e[o]:r[o]=ne(e[o]);return r}class Y{constructor(t){this.form=t}hasValidationErrors(){return this.form.hasValidationErrors()}values(){return new Promise((t,r)=>{const o=[],i=ne(this.form.proxy);for(const n in i)typeof this.form.proxy[n]=="object"&&this.form.proxy[n]instanceof F&&o.push(this.form.proxy[n].upload().then(a=>Object.assign(i,{[n]:a})));Promise.all(o).then(()=>t(i)).catch(n=>r(n))})}}const m=(e,t)=>{const r=e.__vccOpts||e;for(const[o,i]of t)r[o]=i;return r},Ge={name:"FormulateForm",inheritAttrs:!1,provide(){return f(c({},ie(this,["getGroupValues"])),{observeContext:this.addContextObserver,removeContextObserver:this.removeContextObserver})},model:{prop:"formulateValue",event:"input"},props:{name:{type:[String,Boolean],default:!1},formulateValue:{type:Object,default:()=>({})},values:{type:[Object,Boolean],default:!1},errors:{type:[Object,Boolean],default:!1},formErrors:{type:Array,default:()=>[]},schema:{type:[Array,Boolean],default:!1},keepModelData:{type:[Boolean,String],default:!1},invalidMessage:{type:[Boolean,Function,String],default:!1},debounce:{type:[Boolean,Number],default:!1}},data(){return f(c({},te(this)),{formShouldShowErrors:!1,contextObservers:[],namedErrors:[],namedFieldErrors:{},isLoading:!1,hasFailedSubmit:!1})},computed:f(c({},re()),{schemaListeners(){const r=this.$listeners,{submit:e}=r;return v(r,["submit"])},pseudoProps(){return U(this.$attrs,X.filter(e=>/^form/.test(e)))},attributes(){const e=Object.keys(this.$attrs).filter(t=>!h(this.pseudoProps,k(t))).reduce((t,r)=>f(c({},t),{[r]:this.$attrs[r]}),{});return typeof this.name=="string"&&Object.assign(e,{name:this.name}),e},hasErrors(){return Object.values(this.registry.errors).some(e=>e)},isValid(){return!this.hasErrors},formContext(){return{errors:this.mergedFormErrors,pseudoProps:this.pseudoProps,hasErrors:this.hasErrors,value:this.proxy,hasValue:!V(this.proxy),isValid:this.isValid,isLoading:this.isLoading,classes:this.classes}},classes(){return this.$formulate.classes(f(c(c({},this.$props),this.pseudoProps),{value:this.proxy,errors:this.mergedFormErrors,hasErrors:this.hasErrors,hasValue:!V(this.proxy),isValid:this.isValid,isLoading:this.isLoading,type:"form",classification:"form",attrs:this.$attrs}))},invalidErrors(){if(this.hasFailedSubmit&&this.hasErrors)switch(typeof this.invalidMessage){case"string":return[this.invalidMessage];case"object":return Array.isArray(this.invalidMessage)?this.invalidMessage:[];case"function":const e=this.invalidMessage(this.failingFields);return Array.isArray(e)?e:[e]}return[]},mergedFormErrors(){return this.formErrors.concat(this.namedErrors).concat(this.invalidErrors)},mergedFieldErrors(){const e={};if(this.errors)for(const t in this.errors)e[t]=b(this.errors[t]);for(const t in this.namedFieldErrors)e[t]=b(this.namedFieldErrors[t]);return e},hasFormErrorObservers(){return!!this.errorObservers.filter(e=>e.type==="form").length},failingFields(){return Object.keys(this.registry.errors).reduce((e,t)=>c(c({},e),this.registry.errors[t]?{[t]:this.registry.get(t)}:{}),{})}}),watch:f(c({},oe()),{formulateValue:{handler(e){this.isVmodeled&&e&&typeof e=="object"&&this.setValues(e)},deep:!0},mergedFormErrors(e){this.errorObservers.filter(t=>t.type==="form").forEach(t=>t.callback(e))}}),created(){this.$formulate.register(this),this.applyInitialValues(),this.$emit("created",this)},destroyed(){this.$formulate.deregister(this)},methods:f(c({},se()),{applyErrors({formErrors:e,inputErrors:t}){this.namedErrors=e,this.namedFieldErrors=t},addContextObserver(e){this.contextObservers.find(t=>t===e)||(this.contextObservers.push(e),e(this.formContext))},removeContextObserver(e){this.contextObservers.filter(t=>t!==e)},registerErrorComponent(e){this.errorComponents.includes(e)||this.errorComponents.push(e)},formSubmitted(){if(this.isLoading)return;this.isLoading=!0,this.showErrors();const e=new Y(this),t=this.$listeners["submit-raw"]||this.$listeners.submitRaw,r=typeof t=="function"?t(e):Promise.resolve(e);return(r instanceof Promise?r:Promise.resolve(r)).then(i=>{const n=i instanceof Y?i:e;return n.hasValidationErrors().then(a=>[n,a])}).then(([i,n])=>!n&&typeof this.$listeners.submit=="function"?i.values().then(a=>{this.hasFailedSubmit=!1;const l=this.$listeners.submit(a);return(l instanceof Promise?l:Promise.resolve()).then(()=>a)}):this.onFailedValidation()).finally(()=>{this.isLoading=!1})},onFailedValidation(){return this.hasFailedSubmit=!0,this.$emit("failed-validation",c({},this.failingFields)),this.$formulate.failedValidation(this)}})};function ze(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSchema"),l=s.resolveComponent("FormulateErrors");return s.openBlock(),s.createElementBlock("form",s.mergeProps({class:n.classes.form},n.attributes,{onSubmit:t[0]||(t[0]=s.withModifiers((...u)=>n.formSubmitted&&n.formSubmitted(...u),["prevent"]))}),[r.schema?(s.openBlock(),s.createBlock(a,s.mergeProps({key:0,schema:r.schema},s.toHandlers(n.schemaListeners)),null,16,["schema"])):s.createCommentVNode("",!0),n.hasFormErrorObservers?s.createCommentVNode("",!0):(s.openBlock(),s.createBlock(l,{key:1,context:n.formContext},null,8,["context"])),s.renderSlot(e.$slots,"default",s.normalizeProps(s.guardReactiveProps(n.formContext)))],16)}const He=m(Ge,[["render",ze]]),Te={context(){return kt.call(this,c({addLabel:this.logicalAddLabel,removeLabel:this.logicalRemoveLabel,attributes:this.elementAttributes,blurHandler:Et.bind(this),classification:this.classification,component:this.component,debounceDelay:this.debounceDelay,disableErrors:this.disableErrors,errors:this.explicitErrors,formShouldShowErrors:this.formShouldShowErrors,getValidationErrors:this.getValidationErrors.bind(this),groupErrors:this.mergedGroupErrors,hasGivenName:this.hasGivenName,hasValue:this.hasValue,hasLabel:this.label&&this.classification!=="button",hasValidationErrors:this.hasValidationErrors.bind(this),help:this.help,helpPosition:this.logicalHelpPosition,id:this.id||this.defaultId,ignored:h(this.$options.propsData,"ignored"),isValid:this.isValid,imageBehavior:this.imageBehavior,label:this.label,labelPosition:this.logicalLabelPosition,limit:this.limit===1/0?this.limit:parseInt(this.limit,10),name:this.nameOrFallback,minimum:parseInt(this.minimum,10),performValidation:this.performValidation.bind(this),pseudoProps:this.pseudoProps,preventWindowDrops:this.preventWindowDrops,removePosition:this.mergedRemovePosition,repeatable:this.repeatable,rootEmit:this.$emit.bind(this),rules:this.ruleDetails,setErrors:this.setErrors.bind(this),showValidationErrors:this.showValidationErrors,slotComponents:this.slotComponents,slotProps:this.slotProps,type:this.type,uploadBehavior:this.uploadBehavior,uploadUrl:this.mergedUploadUrl,uploader:this.uploader||this.$formulate.getUploader(),validationErrors:this.validationErrors,value:this.value,visibleValidationErrors:this.visibleValidationErrors,isSubField:this.isSubField,classes:this.classes},this.typeContext))},nameOrFallback:ut,hasGivenName:ct,typeContext:We,elementAttributes:Qe,logicalLabelPosition:et,logicalHelpPosition:tt,mergedRemovePosition:rt,mergedUploadUrl:ot,mergedGroupErrors:it,hasValue:dt,visibleValidationErrors:lt,slotComponents:xt,logicalAddLabel:qe,logicalRemoveLabel:Ke,classes:Xe,showValidationErrors:at,slotProps:vt,pseudoProps:Ye,isValid:gt,ruleDetails:nt,isVmodeled:ht,mergedValidationName:st,explicitErrors:ft,allErrors:pt,hasVisibleErrors:bt,hasErrors:yt,filteredAttributes:Ze,typeProps:Je,listeners:Ct};function qe(){if(this.classification==="file")return this.addLabel===!0?`+ Add ${M(this.type)}`:this.addLabel;if(typeof this.addLabel=="boolean"){const e=this.label||this.name;return`+ ${typeof e=="string"?e+" ":""} Add`}return this.addLabel}function Ke(){return typeof this.removeLabel=="boolean"?"Remove":this.removeLabel}function We(){switch(this.classification){case"select":return{options:I.call(this,this.options),optionGroups:this.optionGroups?ye(this.optionGroups,(e,t)=>I.call(this,t)):!1,placeholder:this.$attrs.placeholder||!1};case"slider":return{showValue:!!this.showValue};default:return this.options?{options:I.call(this,this.options)}:{}}}function Ye(){return U(this.localAttributes,X)}function Je(){return U(this.localAttributes,this.$formulate.typeProps(this.type))}function Ze(){const e=Object.keys(this.pseudoProps).concat(Object.keys(this.typeProps));return Object.keys(this.localAttributes).reduce((t,r)=>(e.includes(k(r))||(t[r]=this.localAttributes[r]),t),{})}function Qe(){const e=Object.assign({},this.filteredAttributes);return this.id?e.id=this.id:e.id=this.defaultId,this.hasGivenName&&(e.name=this.name),this.help&&!h(e,"aria-describedby")&&(e["aria-describedby"]=`${e.id}-help`),this.classes.input&&(!Array.isArray(this.classes.input)||this.classes.input.length)&&(e.class=this.classes.input),e}function Xe(){return this.$formulate.classes(f(c(c({},this.$props),this.pseudoProps),{attrs:this.filteredAttributes,classification:this.classification,hasErrors:this.hasVisibleErrors,hasValue:this.hasValue,helpPosition:this.logicalHelpPosition,isValid:this.isValid,labelPosition:this.logicalLabelPosition,type:this.type,value:this.proxy}))}function et(){if(this.labelPosition)return this.labelPosition;switch(this.classification){case"box":return"after";default:return"before"}}function tt(){if(this.helpPosition)return this.helpPosition;switch(this.classification){case"group":return"before";default:return"after"}}function rt(){return this.type==="group"?this.removePosition||"before":!1}function st(){const e=this.$formulate.options.validationNameStrategy||["validationName","name","label","type"];if(Array.isArray(e)){const t=e.find(r=>typeof this[r]=="string");return this[t]}return typeof e=="function"?e.call(this,this):this.type}function ot(){return this.uploadUrl||this.$formulate.getUploadUrl()}function it(){const e=Object.keys(this.groupErrors).concat(Object.keys(this.localGroupErrors)),t=/^(\d+)\.(.*)$/;return Array.from(new Set(e)).filter(r=>t.test(r)).reduce((r,o)=>{let[,i,n]=o.match(t);h(r,i)||(r[i]={});const a=Array.from(new Set(b(this.groupErrors[o]).concat(b(this.localGroupErrors[o]))));return r[i]=Object.assign(r[i],{[n]:a}),r},{})}function nt(){return this.parsedValidation.map(([,e,t])=>({ruleName:t,args:e}))}function at(){return this.showErrors||this.formShouldShowErrors||this.classification==="file"&&this.uploadBehavior==="live"&&ae.call(this)?!0:this.behavioralErrorVisibility}function lt(){return this.showValidationErrors&&this.validationErrors.length?this.validationErrors:[]}function ut(){if(this.name===!0&&this.classification!=="button"){const e=this.id||this.elementAttributes.id.replace(/[^0-9]/g,"");return`${this.type}_${e}`}return this.name===!1||this.classification==="button"&&this.name===!0?!1:this.name}function ct(){return typeof this.name!="boolean"}function dt(){const e=this.proxy;return this.classification==="box"&&this.isGrouped||this.classification==="select"&&h(this.filteredAttributes,"multiple")?Array.isArray(e)?e.some(t=>t===this.value):this.value===e:!V(e)}function ht(){return!!(this.$options.propsData.hasOwnProperty("formulateValue")&&this._events&&Array.isArray(this._events.input)&&this._events.input.length)}function I(e){return e?(Array.isArray(e)?e:Object.keys(e).map(r=>({label:e[r],value:r}))).map(mt.bind(this)):[]}function mt(e){return typeof e=="number"&&(e=String(e)),typeof e=="string"?{label:e,value:e,id:`${this.elementAttributes.id}_${e}`}:(typeof e.value=="number"&&(e.value=String(e.value)),Object.assign({value:"",label:"",id:`${this.elementAttributes.id}_${e.value||e.label}`},e))}function ft(){return b(this.errors).concat(this.localErrors).concat(b(this.error))}function pt(){return this.explicitErrors.concat(b(this.validationErrors))}function yt(){return!!this.allErrors.length}function gt(){return!this.hasErrors}function bt(){return Array.isArray(this.validationErrors)&&this.validationErrors.length&&this.showValidationErrors||!!this.explicitErrors.length}function xt(){const e=this.$formulate.slotComponent.bind(this.$formulate);return{addMore:e(this.type,"addMore"),buttonContent:e(this.type,"buttonContent"),errors:e(this.type,"errors"),file:e(this.type,"file"),help:e(this.type,"help"),label:e(this.type,"label"),prefix:e(this.type,"prefix"),remove:e(this.type,"remove"),repeatable:e(this.type,"repeatable"),suffix:e(this.type,"suffix"),uploadAreaMask:e(this.type,"uploadAreaMask")}}function vt(){const e=this.$formulate.slotProps.bind(this.$formulate);return{label:e(this.type,"label",this.typeProps),help:e(this.type,"help",this.typeProps),errors:e(this.type,"errors",this.typeProps),repeatable:e(this.type,"repeatable",this.typeProps),addMore:e(this.type,"addMore",this.typeProps),remove:e(this.type,"remove",this.typeProps),component:e(this.type,"component",this.typeProps)}}function Et(){(this.errorBehavior==="blur"||this.errorBehavior==="value")&&(this.behavioralErrorVisibility=!0),this.$nextTick(()=>this.$emit("blur-context",this.context))}function Ct(){const r=this.$listeners,{input:e}=r;return v(r,["input"])}function kt(e){return Object.defineProperty(e,"model",{get:ae.bind(this),set:t=>{if(!this.mntd||!this.debounceDelay)return J.call(this,t);this.dSet(J,[t],this.debounceDelay)},enumerable:!0})}function ae(){const e=this.isVmodeled?"formulateValue":"proxy";return this.type==="checkbox"&&!Array.isArray(this[e])&&this.options?[]:!this[e]&&this[e]!==0?"":this[e]}function J(e){let t=!1;g(e,this.proxy,this.type==="group")||(this.proxy=e,t=!0),!this.context.ignored&&this.context.name&&typeof this.formulateSetter=="function"&&this.formulateSetter(this.context.name,e),t&&this.$emit("input",e)}const Vt={name:"FormulateInput",inheritAttrs:!1,provide(){return{formulateRegisterRule:this.registerRule,formulateRemoveRule:this.removeRule}},inject:{formulateSetter:{default:void 0},formulateFieldValidation:{default:()=>()=>({})},formulateRegister:{default:void 0},formulateDeregister:{default:void 0},getFormValues:{default:()=>()=>({})},getGroupValues:{default:void 0},validateDependents:{default:()=>()=>{}},observeErrors:{default:void 0},removeErrorObserver:{default:void 0},isSubField:{default:()=>()=>!1}},model:{prop:"formulateValue",event:"input"},props:{type:{type:String,default:"text"},name:{type:[String,Boolean],default:!0},formulateValue:{default:""},value:{default:!1},options:{type:[Object,Array,Boolean],default:!1},optionGroups:{type:[Object,Boolean],default:!1},id:{type:[String,Boolean,Number],default:!1},label:{type:[String,Boolean],default:!1},labelPosition:{type:[String,Boolean],default:!1},limit:{type:[String,Number],default:1/0,validator:e=>1/0},minimum:{type:[String,Number],default:0,validator:e=>parseInt(e,10)==e},help:{type:[String,Boolean],default:!1},helpPosition:{type:[String,Boolean],default:!1},isGrouped:{type:Boolean,default:!1},errors:{type:[String,Array,Boolean],default:!1},removePosition:{type:[String,Boolean],default:!1},repeatable:{type:Boolean,default:!1},validation:{type:[String,Boolean,Array],default:!1},validationName:{type:[String,Boolean],default:!1},error:{type:[String,Boolean],default:!1},errorBehavior:{type:String,default:"blur",validator:function(e){return["blur","live","submit","value"].includes(e)}},showErrors:{type:Boolean,default:!1},groupErrors:{type:Object,default:()=>({}),validator:e=>{const t=/^\d+\./;return!Object.keys(e).some(r=>!t.test(r))}},imageBehavior:{type:String,default:"preview"},uploadUrl:{type:[String,Boolean],default:!1},uploader:{type:[Function,Object,Boolean],default:!1},uploadBehavior:{type:String,default:"live"},preventWindowDrops:{type:Boolean,default:!0},showValue:{type:[String,Boolean],default:!1},validationMessages:{type:Object,default:()=>({})},validationRules:{type:Object,default:()=>({})},checked:{type:[String,Boolean],default:!1},disableErrors:{type:Boolean,default:!1},addLabel:{type:[Boolean,String],default:!0},removeLabel:{type:[Boolean,String],default:!1},keepModelData:{type:[Boolean,String],default:"inherit"},ignored:{type:[Boolean,String],default:!1},debounce:{type:[Boolean,Number],default:!1},preventDeregister:{type:Boolean,default:!1}},data(){return{defaultId:this.$formulate.nextId(this),localAttributes:{},localErrors:[],localGroupErrors:{},proxy:this.getInitialValue(),behavioralErrorVisibility:this.errorBehavior==="live",formShouldShowErrors:!1,validationErrors:[],pendingValidation:Promise.resolve(),ruleRegistry:[],messageRegistry:{},touched:!1,debounceDelay:this.debounce,dSet:ke(),mntd:!1}},computed:f(c({},Te),{classification(){const e=this.$formulate.classify(this.type);return e==="box"&&this.options?"group":e},component(){return this.classification==="group"?"FormulateInputGroup":this.$formulate.component(this.type)},parsedValidationRules(){const e={};return Object.keys(this.validationRules).forEach(t=>{e[k(t)]=this.validationRules[t]}),e},parsedValidation(){return R(this.validation,this.$formulate.rules(this.parsedValidationRules))},messages(){const e={};return Object.keys(this.validationMessages).forEach(t=>{e[k(t)]=this.validationMessages[t]}),Object.keys(this.messageRegistry).forEach(t=>{e[k(t)]=this.messageRegistry[t]}),e}}),watch:{$attrs:{handler(e){this.updateLocalAttributes(e)},deep:!0},proxy:{handler:function(e,t){this.performValidation(),!this.isVmodeled&&!g(e,t,this.type==="group")&&(this.context.model=e),this.validateDependents(this),!this.touched&&e&&(this.touched=!0)},deep:!0},formulateValue:{handler:function(e,t){this.isVmodeled&&!g(e,t,this.type==="group")&&(this.context.model=e)},deep:!0},showValidationErrors:{handler(e){this.$emit("error-visibility",e)},immediate:!0},validation:{handler(){this.performValidation()},deep:!0},touched(e){this.errorBehavior==="value"&&e&&(this.behavioralErrorVisibility=e)},debounce(e){this.debounceDelay=e}},created(){this.applyInitialValue(),this.formulateRegister&&typeof this.formulateRegister=="function"&&this.formulateRegister(this.nameOrFallback,this),this.applyDefaultValue(),!this.disableErrors&&typeof this.observeErrors=="function"&&(this.observeErrors({callback:this.setErrors,type:"input",field:this.nameOrFallback}),this.type==="group"&&this.observeErrors({callback:this.setGroupErrors,type:"group",field:this.nameOrFallback})),this.updateLocalAttributes(this.$attrs),this.performValidation(),this.hasValue&&(this.touched=!0)},mounted(){this.mntd=!0},beforeDestroy(){!this.disableErrors&&typeof this.removeErrorObserver=="function"&&(this.removeErrorObserver(this.setErrors),this.type==="group"&&this.removeErrorObserver(this.setGroupErrors)),typeof this.formulateDeregister=="function"&&!this.preventDeregister&&this.formulateDeregister(this.nameOrFallback)},methods:{getInitialValue(){var e=this.$formulate.classify(this.type);return e=e==="box"&&this.options?"group":e,e==="box"&&this.checked?this.value||!0:h(this.$options.propsData,"value")&&e!=="box"?this.value:h(this.$options.propsData,"formulateValue")?this.formulateValue:e==="group"?Object.defineProperty(this.type==="group"?[{}]:[],"__init",{value:!0}):""},applyInitialValue(){!g(this.context.model,this.proxy)&&(this.classification!=="box"||h(this.$options.propsData,"options"))&&(this.context.model=this.proxy,this.$emit("input",this.proxy))},applyDefaultValue(){this.type==="select"&&!this.context.placeholder&&V(this.proxy)&&!this.isVmodeled&&this.value===!1&&this.context.options.length&&(h(this.$attrs,"multiple")?this.context.model=[]:this.context.model=this.context.options[0].value)},updateLocalAttributes(e){g(e,this.localAttributes)||(this.localAttributes=e)},performValidation(){let e=R(this.validation,this.$formulate.rules(this.parsedValidationRules));return e=this.ruleRegistry.length?this.ruleRegistry.concat(e):e,this.pendingValidation=this.runRules(e).then(t=>this.didValidate(t)),this.pendingValidation},runRules(e){const t=([r,o,i,n])=>{var a=r({value:this.context.model,getFormValues:(...l)=>this.getFormValues(this,...l),getGroupValues:(...l)=>this[`get${this.getGroupValues?"Group":"Form"}Values`](this,...l),name:this.context.name},...o);return a=a instanceof Promise?a:Promise.resolve(a),a.then(l=>l?!1:this.getMessage(i,o))};return new Promise(r=>{const o=(i,n=[])=>{const a=i.shift();Array.isArray(a)&&a.length?Promise.all(a.map(t)).then(l=>l.filter(u=>!!u)).then(l=>(l=Array.isArray(l)?l:[],(!l.length||!a.bail)&&i.length?o(i,n.concat(l)):r(n.concat(l).filter(u=>!V(u))))):r([])};o(be(e))})},didValidate(e){const t=!g(e,this.validationErrors);if(this.validationErrors=e,t){const r=this.getErrorObject();this.$emit("validation",r),this.formulateFieldValidation&&typeof this.formulateFieldValidation=="function"&&this.formulateFieldValidation(r)}},getMessage(e,t){return this.getMessageFunc(e)({args:t,name:this.mergedValidationName,value:this.context.model,vm:this,formValues:this.getFormValues(this),getFormValues:(...r)=>this.getFormValues(this,...r),getGroupValues:(...r)=>this[`get${this.getGroupValues?"Group":"Form"}Values`](this,...r)})},getMessageFunc(e){if(e=k(e),e==="optional")return()=>[];if(this.messages&&typeof this.messages[e]!="undefined")switch(typeof this.messages[e]){case"function":return this.messages[e];case"string":case"boolean":return()=>this.messages[e]}return t=>this.$formulate.validationMessage(e,t,this)},hasValidationErrors(){return new Promise(e=>{this.$nextTick(()=>{this.pendingValidation.then(()=>e(!!this.validationErrors.length))})})},getValidationErrors(){return new Promise(e=>{this.$nextTick(()=>this.pendingValidation.then(()=>e(this.getErrorObject())))})},getErrorObject(){return{name:this.context.nameOrFallback||this.context.name,errors:this.validationErrors.filter(e=>typeof e=="string"),hasErrors:!!this.validationErrors.length}},setErrors(e){this.localErrors=b(e)},setGroupErrors(e){this.localGroupErrors=e},registerRule(e,t,r,o=null){this.ruleRegistry.some(i=>i[2]===r)||(this.ruleRegistry.push([e,t,r]),o!==null&&(this.messageRegistry[r]=o))},removeRule(e){const t=this.ruleRegistry.findIndex(r=>r[2]===e);t>=0&&(this.ruleRegistry.splice(t,1),delete this.messageRegistry[e])}}},Ft=["data-classification","data-has-errors","data-is-showing-errors","data-has-value","data-type"];function wt(e,t,r,o,i,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.outer),"data-classification":n.classification,"data-has-errors":e.hasErrors,"data-is-showing-errors":e.hasVisibleErrors,"data-has-value":e.hasValue,"data-type":r.type},[s.createElementVNode("div",{class:s.normalizeClass(e.context.classes.wrapper)},[e.context.labelPosition==="before"?s.renderSlot(e.$slots,"label",s.normalizeProps(s.mergeProps({key:0},e.context)),()=>[e.context.hasLabel?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.label),s.mergeProps({key:0},e.context.slotProps.label,{context:e.context}),null,16,["context"])):s.createCommentVNode("",!0)]):s.createCommentVNode("",!0),e.context.helpPosition==="before"?s.renderSlot(e.$slots,"help",s.normalizeProps(s.mergeProps({key:1},e.context)),()=>[e.context.help?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.help),s.mergeProps({key:0},e.context.slotProps.help,{context:e.context}),null,16,["context"])):s.createCommentVNode("",!0)]):s.createCommentVNode("",!0),s.renderSlot(e.$slots,"element",s.normalizeProps(s.guardReactiveProps(e.context)),()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.component),s.mergeProps({context:e.context},e.context.slotProps.component,s.toHandlers(e.listeners)),{default:s.withCtx(()=>[s.renderSlot(e.$slots,"default",s.normalizeProps(s.guardReactiveProps(e.context)))]),_:3},16,["context"]))]),e.context.labelPosition==="after"?s.renderSlot(e.$slots,"label",s.normalizeProps(s.mergeProps({key:2},e.context)),()=>[e.context.hasLabel?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.label),s.mergeProps({key:0,context:e.context},e.context.slotProps.label),null,16,["context"])):s.createCommentVNode("",!0)]):s.createCommentVNode("",!0)],2),e.context.helpPosition==="after"?s.renderSlot(e.$slots,"help",s.normalizeProps(s.mergeProps({key:0},e.context)),()=>[e.context.help?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.help),s.mergeProps({key:0,context:e.context},e.context.slotProps.help),null,16,["context"])):s.createCommentVNode("",!0)]):s.createCommentVNode("",!0),s.renderSlot(e.$slots,"errors",s.normalizeProps(s.guardReactiveProps(e.context)),()=>[e.context.disableErrors?s.createCommentVNode("",!0):(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.errors),s.mergeProps({key:0,type:e.context.slotComponents.errors==="FormulateErrors"?"input":!1,context:e.context},e.context.slotProps.errors),null,16,["type","context"]))])],10,Ft)}const Pt=m(Vt,[["render",wt]]),Bt={inject:{observeErrors:{default:!1},removeErrorObserver:{default:!1},observeContext:{default:!1},removeContextObserver:{default:!1}},props:{context:{type:Object,default:()=>({})},type:{type:String,default:"form"}},data(){return{boundSetErrors:this.setErrors.bind(this),boundSetFormContext:this.setFormContext.bind(this),localErrors:[],formContext:{classes:{formErrors:"formulate-form-errors",formError:"formulate-form-error"}}}},computed:{visibleValidationErrors(){return Array.isArray(this.context.visibleValidationErrors)?this.context.visibleValidationErrors:[]},errors(){return Array.isArray(this.context.errors)?this.context.errors:[]},mergedErrors(){return this.errors.concat(this.localErrors)},visibleErrors(){return Array.from(new Set(this.mergedErrors.concat(this.visibleValidationErrors))).filter(e=>typeof e=="string")},outerClass(){return this.type==="input"&&this.context.classes?this.context.classes.errors:this.formContext.classes.formErrors},itemClass(){return this.type==="input"&&this.context.classes?this.context.classes.error:this.formContext.classes.formError},role(){return this.type==="form"?"alert":"status"},ariaLive(){return this.type==="form"?"assertive":"polite"},slotComponent(){return this.$formulate.slotComponent(null,"errorList")}},created(){this.type==="form"&&typeof this.observeErrors=="function"&&(Array.isArray(this.context.errors)||this.observeErrors({callback:this.boundSetErrors,type:"form"}),this.observeContext(this.boundSetFormContext))},destroyed(){this.type==="form"&&typeof this.removeErrorObserver=="function"&&(Array.isArray(this.context.errors)||this.removeErrorObserver(this.boundSetErrors),this.removeContextObserver(this.boundSetFormContext))},methods:{setErrors(e){this.localErrors=b(e)},setFormContext(e){this.formContext=e}}};function At(e,t,r,o,i,n){return s.openBlock(),s.createBlock(s.resolveDynamicComponent(n.slotComponent),{"visible-errors":n.visibleErrors,"item-class":n.itemClass,"outer-class":n.outerClass,role:n.role,"aria-live":n.ariaLive,type:r.type},null,8,["visible-errors","item-class","outer-class","role","aria-live","type"])}const St=m(Bt,[["render",At]]),Ot={props:{context:{type:Object,required:!0}}},$t=["id","textContent"];function Dt(e,t,r,o,i,n){return r.context.help?(s.openBlock(),s.createElementBlock("div",{key:0,id:`${r.context.id}-help`,class:s.normalizeClass(r.context.classes.help),textContent:s.toDisplayString(r.context.help)},null,10,$t)):s.createCommentVNode("",!0)}const Nt=m(Ot,[["render",Dt]]),jt={props:{file:{type:Object,required:!0},imagePreview:{type:Boolean,default:!1},context:{type:Object,required:!0}}},It=["src"],Rt=["title","textContent"],Lt=["data-just-finished","data-is-finished"];function Mt(e,t,r,o,i,n){return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(r.context.classes.file)},[r.imagePreview&&r.file.previewData?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(r.context.classes.fileImagePreview)},[s.createElementVNode("img",{src:r.file.previewData,class:s.normalizeClass(r.context.classes.fileImagePreviewImage)},null,10,It)],2)):s.createCommentVNode("",!0),s.createElementVNode("div",{class:s.normalizeClass(r.context.classes.fileName),title:r.file.name,textContent:s.toDisplayString(r.file.name)},null,10,Rt),r.file.progress!==!1?(s.openBlock(),s.createElementBlock("div",{key:1,"data-just-finished":r.file.justFinished,"data-is-finished":!r.file.justFinished&&r.file.complete,class:s.normalizeClass(r.context.classes.fileProgress)},[s.createElementVNode("div",{class:s.normalizeClass(r.context.classes.fileProgressInner),style:s.normalizeStyle({width:r.file.progress+"%"})},null,6)],10,Lt)):s.createCommentVNode("",!0),r.file.complete&&!r.file.justFinished||r.file.progress===!1?(s.openBlock(),s.createElementBlock("div",{key:2,class:s.normalizeClass(r.context.classes.fileRemove),onClick:t[0]||(t[0]=(...a)=>r.file.removeFile&&r.file.removeFile(...a))},null,2)):s.createCommentVNode("",!0)],2)}const Ut=m(jt,[["render",Mt]]),_t={name:"FormulateGrouping",props:{context:{type:Object,required:!0}},provide(){return{isSubField:()=>!0,registerProvider:this.registerProvider,deregisterProvider:this.deregisterProvider}},data(){return{providers:[],keys:[]}},inject:["formulateRegisterRule","formulateRemoveRule"],computed:{items(){return Array.isArray(this.context.model)?!this.context.repeatable&&this.context.model.length===0?[this.setId({},0)]:this.context.model.length<this.context.minimum?new Array(this.context.minimum||1).fill("").map((e,t)=>this.setId(this.context.model[t]||{},t)):this.context.model.map((e,t)=>this.setId(e,t)):new Array(this.context.minimum||1).fill("").map((e,t)=>this.setId({},t))},formShouldShowErrors(){return this.context.formShouldShowErrors},groupErrors(){return this.items.map((e,t)=>h(this.context.groupErrors,t)?this.context.groupErrors[t]:{})}},watch:{providers(){this.formShouldShowErrors&&this.showErrors()},formShouldShowErrors(e){e&&this.showErrors()},items:{handler(e,t){g(e,t,!0)||(this.keys=e.map(r=>r.__id))},immediate:!0}},created(){this.formulateRegisterRule(this.validateGroup.bind(this),[],"formulateGrouping",!0)},destroyed(){this.formulateRemoveRule("formulateGrouping")},methods:{validateGroup(){return Promise.all(this.providers.reduce((e,t)=>(t&&typeof t.hasValidationErrors=="function"&&e.push(t.hasValidationErrors()),e),[])).then(e=>!e.some(t=>!!t))},showErrors(){this.providers.forEach(e=>e&&typeof e.showErrors=="function"&&e.showErrors())},setItem(e,t){Array.isArray(this.context.model)&&this.context.model.length>=this.context.minimum&&!this.context.model.__init?this.context.model.splice(e,1,this.setId(t,e)):this.context.model=this.items.map((r,o)=>o===e?this.setId(t,e):r)},removeItem(e){Array.isArray(this.context.model)&&this.context.model.length>this.context.minimum?(this.context.model=this.context.model.filter((t,r)=>r===e?!1:t),this.context.rootEmit("repeatableRemoved",this.context.model)):!Array.isArray(this.context.model)&&this.items.length>this.context.minimum&&(this.context.model=new Array(this.items.length-1).fill("").map((t,r)=>this.setId({},r)),this.context.rootEmit("repeatableRemoved",this.context.model))},registerProvider(e){this.providers.some(t=>t===e)||this.providers.push(e)},deregisterProvider(e){this.providers=this.providers.filter(t=>t!==e)},setId(e,t){return e.__id?e:S(e,this.keys[t])}}};function Gt(e,t,r,o,i,n){const a=s.resolveComponent("FormulateRepeatableProvider"),l=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createBlock(l,{name:"grouping",class:s.normalizeClass(r.context.classes.grouping),context:r.context,"force-wrap":r.context.repeatable},{default:s.withCtx(()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.items,(u,d)=>(s.openBlock(),s.createBlock(a,{key:u.__id,index:d,context:r.context,uuid:u.__id,errors:n.groupErrors[d],onRemove:n.removeItem,onInput:y=>n.setItem(d,y)},{default:s.withCtx(()=>[s.renderSlot(e.$slots,"default")]),_:2},1032,["index","context","uuid","errors","onRemove","onInput"]))),128))]),_:3},8,["class","context","force-wrap"])}const zt=m(_t,[["render",Gt]]),Ht={props:{context:{type:Object,required:!0}}},Tt=["id","for","textContent"];function qt(e,t,r,o,i,n){return s.openBlock(),s.createElementBlock("label",{id:`${r.context.id}_label`,class:s.normalizeClass(r.context.classes.label),for:r.context.id,textContent:s.toDisplayString(r.context.label)},null,10,Tt)}const Kt=m(Ht,[["render",qt]]),Wt={props:{context:{type:Object,required:!0},addMore:{type:Function,required:!0}}};function Yt(e,t,r,o,i,n){const a=s.resolveComponent("FormulateInput");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(r.context.classes.groupAddMore)},[s.createVNode(a,{type:"button",label:r.context.addLabel,"data-minor":"","data-ghost":"",onClick:r.addMore},null,8,["label","onClick"])],2)}const Jt=m(Wt,[["render",Yt]]),w={props:{context:{type:Object,required:!0}},computed:{type(){return this.context.type},attributes(){return this.context.attributes||{}},hasValue(){return this.context.hasValue}}},Zt={name:"FormulateInputBox",mixins:[w],computed:{usesDecorator(){return this.$formulate.options.useInputDecorators}}},Qt=["data-type"],Xt=["value"],er=["value"];function tr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":e.context.type},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),e.type==="radio"?s.withDirectives((s.openBlock(),s.createElementBlock("input",s.mergeProps({key:0,"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l),type:"radio",value:e.context.value},e.attributes,s.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16,Xt)),[[s.vModelRadio,e.context.model]]):s.withDirectives((s.openBlock(),s.createElementBlock("input",s.mergeProps({key:1,"onUpdate:modelValue":t[2]||(t[2]=l=>e.context.model=l),type:"checkbox",value:e.context.value},e.attributes,s.toHandlers(e.$listeners,!0),{onBlur:t[3]||(t[3]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16,er)),[[s.vModelCheckbox,e.context.model]]),n.usesDecorator?(s.openBlock(),s.createBlock(s.resolveDynamicComponent("label"),{key:2,class:s.normalizeClass(e.context.classes.decorator),for:e.attributes.id},null,8,["class","for"])):s.createCommentVNode("",!0),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,Qt)}const rr=m(Zt,[["render",tr]]),sr={props:{visibleErrors:{type:Array,required:!0},itemClass:{type:[String,Array,Object,Boolean],default:!1},outerClass:{type:[String,Array,Object,Boolean],default:!1},role:{type:[String],default:"status"},ariaLive:{type:[String,Boolean],default:"polite"},type:{type:String,required:!0}}},or=["role","aria-live","textContent"];function ir(e,t,r,o,i,n){return r.visibleErrors.length?(s.openBlock(),s.createElementBlock("ul",{key:0,class:s.normalizeClass(r.outerClass)},[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(r.visibleErrors,a=>(s.openBlock(),s.createElementBlock("li",{key:a,class:s.normalizeClass(r.itemClass),role:r.role,"aria-live":r.ariaLive,textContent:s.toDisplayString(a)},null,10,or))),128))],2)):s.createCommentVNode("",!0)}const nr=m(sr,[["render",ir]]),ar={name:"FormulateInputText",mixins:[w]},lr=["data-type"],ur=["type"];function cr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":e.context.type},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),s.withDirectives(s.createElementVNode("input",s.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l),type:e.type},e.attributes,{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))},s.toHandlers(e.$listeners,!0)),null,16,ur),[[s.vModelDynamic,e.context.model]]),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,lr)}const dr=m(ar,[["render",cr]]),hr={name:"FormulateFiles",props:{files:{type:F,required:!0},imagePreview:{type:Boolean,default:!1},context:{type:Object,required:!0}},computed:{fileUploads(){return this.files.files||[]},isMultiple(){return h(this.context.attributes,"multiple")}},watch:{files(){this.imagePreview&&this.files.loadPreviews()}},mounted(){this.imagePreview&&this.files.loadPreviews()},methods:{appendFiles(){const e=this.$refs.addFiles;e.files.length&&this.files.mergeFileList(e)}}},mr=["data-has-error","data-has-preview"],fr=["textContent"];function pr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return n.fileUploads.length?(s.openBlock(),s.createElementBlock("ul",{key:0,class:s.normalizeClass(r.context.classes.files)},[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.fileUploads,l=>(s.openBlock(),s.createElementBlock("li",{key:l.uuid,"data-has-error":!!l.error,"data-has-preview":!!(r.imagePreview&&l.previewData)},[s.createVNode(a,{name:"file",context:r.context,file:l,"image-preview":r.imagePreview},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.context.slotComponents.file),{context:r.context,file:l,"image-preview":r.imagePreview},null,8,["context","file","image-preview"]))]),_:2},1032,["context","file","image-preview"]),l.error?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(r.context.classes.fileUploadError),textContent:s.toDisplayString(l.error)},null,10,fr)):s.createCommentVNode("",!0)],8,mr))),128)),n.isMultiple&&r.context.addLabel?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(r.context.classes.fileAdd),role:"button"},[s.createTextVNode(s.toDisplayString(r.context.addLabel)+" ",1),s.createElementVNode("input",{ref:"addFiles",type:"file",multiple:"",class:s.normalizeClass(r.context.classes.fileAddInput),onChange:t[0]||(t[0]=(...l)=>n.appendFiles&&n.appendFiles(...l))},null,34)],2)):s.createCommentVNode("",!0)],2)):s.createCommentVNode("",!0)}const yr=m(hr,[["render",pr]]),gr={name:"FormulateInputFile",components:{FormulateFiles:yr},mixins:[w],data(){return{isOver:!1}},computed:{hasFiles(){return!!(this.context.model instanceof F&&this.context.model.files.length)}},created(){Array.isArray(this.context.model)&&typeof this.context.model[0][this.$formulate.getFileUrlKey()]=="string"&&(this.context.model=this.$formulate.createUpload({files:this.context.model},this.context))},mounted(){window&&this.context.preventWindowDrops&&(window.addEventListener("dragover",this.preventDefault),window.addEventListener("drop",this.preventDefault))},destroyed(){window&&this.context.preventWindowDrops&&(window.removeEventListener("dragover",this.preventDefault),window.removeEventListener("drop",this.preventDefault))},methods:{preventDefault(e){e.target.tagName!=="INPUT"&&e.target.getAttribute("type")!=="file"&&(e=e||event,e.preventDefault())},handleFile(){this.isOver=!1;const e=this.$refs.file;e.files.length&&(this.context.model=this.$formulate.createUpload(e,this.context),this.$nextTick(()=>this.attemptImmediateUpload()))},attemptImmediateUpload(){this.context.uploadBehavior==="live"&&this.context.model instanceof F&&this.context.hasValidationErrors().then(e=>{e||this.context.model.upload()})},handleDragOver(e){e.preventDefault(),this.isOver=!0},handleDragLeave(e){e.preventDefault(),this.isOver=!1}}},br=["data-type","data-has-files"],xr=["data-has-files"],vr=["data-is-drag-hover"];function Er(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot"),l=s.resolveComponent("FormulateFiles");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":e.context.type,"data-has-files":n.hasFiles},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),s.createElementVNode("div",{class:s.normalizeClass(e.context.classes.uploadArea),"data-has-files":n.hasFiles},[s.createElementVNode("input",s.mergeProps({ref:"file","data-is-drag-hover":i.isOver,type:"file"},e.attributes,s.toHandlers(e.$listeners,!0),{onBlur:t[0]||(t[0]=(...u)=>e.context.blurHandler&&e.context.blurHandler(...u)),onChange:t[1]||(t[1]=(...u)=>n.handleFile&&n.handleFile(...u)),onDragover:t[2]||(t[2]=(...u)=>n.handleDragOver&&n.handleDragOver(...u)),onDragleave:t[3]||(t[3]=(...u)=>n.handleDragLeave&&n.handleDragLeave(...u))}),null,16,vr),s.createVNode(a,{name:"uploadAreaMask",context:e.context,"has-files":n.hasFiles},{default:s.withCtx(()=>[s.withDirectives((s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.uploadAreaMask),{"has-files":e.context.slotComponents.uploadAreaMask==="div"?!1:n.hasFiles,"data-has-files":e.context.slotComponents.uploadAreaMask==="div"?n.hasFiles:!1,class:s.normalizeClass(e.context.classes.uploadAreaMask)},null,8,["has-files","data-has-files","class"])),[[s.vShow,!n.hasFiles]])]),_:1},8,["context","has-files"]),n.hasFiles?(s.openBlock(),s.createBlock(l,{key:0,files:e.context.model,"image-preview":e.context.type==="image"&&e.context.imageBehavior==="preview",context:e.context},null,8,["files","image-preview","context"])):s.createCommentVNode("",!0)],10,xr),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,br)}const Cr=m(gr,[["render",Er]]),kr={props:{context:{type:Object,required:!0},removeItem:{type:Function,required:!0},index:{type:Number,required:!0}}};function Vr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(r.context.classes.groupRepeatable)},[r.context.removePosition==="after"?s.renderSlot(e.$slots,"default",{key:0}):s.createCommentVNode("",!0),s.createVNode(a,{name:"remove",context:r.context,index:r.index,"remove-item":r.removeItem},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.context.slotComponents.remove),s.mergeProps({context:r.context,index:r.index,"remove-item":r.removeItem},r.context.slotProps.remove),null,16,["context","index","remove-item"]))]),_:1},8,["context","index","remove-item"]),r.context.removePosition==="before"?s.renderSlot(e.$slots,"default",{key:1}):s.createCommentVNode("",!0)],2)}const Fr=m(kr,[["render",Vr]]),wr={name:"FormulateInputGroup",props:{context:{type:Object,required:!0}},computed:{options(){return this.context.options||[]},subType(){return this.context.type==="group"?"grouping":"inputs"},optionsWithContext(){const vs=this.context,{attributes:ue}=vs,_=ue,{id:e}=_,t=v(_,["id"]),G=vs,{blurHandler:r,classification:o,component:i,getValidationErrors:n,hasLabel:a,hasValidationErrors:l,isSubField:u,isValid:d,labelPosition:y,options:x,performValidation:P,setErrors:j,slotComponents:B,slotProps:C,validationErrors:O,visibleValidationErrors:hs,classes:ms,showValidationErrors:fs,rootEmit:ps,help:ys,pseudoProps:gs,rules:bs,model:xs}=G,le=v(G,["attributes","blurHandler","classification","component","getValidationErrors","hasLabel","hasValidationErrors","isSubField","isValid","labelPosition","options","performValidation","setErrors","slotComponents","slotProps","validationErrors","visibleValidationErrors","classes","showValidationErrors","rootEmit","help","pseudoProps","rules","model"]);return this.options.map(ce=>this.groupItemContext(le,ce,t))},totalItems(){return Array.isArray(this.context.model)&&this.context.model.length>this.context.minimum?this.context.model.length:this.context.minimum||1},canAddMore(){return this.context.repeatable&&this.totalItems<this.context.limit},labelledBy(){return this.context.label&&`${this.context.id}_label`}},methods:{addItem(){if(Array.isArray(this.context.model)){const e=this.context.minimum-this.context.model.length+1,t=Math.max(e,1);for(let r=0;r<t;r++)this.context.model.push(S({}))}else this.context.model=new Array(this.totalItems+1).fill("").map(()=>S({}));this.context.rootEmit("repeatableAdded",this.context.model)},groupItemContext(e,t,r){return Object.assign({},e,t,r,{isGrouped:!0},e.hasGivenName?{}:{name:!0})}}},Pr=["data-is-repeatable","aria-labelledby"];function Br(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot"),l=s.resolveComponent("FormulateInput"),u=s.resolveComponent("FormulateGrouping");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(r.context.classes.element),"data-is-repeatable":r.context.repeatable,role:"group","aria-labelledby":n.labelledBy},[s.createVNode(a,{name:"prefix",context:r.context},{default:s.withCtx(()=>[r.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.context.slotComponents.prefix),{key:0,context:r.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),n.subType!=="grouping"?(s.openBlock(!0),s.createElementBlock(s.Fragment,{key:0},s.renderList(n.optionsWithContext,d=>(s.openBlock(),s.createBlock(l,s.mergeProps({key:d.id,modelValue:r.context.model,"onUpdate:modelValue":t[0]||(t[0]=y=>r.context.model=y),ref_for:!0},d,{"disable-errors":!0,"prevent-deregister":!0,class:"formulate-input-group-item",onBlur:r.context.blurHandler}),null,16,["modelValue","onBlur"]))),128)):(s.openBlock(),s.createElementBlock(s.Fragment,{key:1},[s.createVNode(u,{context:r.context},{default:s.withCtx(()=>[s.renderSlot(e.$slots,"default")]),_:3},8,["context"]),n.canAddMore?(s.openBlock(),s.createBlock(a,{key:0,name:"addmore",context:r.context,"add-more":n.addItem},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.context.slotComponents.addMore),s.mergeProps({context:r.context,"add-more":n.addItem},r.context.slotProps.addMore,{onAdd:n.addItem}),null,16,["context","add-more","onAdd"]))]),_:1},8,["context","add-more"])):s.createCommentVNode("",!0)],64)),s.createVNode(a,{name:"suffix",context:r.context},{default:s.withCtx(()=>[r.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.context.slotComponents.suffix),{key:0,context:r.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,Pr)}const Ar=m(wr,[["render",Br]]),Sr={name:"FormulateInputButton",mixins:[w]},Or=["data-type"],$r=["type"];function Dr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":e.context.type},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),s.createElementVNode("button",s.mergeProps({type:e.type},e.attributes,s.toHandlers(e.$listeners,!0)),[s.renderSlot(e.$slots,"default",{context:e.context},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.buttonContent),{context:e.context},null,8,["context"]))])],16,$r),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,Or)}const Nr=m(Sr,[["render",Dr]]),jr={name:"FormulateInputSelect",mixins:[w],computed:{options(){return this.context.options||{}},optionGroups(){return this.context.optionGroups||!1},placeholderSelected(){return!!(!this.hasValue&&this.context.attributes&&this.context.attributes.placeholder)}}},Ir=["data-type","data-multiple"],Rr=["data-placeholder-selected"],Lr=["selected"],Mr=["value","disabled","textContent"],Ur=["label"],_r=["value","disabled","textContent"];function Gr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":e.context.type,"data-multiple":e.attributes&&e.attributes.multiple!==void 0},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),s.withDirectives(s.createElementVNode("select",s.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l)},e.attributes,{"data-placeholder-selected":n.placeholderSelected},s.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),[e.context.placeholder?(s.openBlock(),s.createElementBlock("option",{key:0,value:"",hidden:"hidden",disabled:"",selected:!e.hasValue},s.toDisplayString(e.context.placeholder),9,Lr)):s.createCommentVNode("",!0),n.optionGroups?(s.openBlock(!0),s.createElementBlock(s.Fragment,{key:2},s.renderList(n.optionGroups,(l,u)=>(s.openBlock(),s.createElementBlock("optgroup",{key:u,label:u},[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(l,d=>(s.openBlock(),s.createElementBlock("option",s.mergeProps({key:d.id,value:d.value,disabled:!!d.disabled,ref_for:!0},d.attributes||d.attrs||{},{textContent:s.toDisplayString(d.label)}),null,16,_r))),128))],8,Ur))),128)):(s.openBlock(!0),s.createElementBlock(s.Fragment,{key:1},s.renderList(n.options,l=>(s.openBlock(),s.createElementBlock("option",s.mergeProps({key:l.id,value:l.value,disabled:!!l.disabled,ref_for:!0},l.attributes||l.attrs||{},{textContent:s.toDisplayString(l.label)}),null,16,Mr))),128))],16,Rr),[[s.vModelSelect,e.context.model]]),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,Ir)}const zr=m(jr,[["render",Gr]]),Hr={name:"FormulateInputSlider",mixins:[w]},Tr=["data-type"],qr=["type"],Kr=["textContent"];function Wr(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":e.context.type},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),s.withDirectives(s.createElementVNode("input",s.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l),type:e.type},e.attributes,s.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16,qr),[[s.vModelDynamic,e.context.model]]),e.context.showValue?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(e.context.classes.rangeValue),textContent:s.toDisplayString(e.context.model)},null,10,Kr)):s.createCommentVNode("",!0),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],10,Tr)}const Yr=m(Hr,[["render",Wr]]),Jr={props:{context:{type:Object,required:!0}}},Zr=["textContent"];function Qr(e,t,r,o,i,n){return s.openBlock(),s.createElementBlock("span",{class:s.normalizeClass(`formulate-input-element--${r.context.type}--label`),textContent:s.toDisplayString(r.context.value||r.context.label||r.context.name||"Submit")},null,10,Zr)}const Xr=m(Jr,[["render",Qr]]),es={name:"FormulateInputTextArea",mixins:[w]};function ts(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(e.context.classes.element),"data-type":"textarea"},[s.createVNode(a,{name:"prefix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.prefix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.prefix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"]),s.withDirectives(s.createElementVNode("textarea",s.mergeProps({"onUpdate:modelValue":t[0]||(t[0]=l=>e.context.model=l)},e.attributes,s.toHandlers(e.$listeners,!0),{onBlur:t[1]||(t[1]=(...l)=>e.context.blurHandler&&e.context.blurHandler(...l))}),null,16),[[s.vModelText,e.context.model]]),s.createVNode(a,{name:"suffix",context:e.context},{default:s.withCtx(()=>[e.context.slotComponents.suffix?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(e.context.slotComponents.suffix),{key:0,context:e.context},null,8,["context"])):s.createCommentVNode("",!0)]),_:1},8,["context"])],2)}const rs=m(es,[["render",ts]]),ss={provide(){return f(c({},ie(this,["getFormValues"])),{formulateSetter:(e,t)=>this.setGroupValue(e,t)})},inject:{registerProvider:"registerProvider",deregisterProvider:"deregisterProvider"},props:{index:{type:Number,required:!0},context:{type:Object,required:!0},uuid:{type:String,required:!0},errors:{type:Object,required:!0}},data(){return f(c({},te(this)),{isGrouping:!0})},computed:f(c({},re()),{mergedFieldErrors(){return this.errors}}),watch:f(c({},oe()),{"context.model":{handler(e){g(e[this.index],this.proxy,!0)||this.setValues(e[this.index])},deep:!0}}),created(){this.applyInitialValues(),this.registerProvider(this)},beforeDestroy(){this.preventCleanup=!0,this.deregisterProvider(this)},methods:f(c({},se()),{setGroupValue(e,t){g(this.proxy[e],t,!0)||this.setFieldValue(e,t)},removeItem(){this.$emit("remove",this.index)}})};function os(e,t,r,o,i,n){const a=s.resolveComponent("FormulateSlot");return s.openBlock(),s.createBlock(a,{name:"repeatable",context:r.context,index:r.index,"remove-item":n.removeItem},{default:s.withCtx(()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(r.context.slotComponents.repeatable),s.mergeProps({context:r.context,index:r.index,"remove-item":n.removeItem},r.context.slotProps.repeatable),{default:s.withCtx(()=>[s.createVNode(a,{context:r.context,index:r.index,name:"default"},null,8,["context","index"])]),_:1},16,["context","index","remove-item"]))]),_:1},8,["context","index","remove-item"])}const is=m(ss,[["render",os]]),ns={props:{index:{type:Number,default:null},context:{type:Object,required:!0},removeItem:{type:Function,required:!0}}},as=["data-disabled","textContent"];function ls(e,t,r,o,i,n){return r.context.repeatable?(s.openBlock(),s.createElementBlock("a",{key:0,class:s.normalizeClass(r.context.classes.groupRepeatableRemove),"data-disabled":r.context.model.length<=r.context.minimum,role:"button",onClick:t[0]||(t[0]=s.withModifiers((...a)=>r.removeItem&&r.removeItem(...a),["prevent"])),onKeypress:t[1]||(t[1]=s.withKeys((...a)=>r.removeItem&&r.removeItem(...a),["enter"])),textContent:s.toDisplayString(r.context.removeLabel)},null,42,as)):s.createCommentVNode("",!0)}const us=m(ns,[["render",ls]]);class cs{constructor(){this.options={},this.defaults={components:{FormulateSlot:Re,FormulateForm:He,FormulateFile:Ut,FormulateHelp:Nt,FormulateLabel:Kt,FormulateInput:Pt,FormulateErrors:St,FormulateSchema:Ue,FormulateAddMore:Jt,FormulateGrouping:zt,FormulateInputBox:rr,FormulateInputText:dr,FormulateInputFile:Cr,FormulateErrorList:nr,FormulateRepeatable:Fr,FormulateInputGroup:Ar,FormulateInputButton:Nr,FormulateInputSelect:zr,FormulateInputSlider:Yr,FormulateButtonContent:Xr,FormulateInputTextArea:rs,FormulateRepeatableRemove:us,FormulateRepeatableProvider:is},slotComponents:{addMore:"FormulateAddMore",buttonContent:"FormulateButtonContent",errorList:"FormulateErrorList",errors:"FormulateErrors",file:"FormulateFile",help:"FormulateHelp",label:"FormulateLabel",prefix:!1,remove:"FormulateRepeatableRemove",repeatable:"FormulateRepeatable",suffix:!1,uploadAreaMask:"div"},slotProps:{},library:pe,rules:Be,mimes:Ae,locale:!1,uploader:Ie,uploadUrl:!1,fileUrlKey:"url",uploadJustCompleteDuration:1e3,errorHandler:t=>t,plugins:[je],locales:{},failedValidation:()=>!1,idPrefix:"formulate-",baseClasses:t=>t,coreClasses:De,classes:{},useInputDecorators:!0,validationNameStrategy:!1},this.registry=new Map,this.idRegistry={}}install(t,r){t.prototype.$formulate=this,this.options=this.defaults;var o=this.defaults.plugins;r&&Array.isArray(r.plugins)&&r.plugins.length&&(o=o.concat(r.plugins)),o.forEach(n=>typeof n=="function"?n(this):null),this.extend(r||{});for(var i in this.options.components)t.component(i,this.options.components[i])}nextId(t){const o=(t.$route&&t.$route.path?t.$route.path:!1)?t.$route.path.replace(/[/\\.\s]/g,"-"):"global";return Object.prototype.hasOwnProperty.call(this.idRegistry,o)||(this.idRegistry[o]=0),`${this.options.idPrefix}${o}-${++this.idRegistry[o]}`}extend(t){if(typeof t=="object")return this.options=this.merge(this.options,t),this;throw new Error(`Formulate.extend expects an object, was ${typeof t}`)}merge(t,r,o=!0){var i={};for(var n in t)r.hasOwnProperty(n)?W(r[n])&&W(t[n])?i[n]=this.merge(t[n],r[n],o):o&&Array.isArray(t[n])&&Array.isArray(r[n])?i[n]=t[n].concat(r[n]):i[n]=r[n]:i[n]=t[n];for(var a in r)i.hasOwnProperty(a)||(i[a]=r[a]);return i}classify(t){return this.options.library.hasOwnProperty(t)?this.options.library[t].classification:"unknown"}classes(t){const r=this.options.coreClasses(t),o=this.options.baseClasses(r,t);return Object.keys(o).reduce((i,n)=>{let a=N(o[n],this.options.classes[n],t);return a=N(a,t[`${n}Class`],t),a=$e(n,a,this.options.classes,t),Object.assign(i,{[n]:a})},{})}typeProps(t){const r=i=>Object.keys(i).reduce((n,a)=>Array.isArray(i[a])?n.concat(i[a]):n,[]),o=r(this.options.slotProps);return this.options.library[t]?o.concat(r(this.options.library[t].slotProps||{})):o}slotProps(t,r,o){let i=Array.isArray(this.options.slotProps[r])?this.options.slotProps[r]:[];const n=this.options.library[t];return n&&n.slotProps&&Array.isArray(n.slotProps[r])&&(i=i.concat(n.slotProps[r])),i.reduce((a,l)=>Object.assign(a,{[l]:o[l]}),{})}component(t){return this.options.library.hasOwnProperty(t)?this.options.library[t].component:!1}slotComponent(t,r){const o=this.options.library[t];return o&&o.slotComponents&&o.slotComponents[r]?o.slotComponents[r]:this.options.slotComponents[r]}rules(t={}){return c(c({},this.options.rules),t)}i18n(t){if(t.$i18n)switch(typeof t.$i18n.locale){case"string":return t.$i18n.locale;case"function":return t.$i18n.locale()}return!1}getLocale(t){return this.selectedLocale||(this.selectedLocale=[this.options.locale,this.i18n(t),"en"].reduce((r,o)=>{if(r)return r;if(o){const i=Ee(o).find(n=>h(this.options.locales,n));i&&(r=i)}return r},!1)),this.selectedLocale}setLocale(t){h(this.options.locales,t)&&(this.options.locale=t,this.selectedLocale=t,this.registry.forEach((r,o)=>{r.hasValidationErrors()}))}validationMessage(t,r,o){const i=this.options.locales[this.getLocale(o)];return i.hasOwnProperty(t)?i[t](r):i.hasOwnProperty("default")?i.default(r):"Invalid field value"}register(t){t.$options.name==="FormulateForm"&&t.name&&this.registry.set(t.name,t)}deregister(t){t.$options.name==="FormulateForm"&&t.name&&this.registry.has(t.name)&&this.registry.delete(t.name)}handle(t,r,o=!1){const i=o?t:this.options.errorHandler(t,r);return r&&this.registry.has(r)&&this.registry.get(r).applyErrors({formErrors:b(i.formErrors),inputErrors:i.inputErrors||{}}),i}reset(t,r={}){this.resetValidation(t),this.setValues(t,r)}submit(t){this.registry.get(t).formSubmitted()}resetValidation(t){const r=this.registry.get(t);r.hideErrors(t),r.namedErrors=[],r.namedFieldErrors={}}setValues(t,r){r&&!Array.isArray(r)&&typeof r=="object"&&this.registry.get(t).setValues(c({},r))}getUploader(){return this.options.uploader||!1}getUploadUrl(){return this.options.uploadUrl||!1}getFileUrlKey(){return this.options.fileUrlKey||"url"}createUpload(t,r){return new F(t,r,this.options)}failedValidation(t){return this.options.failedValidation(this)}}const ds=new cs;module.exports=ds;
//# sourceMappingURL=formulate.cjs.js.map
